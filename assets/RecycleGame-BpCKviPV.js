import{r,j as e}from"./index-CviBvuO_.js";import{L as E,A as I,m as h}from"./Layout-DWGereyf.js";import{G as $}from"./GameShell-D7iUMIaC.js";import{e as D}from"./confetti.module-CKEGaJVs.js";import{u as T}from"./use-tts-CdUF0GqX.js";import{D as R,a as B,u as G}from"./core.esm-CkJzmFJ3.js";import"./use-scores-DGCWyIxn.js";import"./input-BWSWGmnF.js";const Q=[{id:"fishbone",name:"é­šéª¨é ­",emoji:"ğŸŸ",type:"general"},{id:"banana",name:"é¦™è•‰çš®",emoji:"ğŸŒ",type:"general"},{id:"eggshell",name:"è›‹æ®¼",emoji:"ğŸ¥š",type:"general"},{id:"newspaper",name:"èˆŠå ±ç´™",emoji:"ğŸ“°",type:"paper"},{id:"cardboard",name:"ç´™ç®±",emoji:"ğŸ“¦",type:"paper"},{id:"paper",name:"å»¢ç´™",emoji:"ğŸ“„",type:"paper"},{id:"bottle",name:"å¯¶ç‰¹ç“¶",emoji:"ğŸ¶",type:"plastic"},{id:"bag",name:"å¡‘è† è¢‹",emoji:"ğŸ›ï¸",type:"plastic"},{id:"cup",name:"å¡‘è† æ¯",emoji:"ğŸ¥¤",type:"plastic"}],A=[{id:"general",name:"ä¸€èˆ¬åƒåœ¾",emoji:"ğŸ—‘ï¸",color:"bg-gray-400",happyEmoji:"ğŸ˜Š"},{id:"paper",name:"ç´™é¡å›æ”¶",emoji:"ğŸ“„",color:"bg-blue-400",happyEmoji:"ğŸ˜„"},{id:"plastic",name:"å¡‘è† å›æ”¶",emoji:"â™»ï¸",color:"bg-green-400",happyEmoji:"ğŸ˜"}];function C({item:s,onSpeak:n}){const{attributes:l,listeners:i,setNodeRef:t,transform:o,isDragging:d}=B({id:s.id}),m=o?{transform:`translate(${o.x}px, ${o.y}px)`,zIndex:d?100:1}:void 0;return e.jsxs(h.div,{ref:t,style:m,...i,...l,initial:{x:-200},animate:{x:0},className:"bg-white p-2 sm:p-3 rounded-xl sm:rounded-2xl shadow-lg cursor-grab active:cursor-grabbing flex flex-col items-center gap-1",onMouseEnter:()=>n(s.name),"data-testid":`trash-${s.id}`,children:[e.jsx("span",{className:"text-3xl sm:text-4xl",children:s.emoji}),e.jsx("span",{className:"text-xs sm:text-sm font-medium",children:s.name})]})}function k({bin:s,isHappy:n,isWrong:l}){const{isOver:i,setNodeRef:t}=G({id:s.id});return e.jsxs(h.div,{ref:t,animate:{scale:i?1.1:1,rotate:l?[-5,5,-5,5,0]:0},className:`
        ${s.color} w-20 h-24 sm:w-24 sm:h-28 md:w-28 md:h-32 rounded-xl sm:rounded-2xl 
        flex flex-col items-center justify-center gap-1 shadow-lg
        border-4 ${i?"border-white":"border-white/50"}
        ${n?"ring-4 ring-green-400":""}
        ${l?"ring-4 ring-red-400":""}
      `,"data-testid":`bin-${s.id}`,children:[e.jsx(h.span,{className:"text-3xl sm:text-4xl",animate:{scale:n?[1,1.3,1]:1},children:n?s.happyEmoji:s.emoji}),e.jsx("span",{className:"text-xs sm:text-sm font-bold text-white text-center px-1",children:s.name})]})}function W(){const[s,n]=r.useState(0),[l,i]=r.useState(0),[t,o]=r.useState(null),[d,m]=r.useState(null),[v,c]=r.useState(null),[N,f]=r.useState(!1),[p,j]=r.useState([]),{speak:x}=T();r.useEffect(()=>{if(s>=10){f(!0);return}if(p.length===0||s===0){const a=[...Q].sort(()=>.5-Math.random());j(a),o(a[0])}else o(p[s%p.length]);m(null),c(null)},[s]),r.useEffect(()=>{t&&x(`é€™æ˜¯${t.name}ï¼Œè¦ä¸Ÿåˆ°å“ªè£¡å‘¢ï¼Ÿ`)},[t]);const w=a=>{const{active:y,over:b}=a;if(!b||!t)return;const u=b.id;u===t.type?(D({particleCount:30,spread:50,origin:{y:.6}}),x("ç­”å°äº†ï¼åœ°çƒè¬è¬ä½ ï¼"),m(u),i(g=>g+10),setTimeout(()=>{n(g=>g+1)},1e3)):(x("ä¸å°å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼"),c(u),setTimeout(()=>c(null),500))},S=()=>{n(0),i(0),f(!1),j([]),m(null),c(null)};return e.jsx(E,{children:e.jsx($,{title:"å¿«æ¨‚å›æ”¶ç«™",score:l,totalQuestions:10,currentQuestionIndex:s,gameType:"recycle",isGameOver:N,onRestart:S,colorClass:"bg-[hsl(var(--macaron-green))] text-[hsl(var(--macaron-green-dark))]",children:e.jsx(R,{onDragEnd:w,children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6",children:[e.jsx("h3",{className:"font-display text-base sm:text-lg md:text-xl font-bold text-center px-2",children:"æŠŠåƒåœ¾ä¸Ÿåˆ°æ­£ç¢ºçš„æ¡¶å­è£¡ï¼"}),e.jsxs("div",{className:"relative w-full max-w-xs sm:max-w-sm",children:[e.jsxs("div",{className:"bg-gray-300 h-20 sm:h-24 rounded-xl flex items-center justify-center border-4 border-gray-400",children:[e.jsx("div",{className:"absolute left-0 right-0 top-1/2 -translate-y-1/2 h-2 bg-gray-500 rounded-full mx-4"}),e.jsx(I,{mode:"wait",children:t&&!d&&e.jsx(C,{item:t,onSpeak:x},t.id+s)})]}),e.jsx("div",{className:"absolute left-2 right-2 -bottom-2 flex justify-between",children:[...Array(5)].map((a,y)=>e.jsx("div",{className:"w-3 h-4 bg-gray-500 rounded-b-full"},y))})]}),e.jsx("p",{className:"text-sm sm:text-base text-center opacity-80",children:"æ‹–æ›³åƒåœ¾åˆ°æ­£ç¢ºçš„å›æ”¶æ¡¶ï¼"}),e.jsx("div",{className:"flex gap-2 sm:gap-4 md:gap-6",children:A.map(a=>e.jsx(k,{bin:a,isHappy:d===a.id,isWrong:v===a.id},a.id))}),e.jsx("div",{className:"bg-white/40 px-3 sm:px-4 py-2 sm:py-3 rounded-xl text-xs sm:text-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 justify-center",children:[e.jsx("span",{children:"ğŸ—‘ï¸ å»šé¤˜/ä¸€èˆ¬"}),e.jsx("span",{children:"ğŸ“„ ç´™é¡"}),e.jsx("span",{children:"â™»ï¸ å¡‘è† "})]})})]})})})})}export{W as default};
