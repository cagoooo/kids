import{r as n,j as e}from"./index-0acVC73l.js";import{L as $,m as j}from"./Layout-CnW-AIkL.js";import{G as C}from"./GameShell-DGXxitKQ.js";import{e as O}from"./confetti.module-CqBEWjfj.js";import{D as R,u as T,a as k}from"./core.esm-CvUkMoDQ.js";import{u as v}from"./use-tts-BO0vnKcv.js";import"./use-scores-Lb6yIYb-.js";import"./input-C_teu3JR.js";const h=[{id:"happy",name:"é–‹å¿ƒ",weather:"â˜€ï¸",color:"hsl(var(--macaron-yellow))",face:"ðŸ˜Š"},{id:"sad",name:"é›£éŽ",weather:"ðŸŒ§ï¸",color:"hsl(var(--macaron-blue))",face:"ðŸ˜¢"},{id:"angry",name:"ç”Ÿæ°£",weather:"â›ˆï¸",color:"hsl(var(--macaron-pink))",face:"ðŸ˜ "},{id:"scared",name:"å®³æ€•",weather:"ðŸŒªï¸",color:"hsl(var(--macaron-purple))",face:"ðŸ˜¨"},{id:"surprised",name:"é©šè¨",weather:"ðŸŒˆ",color:"hsl(var(--macaron-green))",face:"ðŸ˜®"}],f=[{text:"å°æ˜Žæ”¶åˆ°ç”Ÿæ—¥ç¦®ç‰©",emotion:"happy"},{text:"å°ç¾Žçš„å†°æ·‡æ·‹æŽ‰åœ¨åœ°ä¸Šäº†",emotion:"sad"},{text:"æœ‰äººæ¶èµ°äº†å°è¯çš„çŽ©å…·",emotion:"angry"},{text:"å°èŠ³åœ¨é»‘é»‘çš„æˆ¿é–“è£¡è½åˆ°å¥‡æ€ªçš„è²éŸ³",emotion:"scared"},{text:"å°æ˜Žçªç„¶æ”¶åˆ°ä¸€å€‹é©šå–œæ´¾å°",emotion:"surprised"},{text:"åª½åª½ç­”æ‡‰å¸¶å°ç¾ŽåŽ»éŠæ¨‚åœ’çŽ©",emotion:"happy"},{text:"å°ç‹—è·‘ä¸è¦‹äº†ï¼Œæ‰¾ä¸åˆ°",emotion:"sad"},{text:"å¼Ÿå¼ŸæŠŠå§å§çš„ç•«æ’•ç ´äº†",emotion:"angry"},{text:"é›·è²è½Ÿéš†éš†çš„éŸ¿",emotion:"scared"},{text:"æœ‹å‹çªç„¶å¾žé–€å¾Œè·³å‡ºä¾†",emotion:"surprised"}];function G({emotion:t}){const{attributes:s,listeners:o,setNodeRef:l,transform:r,isDragging:m}=k({id:t.id}),{speak:x}=v(),i=r?{transform:`translate(${r.x}px, ${r.y}px)`,zIndex:m?100:1}:void 0;return e.jsxs(j.div,{ref:l,style:i,...o,...s,whileHover:{scale:1.1},className:"flex flex-col items-center gap-0.5 sm:gap-1 cursor-grab active:cursor-grabbing",onMouseEnter:()=>x(t.name),"data-testid":`emotion-${t.id}`,children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 md:w-20 md:h-20 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg border-2 sm:border-4 border-white",style:{backgroundColor:t.color},children:e.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl",children:t.weather})}),e.jsx("span",{className:"text-xs sm:text-sm font-bold",children:t.name})]})}function M({currentEmotion:t,isCorrect:s}){const{isOver:o,setNodeRef:l}=T({id:"face"}),r=h.find(m=>m.id===t);return e.jsx(j.div,{ref:l,animate:{scale:o?1.1:1,rotate:s===!1?[-5,5,-5,5,0]:0},className:`
        w-28 h-28 sm:w-36 sm:h-36 md:w-48 md:h-48 rounded-full bg-[hsl(var(--macaron-yellow)/0.3)] 
        flex items-center justify-center border-4 sm:border-6 md:border-8 border-white shadow-xl
        ${o?"ring-2 sm:ring-4 ring-white/50":""}
        ${s===!0?"ring-2 sm:ring-4 ring-green-400":""}
        ${s===!1?"ring-2 sm:ring-4 ring-red-400":""}
      `,"data-testid":"face-dropzone",children:t?e.jsx("span",{className:"text-5xl sm:text-7xl md:text-9xl",children:r?.face}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"text-4xl sm:text-5xl md:text-6xl mb-1 sm:mb-2",children:"ðŸ˜"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"æ‹–æ›³å¿ƒæƒ…åˆ°é€™è£¡"})]})})}function J(){const[t,s]=n.useState(0),[o,l]=n.useState(0),[r,m]=n.useState(f[0]),[x,i]=n.useState(null),[w,d]=n.useState(null),[y,g]=n.useState(!1),{speak:u}=v(),N=()=>{if(t>=10){g(!0);return}const a=f[Math.floor(Math.random()*f.length)];m(a),i(null),d(null),u(a.text)};n.useEffect(()=>{N()},[t]);const S=a=>{const{active:D,over:b}=a;if(!b||b.id!=="face")return;const p=D.id;if(i(p),p===r.emotion){d(!0),O({particleCount:40,spread:60});const I=h.find(c=>c.id===p);u(`ç­”å°äº†ï¼é€™æ™‚å€™æœƒæ„Ÿåˆ°${I?.name}ï¼`),l(c=>c+10),setTimeout(()=>s(c=>c+1),1500)}else d(!1),u("æƒ³ä¸€æƒ³ï¼Œé€™æ™‚å€™æœƒæœ‰ä»€éº¼æ„Ÿè¦ºå‘¢ï¼Ÿ"),setTimeout(()=>{i(null),d(null)},1e3)},E=()=>{s(0),l(0),g(!1)};return e.jsx($,{children:e.jsx(C,{title:"å¿ƒæƒ…æ°£è±¡å°",score:o,totalQuestions:10,currentQuestionIndex:t,gameType:"emotion",isGameOver:y,onRestart:E,colorClass:"bg-[hsl(var(--macaron-purple))] text-[hsl(var(--macaron-purple-dark))]",children:e.jsx(R,{onDragEnd:S,children:e.jsxs("div",{className:"flex flex-col items-center gap-3 sm:gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white/40 px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl max-w-md mx-2",children:[e.jsx("h3",{className:"font-display text-base sm:text-lg md:text-2xl font-bold text-center",children:r.text}),e.jsx("p",{className:"text-center text-xs sm:text-sm opacity-70 mt-1 sm:mt-2",children:"é€™æ™‚å€™æœƒæœ‰ä»€éº¼å¿ƒæƒ…å‘¢ï¼Ÿ"})]}),e.jsx(M,{currentEmotion:x,isCorrect:w}),e.jsx("div",{className:"flex gap-2 sm:gap-3 md:gap-4 flex-wrap justify-center mt-2 sm:mt-4 px-2",children:h.map(a=>e.jsx(G,{emotion:a},a.id))})]})})})})}export{J as default};
