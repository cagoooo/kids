import{r as s,j as t}from"./index-BAFbHnVU.js";import{L as $,A as P,m as u}from"./Layout-DFwKD3LY.js";import{G as k,c as E}from"./GameShell-umGkXZuk.js";import{u as A}from"./use-tts-CT6lh570.js";import{S as L}from"./sparkles-Cxz-GXdc.js";import"./use-scores-DiF6HJ8X.js";import"./useQuery-_qmAEel5.js";import"./dialog-CWCHvEy3.js";import"./input-DK6-qLvW.js";const y=[{id:"sunflower",name:"å‘æ—¥è‘µ",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒ»"},{id:"tulip",name:"é¬±é‡‘é¦™",seed:"ðŸ«˜",sprout:"ðŸŒ±",flower:"ðŸŒ·"},{id:"rose",name:"çŽ«ç‘°",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒ¹"},{id:"cherry",name:"æ«»èŠ±",seed:"ðŸ«˜",sprout:"ðŸŒ±",flower:"ðŸŒ¸"},{id:"hibiscus",name:"æœ¨æ§¿èŠ±",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒº"}],n=[{id:"seed",name:"ç¨®ç¨®å­",icon:"ðŸŒ°",action:"é¸æ“‡ç¨®å­"},{id:"water",name:"æ¾†æ°´",icon:"ðŸ’§",action:"å¹«æ¤ç‰©æ¾†æ°´"},{id:"sun",name:"æ›¬å¤ªé™½",icon:"â˜€ï¸",action:"è®“æ¤ç‰©æ›¬å¤ªé™½"},{id:"fertilize",name:"æ–½è‚¥",icon:"âœ¨",action:"çµ¦æ¤ç‰©æ–½è‚¥"}];function I(){const[c,g]=s.useState(0),[v,b]=s.useState(0),[i,N]=s.useState(null),[x,p]=s.useState([]),[o,h]=s.useState(0),[m,d]=s.useState("empty"),[j,f]=s.useState(!1),[C,S]=s.useState(!1),{speak:l}=A();s.useEffect(()=>{if(c>=10){S(!0);return}const e=y[c%y.length];N(e),p([]),h(0),d("empty"),f(!1),l(`è®“æˆ‘å€‘ç¨®ä¸€æœµ${e.name}å§ï¼`)},[c]);const G=e=>{if(!i)return;const a=n[o].id;if(e===a){const w=[...x,e];p(w),e==="seed"?(d("seed"),l("ç¨®å­ç¨®å¥½äº†ï¼")):e==="water"?l("æ¾†æ°´å®Œæˆï¼"):e==="sun"?(d("sprout"),l("æ¤ç‰©ç™¼èŠ½äº†ï¼")):e==="fertilize"&&(l(`å“‡ï¼${i.name}é–‹èŠ±äº†ï¼`),d("flower"),f(!0),E({particleCount:100,spread:70,origin:{y:.6}}),b(r=>r+10),setTimeout(()=>{g(r=>r+1)},2e3)),h(r=>r+1)}else l("é †åºä¸å°å–”ï¼Œå†è©¦è©¦çœ‹ï¼")},T=()=>{g(0),b(0),S(!1),p([]),h(0),d("empty"),f(!1)};return t.jsx($,{children:t.jsx(k,{title:"ç¥žå¥‡æ¤ç‰©åœ’",score:v,totalQuestions:10,currentQuestionIndex:c,gameType:"garden",isGameOver:C,onRestart:T,colorClass:"bg-[hsl(var(--macaron-green))] text-[hsl(var(--macaron-green-dark))]",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6",children:[t.jsxs("h3",{className:"font-display text-base sm:text-lg md:text-xl font-bold text-center px-2",children:["æŒ‰ç…§é †åºç¨®",i?.name||"æ¤ç‰©","ï¼"]}),t.jsx("div",{className:"flex gap-1 sm:gap-2 items-center",children:n.map((e,a)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`
                    w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-base sm:text-lg
                    transition-all ${x.includes(e.id)?"bg-green-400 text-white":a===o?"bg-white border-2 border-green-400 animate-pulse":"bg-white/50"}
                  `,children:e.icon}),a<n.length-1&&t.jsx("div",{className:`w-4 sm:w-6 h-1 ${x.includes(e.id)?"bg-green-400":"bg-white/30"}`})]},e.id))}),t.jsxs("div",{className:"relative w-48 h-48 sm:w-56 sm:h-56 md:w-64 md:h-64",children:[t.jsxs("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-32 sm:w-40 h-20 sm:h-24 bg-amber-600 rounded-b-3xl border-4 border-amber-700",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-4 bg-amber-700 rounded-t-lg"}),t.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 w-24 sm:w-32 h-8 sm:h-10 bg-amber-900 rounded-full opacity-50"})]}),t.jsx(P,{mode:"wait",children:m!=="empty"&&t.jsxs(u.div,{initial:{scale:0,y:20},animate:{scale:1,y:0},exit:{scale:0},className:"absolute bottom-16 sm:bottom-20 left-1/2 -translate-x-1/2 text-5xl sm:text-6xl md:text-7xl",children:[m==="seed"&&i?.seed,m==="sprout"&&i?.sprout,m==="flower"&&t.jsx(u.span,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:.5,repeat:2},children:i?.flower})]},m)}),j&&t.jsx(u.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute top-8 left-1/2 -translate-x-1/2",children:t.jsx(L,{className:"w-8 h-8 text-yellow-400"})})]}),t.jsx("div",{className:"flex gap-2 sm:gap-3 flex-wrap justify-center",children:n.map(e=>{const a=x.includes(e.id),w=o===n.findIndex(r=>r.id===e.id);return t.jsxs(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>G(e.id),disabled:a||j,className:`
                    px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl sm:rounded-2xl font-bold text-sm sm:text-base
                    shadow-lg border-2 border-white/50 flex items-center gap-1 sm:gap-2
                    transition-all min-w-[80px] sm:min-w-[100px] justify-center
                    ${a?"bg-gray-300 text-gray-500":w?"bg-[hsl(var(--macaron-green))] text-white ring-2 ring-white animate-pulse":"bg-white/80 text-gray-700"}
                    disabled:cursor-not-allowed
                  `,"data-testid":`step-${e.id}`,children:[t.jsx("span",{className:"text-lg sm:text-xl",children:e.icon}),t.jsx("span",{className:"hidden sm:inline",children:e.name})]},e.id)})}),t.jsx("div",{className:"bg-white/40 px-4 py-2 rounded-full text-sm sm:text-base font-medium",children:o<n.length?`ä¸‹ä¸€æ­¥ï¼š${n[o].action}`:"å®Œæˆï¼ç­‰å¾…é–‹èŠ±..."})]})})})}export{I as default};
