import{c as L,r as s,j as t}from"./index-n-EY8GTy.js";import{L as T,A as $,m as u}from"./Layout-D_yaY9ik.js";import{G as A,c as M}from"./GameShell-BlSRuUtV.js";import{u as P}from"./use-tts-DPGGw7V0.js";import"./use-scores-BVyad7jY.js";import"./useQuery-Bqjn5xqP.js";import"./dialog-C1f_E0fV.js";import"./input-CAKYNKOk.js";const z=L("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),S=[{id:"sunflower",name:"å‘æ—¥è‘µ",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒ»"},{id:"tulip",name:"é¬±é‡‘é¦™",seed:"ðŸ«˜",sprout:"ðŸŒ±",flower:"ðŸŒ·"},{id:"rose",name:"çŽ«ç‘°",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒ¹"},{id:"cherry",name:"æ«»èŠ±",seed:"ðŸ«˜",sprout:"ðŸŒ±",flower:"ðŸŒ¸"},{id:"hibiscus",name:"æœ¨æ§¿èŠ±",seed:"ðŸŒ°",sprout:"ðŸŒ±",flower:"ðŸŒº"}],r=[{id:"seed",name:"ç¨®ç¨®å­",icon:"ðŸŒ°",action:"é¸æ“‡ç¨®å­"},{id:"water",name:"æ¾†æ°´",icon:"ðŸ’§",action:"å¹«æ¤ç‰©æ¾†æ°´"},{id:"sun",name:"æ›¬å¤ªé™½",icon:"â˜€ï¸",action:"è®“æ¤ç‰©æ›¬å¤ªé™½"},{id:"fertilize",name:"æ–½è‚¥",icon:"âœ¨",action:"çµ¦æ¤ç‰©æ–½è‚¥"}];function B(){const[c,w]=s.useState(0),[v,b]=s.useState(0),[i,N]=s.useState(null),[x,p]=s.useState([]),[o,h]=s.useState(0),[d,m]=s.useState("empty"),[y,f]=s.useState(!1),[k,j]=s.useState(!1),{speak:l}=P();s.useEffect(()=>{if(c>=10){j(!0);return}const e=S[c%S.length];N(e),p([]),h(0),m("empty"),f(!1),l(`è®“æˆ‘å€‘ç¨®ä¸€æœµ${e.name}å§ï¼`)},[c]);const C=e=>{if(!i)return;const a=r[o].id;if(e===a){const g=[...x,e];p(g),e==="seed"?(m("seed"),l("ç¨®å­ç¨®å¥½äº†ï¼")):e==="water"?l("æ¾†æ°´å®Œæˆï¼"):e==="sun"?(m("sprout"),l("æ¤ç‰©ç™¼èŠ½äº†ï¼")):e==="fertilize"&&(l(`å“‡ï¼${i.name}é–‹èŠ±äº†ï¼`),m("flower"),f(!0),M({particleCount:100,spread:70,origin:{y:.6}}),b(n=>n+10),setTimeout(()=>{w(n=>n+1)},2e3)),h(n=>n+1)}else l("é †åºä¸å°å–”ï¼Œå†è©¦è©¦çœ‹ï¼")},G=()=>{w(0),b(0),j(!1),p([]),h(0),m("empty"),f(!1)};return t.jsx(T,{children:t.jsx(A,{title:"ç¥žå¥‡æ¤ç‰©åœ’",score:v,totalQuestions:10,currentQuestionIndex:c,gameType:"garden",isGameOver:k,onRestart:G,colorClass:"bg-[hsl(var(--macaron-green))] text-[hsl(var(--macaron-green-dark))]",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6",children:[t.jsxs("h3",{className:"font-display text-base sm:text-lg md:text-xl font-bold text-center px-2",children:["æŒ‰ç…§é †åºç¨®",i?.name||"æ¤ç‰©","ï¼"]}),t.jsx("div",{className:"flex gap-1 sm:gap-2 items-center",children:r.map((e,a)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`
                    w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-base sm:text-lg
                    transition-all ${x.includes(e.id)?"bg-green-400 text-white":a===o?"bg-white border-2 border-green-400 animate-pulse":"bg-white/50"}
                  `,children:e.icon}),a<r.length-1&&t.jsx("div",{className:`w-4 sm:w-6 h-1 ${x.includes(e.id)?"bg-green-400":"bg-white/30"}`})]},e.id))}),t.jsxs("div",{className:"relative w-48 h-48 sm:w-56 sm:h-56 md:w-64 md:h-64",children:[t.jsxs("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-32 sm:w-40 h-20 sm:h-24 bg-amber-600 rounded-b-3xl border-4 border-amber-700",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 h-4 bg-amber-700 rounded-t-lg"}),t.jsx("div",{className:"absolute top-6 left-1/2 -translate-x-1/2 w-24 sm:w-32 h-8 sm:h-10 bg-amber-900 rounded-full opacity-50"})]}),t.jsx($,{mode:"wait",children:d!=="empty"&&t.jsxs(u.div,{initial:{scale:0,y:20},animate:{scale:1,y:0},exit:{scale:0},className:"absolute bottom-16 sm:bottom-20 left-1/2 -translate-x-1/2 text-5xl sm:text-6xl md:text-7xl",children:[d==="seed"&&i?.seed,d==="sprout"&&i?.sprout,d==="flower"&&t.jsx(u.span,{animate:{scale:[1,1.2,1],rotate:[0,5,-5,0]},transition:{duration:.5,repeat:2},children:i?.flower})]},d)}),y&&t.jsx(u.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute top-8 left-1/2 -translate-x-1/2",children:t.jsx(z,{className:"w-8 h-8 text-yellow-400"})})]}),t.jsx("div",{className:"flex gap-2 sm:gap-3 flex-wrap justify-center",children:r.map(e=>{const a=x.includes(e.id),g=o===r.findIndex(n=>n.id===e.id);return t.jsxs(u.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(e.id),disabled:a||y,className:`
                    px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl sm:rounded-2xl font-bold text-sm sm:text-base
                    shadow-lg border-2 border-white/50 flex items-center gap-1 sm:gap-2
                    transition-all min-w-[80px] sm:min-w-[100px] justify-center
                    ${a?"bg-gray-300 text-gray-500":g?"bg-[hsl(var(--macaron-green))] text-white ring-2 ring-white animate-pulse":"bg-white/80 text-gray-700"}
                    disabled:cursor-not-allowed
                  `,"data-testid":`step-${e.id}`,children:[t.jsx("span",{className:"text-lg sm:text-xl",children:e.icon}),t.jsx("span",{className:"hidden sm:inline",children:e.name})]},e.id)})}),t.jsx("div",{className:"bg-white/40 px-4 py-2 rounded-full text-sm sm:text-base font-medium",children:o<r.length?`ä¸‹ä¸€æ­¥ï¼š${r[o].action}`:"å®Œæˆï¼ç­‰å¾…é–‹èŠ±..."})]})})})}export{B as default};
