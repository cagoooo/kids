import{r as c}from"./index-CD2wNbFC.js";let s=null;function t(){if(!("speechSynthesis"in window))return null;const r=window.speechSynthesis.getVoices(),i=[e=>e.lang==="zh-TW"&&e.name.includes("Mei-Jia"),e=>e.lang==="zh-TW"&&e.name.includes("Ting-Ting"),e=>e.lang==="zh-TW",e=>e.lang==="zh_TW",e=>e.lang.startsWith("zh-TW"),e=>e.lang.includes("TW"),e=>e.lang.startsWith("zh-"),e=>e.lang.startsWith("zh_"),e=>e.lang.includes("zh")];for(const e of i){const n=r.find(e);if(n)return n}return null}typeof window<"u"&&"speechSynthesis"in window&&(window.speechSynthesis.addEventListener("voiceschanged",()=>{s=t()}),s=t());function h(){return{speak:c.useCallback(i=>{if(typeof window>"u"||!("speechSynthesis"in window)){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(i);e.lang="zh-TW",e.rate=.85,e.pitch=1,e.volume=1,s||(s=t()),s&&(e.voice=s),e.onerror=n=>{n.error==="interrupted"||n.error==="canceled"||console.error("Speech synthesis error:",n)},window.speechSynthesis.speak(e)}catch(e){console.error("Speech synthesis failed:",e)}},[])}}export{h as u};
