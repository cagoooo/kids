import{h as p,r as c,j as e}from"./index-0acVC73l.js";import{L as x,m as i}from"./Layout-CnW-AIkL.js";import{G as m}from"./GameShell-DGXxitKQ.js";import{S as o}from"./SpeakableOption-D-x3Zjdt.js";import{e as f}from"./confetti.module-CqBEWjfj.js";import{A as h}from"./apple-WPCzydtl.js";import"./use-scores-Lb6yIYb-.js";import"./input-C_teu3JR.js";import"./use-tts-BO0vnKcv.js";function Q(){const{state:t,startChallenge:r,answerQuestion:l}=p(),[s,a]=c.useState(!1);c.useEffect(()=>{!t.isStarted&&!t.isCompleted&&r()},[t.isStarted,t.isCompleted]);const n=t.questions[t.currentIndex],d=u=>{u?(f({particleCount:30,spread:50,colors:["#FFD700"]}),setTimeout(()=>l(!0),500)):(a(!0),setTimeout(()=>a(!1),500))};return t.isCompleted?e.jsx(x,{children:e.jsx(m,{title:"每日挑戰",score:t.score,totalQuestions:5,currentQuestionIndex:5,gameType:"math",isGameOver:!0,onRestart:()=>{},colorClass:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"挑戰完成！"}),e.jsx("p",{className:"text-xl",children:"明天再來玩喔！"})]})})}):n?e.jsx(x,{children:e.jsx(m,{title:"每日挑戰",score:t.score,totalQuestions:5,currentQuestionIndex:t.currentIndex,gameType:"math",isGameOver:!1,onRestart:()=>{},colorClass:"bg-[hsl(var(--macaron-purple))] text-[hsl(var(--macaron-purple-dark))]",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl mx-auto",children:[n.type==="math"&&e.jsx(j,{problem:n.data,onAnswer:d,shake:s}),n.type==="color"&&e.jsx(g,{problem:n.data,onAnswer:d,shake:s}),n.type==="english"&&e.jsx(w,{problem:n.data,onAnswer:d,shake:s})]})})}):null}function j({problem:t,onAnswer:r,shake:l}){return e.jsxs(e.Fragment,{children:[t.op==="+"&&t.a+t.b<=10&&e.jsxs("div",{className:"flex gap-4 items-center bg-white/30 p-3 rounded-2xl",children:[e.jsx("div",{className:"flex gap-1",children:Array.from({length:t.a}).map((s,a)=>e.jsx(h,{className:"w-6 h-6 fill-red-400 text-red-600"},`a-${a}`))}),e.jsx("div",{className:"text-2xl font-black",children:"+"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:t.b}).map((s,a)=>e.jsx(h,{className:"w-6 h-6 fill-red-400 text-red-600"},`b-${a}`))})]}),e.jsx(i.div,{animate:{x:l?[-10,10,-10,10,0]:0},className:"bg-white/80 backdrop-blur-md px-12 py-8 rounded-[2rem] shadow-lg",children:e.jsxs("span",{className:"font-display text-6xl font-black tracking-wider text-[hsl(var(--macaron-purple-dark))]",children:[t.a," ",t.op," ",t.b," = ?"]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4 w-full mt-4",children:t.options.map((s,a)=>e.jsx(o,{speakText:String(s),onSelect:()=>r(s===t.ans),className:"btn-macaron bg-white text-3xl py-6 rounded-2xl text-[hsl(var(--macaron-purple-dark))]",children:s},a))})]})}function g({problem:t,onAnswer:r,shake:l}){return e.jsxs(e.Fragment,{children:[e.jsx(i.div,{animate:{scale:[.9,1.1,1],rotate:l?[-5,5,-5,5,0]:0},className:"w-48 h-48 rounded-[2rem] shadow-2xl border-8 border-white",style:{backgroundColor:t.target.hex}}),e.jsx("h3",{className:"font-display text-2xl font-bold",children:"這是什麼顏色？"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 w-full mt-2",children:t.options.map((s,a)=>e.jsx(o,{speakText:s.name,onSelect:()=>r(s.id===t.target.id),className:"btn-macaron bg-white text-xl py-4 rounded-2xl text-[hsl(var(--macaron-purple-dark))]",children:s.name},a))})]})}function w({problem:t,onAnswer:r,shake:l}){return e.jsxs(e.Fragment,{children:[e.jsx(i.div,{animate:{rotate:l?[-5,5,-5,5,0]:0},className:"bg-white/80 backdrop-blur-md p-8 rounded-full shadow-lg w-48 h-48 flex items-center justify-center border-8 border-white",children:t.mode==="emoji-to-word"?e.jsx("span",{className:"text-8xl filter drop-shadow-md",children:t.target.emoji}):e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"font-display text-3xl font-bold block",children:t.target.word}),e.jsxs("span",{className:"text-xl text-muted-foreground",children:["(",t.target.chinese,")"]})]})}),e.jsx("h3",{className:"font-display text-2xl font-bold",children:t.mode==="emoji-to-word"?"這是什麼？":"選出正確的圖案！"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 w-full mt-2",children:t.options.map((s,a)=>e.jsx(o,{speakText:t.mode==="emoji-to-word"?`${s.word}，${s.chinese}`:s.chinese,onSelect:()=>r(s.word===t.target.word),className:"btn-macaron bg-white py-4 rounded-2xl text-[hsl(var(--macaron-purple-dark))]",children:t.mode==="emoji-to-word"?e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-xl font-bold font-display block",children:s.word}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",s.chinese,")"]})]}):e.jsx("span",{className:"text-5xl",children:s.emoji})},a))})]})}export{Q as default};
