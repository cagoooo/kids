import{r,j as s,g as j}from"./index-0acVC73l.js";import{L as v,m as y}from"./Layout-CnW-AIkL.js";import{G as S}from"./GameShell-DGXxitKQ.js";import{e as k}from"./confetti.module-CqBEWjfj.js";import{S as N}from"./SpeakableOption-D-x3Zjdt.js";import{A as p}from"./apple-WPCzydtl.js";import"./use-scores-Lb6yIYb-.js";import"./input-C_teu3JR.js";import"./use-tts-BO0vnKcv.js";function $(){const[m,l]=r.useState(0),[i,o]=r.useState(0),[t,c]=r.useState({a:0,b:0,op:"+",ans:0}),[u,h]=r.useState([]),[f,n]=r.useState(!1),[b,d]=r.useState(!1),x=()=>{if(m>=10){n(!0);return}const e=j();c({a:e.a,b:e.b,op:e.op,ans:e.ans}),h(e.options)};r.useEffect(()=>{x()},[m]);const g=e=>{e===t.ans?(k({particleCount:30,spread:50,colors:["#4D96FF"]}),o(a=>a+10),setTimeout(()=>l(a=>a+1),500)):(d(!0),setTimeout(()=>d(!1),500))},w=()=>{l(0),o(0),n(!1),x()};return s.jsx(v,{children:s.jsx(S,{title:"數學樂園",score:i,totalQuestions:10,currentQuestionIndex:m,gameType:"math",isGameOver:f,onRestart:w,colorClass:"bg-[hsl(var(--macaron-blue))] text-[hsl(var(--macaron-blue-dark))]",children:s.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:gap-8",children:[t.op==="+"&&t.a+t.b<=10&&s.jsxs("div",{className:"flex gap-4 sm:gap-6 md:gap-8 items-center bg-white/30 p-3 sm:p-4 rounded-2xl md:rounded-3xl",children:[s.jsx("div",{className:"flex gap-0.5 sm:gap-1 flex-wrap justify-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px]",children:Array.from({length:t.a}).map((e,a)=>s.jsx(p,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 fill-red-400 text-red-600"},`a-${a}`))}),s.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-black",children:"+"}),s.jsx("div",{className:"flex gap-0.5 sm:gap-1 flex-wrap justify-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px]",children:Array.from({length:t.b}).map((e,a)=>s.jsx(p,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 fill-red-400 text-red-600"},`b-${a}`))})]}),s.jsx(y.div,{animate:{x:b?[-10,10,-10,10,0]:0},className:"bg-white/80 backdrop-blur-md px-6 py-4 sm:px-8 sm:py-6 md:px-12 md:py-8 rounded-xl sm:rounded-2xl md:rounded-[2rem] shadow-lg border-b-4 md:border-b-8 border-black/5",children:s.jsxs("span",{className:"font-display text-4xl sm:text-5xl md:text-7xl font-black tracking-wider text-[hsl(var(--macaron-blue-dark))]",children:[t.a," ",t.op," ",t.b," = ?"]})}),s.jsx("div",{className:"grid grid-cols-2 gap-4 sm:gap-5 md:gap-6 w-full max-w-lg mt-4 sm:mt-6 px-2",children:u.map((e,a)=>s.jsx(N,{speakText:String(e),onSelect:()=>g(e),className:"btn-macaron bg-white text-2xl sm:text-3xl md:text-4xl py-4 sm:py-6 md:py-8 rounded-xl md:rounded-2xl text-[hsl(var(--macaron-blue-dark))] hover:bg-white/90","data-testid":`button-math-${e}`,children:e},a))})]})})})}export{$ as default};
