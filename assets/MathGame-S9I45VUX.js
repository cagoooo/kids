import{r as l,j as a}from"./index-n-EY8GTy.js";import{L as j,m as v}from"./Layout-D_yaY9ik.js";import{G as y,c as M}from"./GameShell-BlSRuUtV.js";import{S}from"./SpeakableOption-DNVqkCdl.js";import{A as u}from"./apple-uRo6sh9H.js";import"./use-scores-BVyad7jY.js";import"./useQuery-Bqjn5xqP.js";import"./dialog-C1f_E0fV.js";import"./input-CAKYNKOk.js";import"./use-tts-DPGGw7V0.js";function k(){const d=Math.random()>.3;let o,m,s,t;d?(o=Math.floor(Math.random()*10)+1,m=Math.floor(Math.random()*10)+1,s=o+m,t="+"):(o=Math.floor(Math.random()*10)+5,m=Math.floor(Math.random()*5)+1,s=o-m,t="-");const n=new Set;for(n.add(s);n.size<4;){const x=s+Math.floor(Math.random()*6)-3;x>=0&&x!==s&&n.add(x)}const i=Array.from(n).sort(()=>.5-Math.random());return{a:o,b:m,op:t,ans:s,options:i}}function $(){const[d,o]=l.useState(0),[m,s]=l.useState(0),[t,n]=l.useState({a:0,b:0,op:"+",ans:0}),[i,x]=l.useState([]),[f,p]=l.useState(!1),[b,c]=l.useState(!1),h=()=>{if(d>=10){p(!0);return}const e=k();n({a:e.a,b:e.b,op:e.op,ans:e.ans}),x(e.options)};l.useEffect(()=>{h()},[d]);const g=e=>{e===t.ans?(M({particleCount:30,spread:50,colors:["#4D96FF"]}),s(r=>r+10),setTimeout(()=>o(r=>r+1),500)):(c(!0),setTimeout(()=>c(!1),500))},w=()=>{o(0),s(0),p(!1),h()};return a.jsx(j,{children:a.jsx(y,{title:"數學樂園",score:m,totalQuestions:10,currentQuestionIndex:d,gameType:"math",isGameOver:f,onRestart:w,colorClass:"bg-[hsl(var(--macaron-blue))] text-[hsl(var(--macaron-blue-dark))]",children:a.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:gap-8",children:[t.op==="+"&&t.a+t.b<=10&&a.jsxs("div",{className:"flex gap-4 sm:gap-6 md:gap-8 items-center bg-white/30 p-3 sm:p-4 rounded-2xl md:rounded-3xl",children:[a.jsx("div",{className:"flex gap-0.5 sm:gap-1 flex-wrap justify-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px]",children:Array.from({length:t.a}).map((e,r)=>a.jsx(u,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 fill-red-400 text-red-600"},`a-${r}`))}),a.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-black",children:"+"}),a.jsx("div",{className:"flex gap-0.5 sm:gap-1 flex-wrap justify-center max-w-[80px] sm:max-w-[100px] md:max-w-[120px]",children:Array.from({length:t.b}).map((e,r)=>a.jsx(u,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 fill-red-400 text-red-600"},`b-${r}`))})]}),a.jsx(v.div,{animate:{x:b?[-10,10,-10,10,0]:0},className:"bg-white/80 backdrop-blur-md px-6 py-4 sm:px-8 sm:py-6 md:px-12 md:py-8 rounded-xl sm:rounded-2xl md:rounded-[2rem] shadow-lg border-b-4 md:border-b-8 border-black/5",children:a.jsxs("span",{className:"font-display text-4xl sm:text-5xl md:text-7xl font-black tracking-wider text-[hsl(var(--macaron-blue-dark))]",children:[t.a," ",t.op," ",t.b," = ?"]})}),a.jsx("div",{className:"grid grid-cols-2 gap-4 sm:gap-5 md:gap-6 w-full max-w-lg mt-4 sm:mt-6 px-2",children:i.map((e,r)=>a.jsx(S,{speakText:String(e),onSelect:()=>g(e),className:"btn-macaron bg-white text-2xl sm:text-3xl md:text-4xl py-4 sm:py-6 md:py-8 rounded-xl md:rounded-2xl text-[hsl(var(--macaron-blue-dark))] hover:bg-white/90","data-testid":`button-math-${e}`,children:e},r))})]})})})}export{$ as default};
