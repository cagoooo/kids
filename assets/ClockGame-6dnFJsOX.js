import{r,j as e}from"./index-BKJHQ17t.js";import{L as j,m as k}from"./Layout-BFBCft2f.js";import{G as v}from"./GameShell-pzdoMRQP.js";import{e as b}from"./confetti.module-DX_nmocB.js";import{u as C}from"./use-tts-BEkRPK4K.js";import"./use-scores-BjM8I7zW.js";import"./input-BcmEp2LU.js";import"./arrow-left-5wR0mXsk.js";import"./gift-Dd5BrYTn.js";const f=[{hour:1,display:"1 點鐘",scenario:"早起運動"},{hour:2,display:"2 點鐘",scenario:"午睡時間"},{hour:3,display:"3 點鐘",scenario:"下午點心"},{hour:4,display:"4 點鐘",scenario:"放學回家"},{hour:5,display:"5 點鐘",scenario:"準備晚餐"},{hour:6,display:"6 點鐘",scenario:"吃晚餐"},{hour:7,display:"7 點鐘",scenario:"寫功課"},{hour:8,display:"8 點鐘",scenario:"準備睡覺"},{hour:9,display:"9 點鐘",scenario:"說晚安"},{hour:10,display:"10 點鐘",scenario:"甜甜入睡"},{hour:11,display:"11 點鐘",scenario:"深夜時分"},{hour:12,display:"12 點鐘",scenario:"中午吃飯"}];function S({hour:h,onHourChange:d,interactive:y=!0}){const o=h%12*30-90,u=n=>{if(!y||!d)return;const t=n.currentTarget.getBoundingClientRect(),m=t.width/2,c=t.height/2,x=n.clientX-t.left-m,i=n.clientY-t.top-c;let s=Math.atan2(i,x)*(180/Math.PI)+90;s<0&&(s+=360);const p=Math.round(s/30)||12;d(p)};return e.jsxs("svg",{viewBox:"0 0 200 200",className:`w-56 h-56 md:w-72 md:h-72 ${y?"cursor-pointer":""}`,onClick:u,children:[e.jsx("circle",{cx:"100",cy:"100",r:"95",fill:"white",stroke:"hsl(var(--macaron-blue))",strokeWidth:"8"}),[...Array(12)].map((n,a)=>{const t=(a*30-90)*(Math.PI/180),m=100+75*Math.cos(t),c=100+75*Math.sin(t),x=100+85*Math.cos(t),i=100+85*Math.sin(t),s=100+65*Math.cos(t),p=100+65*Math.sin(t);return e.jsxs("g",{children:[e.jsx("line",{x1:m,y1:c,x2:x,y2:i,stroke:"hsl(var(--macaron-purple-dark))",strokeWidth:"3"}),e.jsx("text",{x:s,y:p,textAnchor:"middle",dominantBaseline:"middle",fontSize:"16",fontWeight:"bold",fill:"hsl(var(--macaron-purple-dark))",children:a===0?12:a})]},a)}),e.jsx("circle",{cx:"100",cy:"100",r:"8",fill:"hsl(var(--macaron-pink))"}),e.jsx(k.line,{x1:"100",y1:"100",x2:100+50*Math.cos(o*Math.PI/180),y2:100+50*Math.sin(o*Math.PI/180),stroke:"hsl(var(--macaron-pink))",strokeWidth:"8",strokeLinecap:"round",animate:{x2:100+50*Math.cos(o*Math.PI/180),y2:100+50*Math.sin(o*Math.PI/180)},transition:{type:"spring",stiffness:100}}),e.jsx("line",{x1:"100",y1:"100",x2:"100",y2:"30",stroke:"hsl(var(--macaron-blue))",strokeWidth:"4",strokeLinecap:"round"})]})}function H(){const[h,d]=r.useState(0),[y,o]=r.useState(0),[u,n]=r.useState(f[0]),[a,t]=r.useState(12),[m,c]=r.useState(!1),[x,i]=r.useState(!1),{speak:s}=C(),p=()=>{if(h>=10){c(!0);return}const l=f[Math.floor(Math.random()*f.length)];n(l),t(12),s(`請把時鐘撥到 ${l.display}`)};r.useEffect(()=>{p()},[h]);const g=()=>{a===u.hour?(b({particleCount:40,spread:60,colors:["#87CEEB","#FFC0CB"]}),s("答對了！"),o(l=>l+10),setTimeout(()=>d(l=>l+1),800)):(s("再試試看！"),i(!0),setTimeout(()=>i(!1),500))},M=()=>{d(0),o(0),c(!1)};return e.jsx(j,{children:e.jsx(v,{title:"時鐘小管家",score:y,totalQuestions:10,currentQuestionIndex:h,gameType:"clock",isGameOver:m,onRestart:M,colorClass:"bg-[hsl(var(--macaron-blue))] text-[hsl(var(--macaron-blue-dark))]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-white/40 px-4 sm:px-6 py-2 sm:py-3 rounded-xl sm:rounded-2xl",children:[e.jsxs("h3",{className:"font-display text-xl sm:text-2xl font-bold text-center",children:["現在是 ",u.display]}),e.jsx("p",{className:"text-center text-base sm:text-lg opacity-80",children:u.scenario})]}),e.jsx(k.div,{animate:{rotate:x?[-5,5,-5,5,0]:0},className:"bg-white/20 p-2 sm:p-4 rounded-full",children:e.jsx(S,{hour:a,onHourChange:t,interactive:!0})}),e.jsx("p",{className:"text-base sm:text-lg font-medium opacity-80 text-center px-4",children:"點擊時鐘上的數字來調整時間"}),e.jsx(k.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:g,className:"bg-white text-[hsl(var(--macaron-blue-dark))] font-bold text-lg sm:text-xl px-6 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-2xl shadow-lg","data-testid":"button-check",children:"確認答案"})]})})})}export{H as default};
