import{k as L,l as O,u as R,r as n,j as e,L as $,B as i}from"./index-BKJHQ17t.js";import{L as E,S as d,m}from"./Layout-BFBCft2f.js";import{D as h,a as p,b as M,c as H,d as _,e as P}from"./confetti.module-DX_nmocB.js";import{A as U}from"./arrow-left-5wR0mXsk.js";import{C as z}from"./check-CBJjOCOT.js";const F=[{id:"robot",icon:"ðŸ¤–",name:"æ©Ÿå™¨äºº",price:200},{id:"wizard",icon:"ðŸ§™â€â™‚ï¸",name:"å¤§é­”æ³•å¸«",price:200},{id:"ninja",icon:"ðŸ¥·",name:"å¿è€…",price:200},{id:"alien",icon:"ðŸ‘½",name:"å¤–æ˜Ÿäºº",price:300},{id:"dinosaur",icon:"ðŸ¦–",name:"å¤§æé¾",price:300},{id:"unicorn_avatar",icon:"ðŸ¦„",name:"ç¨è§’ç¸",price:500}],K=[{id:"avatar",label:"é€ åž‹é ­åƒ"},{id:"sticker",label:"é©šå–œå¡åŒ…"}];function X(){const{profile:r,spendCoins:j,unlockAvatar:y}=L(),{unlockSticker:w,collectedStickers:V,STICKERS:g}=O(),{playClick:N,playCorrect:k,playHover:v}=R(),[l,S]=n.useState("avatar"),[s,C]=n.useState(null),[A,c]=n.useState(!1),[u,a]=n.useState(!1),[x,B]=n.useState(null),b=t=>{N(),C(t),c(!0)},D=()=>{if(s)if(j(s.price)){if(k(),c(!1),l==="avatar")y(s.icon),a(!0);else if(l==="sticker"){const t=I();w(t.id),B(t),a(!0)}P({particleCount:100,spread:70,origin:{y:.6}})}else alert("é‡‘å¹£ä¸è¶³å–”ï¼å†å¤šçŽ©å¹¾å€‹éŠæˆ²å§ï¼")},I=()=>{const t=Math.floor(Math.random()*g.length);return g[t]},T="/kids/".replace(/\/$/,"");return e.jsxs(E,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx($,{href:T+"/",children:e.jsxs(i,{variant:"ghost",className:"rounded-xl hover:bg-white/50",children:[e.jsx(U,{className:"w-6 h-6 mr-2"}),"è¿”å›žé¦–é "]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-400 text-yellow-900 px-6 py-3 rounded-2xl font-black text-2xl shadow-lg border-4 border-white",children:[e.jsx(d,{className:"w-8 h-8 fill-white text-white"}),e.jsx("span",{children:r.coins})]})]}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"font-display text-4xl md:text-5xl font-black text-[#6B4C9A] mb-4 text-shadow-sm",children:"å¿«æ¨‚å•†åº—"}),e.jsx("p",{className:"text-xl text-gray-600 font-medium",children:"ç”¨ä½ çš„æ˜Ÿæ˜Ÿå¹£äº¤æ›å–œæ­¡çš„ç¦®ç‰©å§ï¼"})]}),e.jsx("div",{className:"flex justify-center gap-4 mb-8",children:K.map(t=>e.jsx("button",{onClick:()=>{S(t.id),v()},className:`
                px-8 py-3 rounded-2xl font-bold text-xl transition-all
                ${l===t.id?"bg-[#6B4C9A] text-white shadow-lg scale-105":"bg-white text-gray-400 hover:bg-gray-50"}
              `,children:t.label},t.id))}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-[2rem] p-6 md:p-8 min-h-[400px] shadow-xl border-4 border-white/50",children:[l==="avatar"&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6",children:F.map(t=>{const o=r.unlockedAvatars.includes(t.icon),f=r.coins>=t.price;return e.jsxs("button",{disabled:o,onClick:()=>!o&&b(t),className:`
                      relative group flex flex-col items-center p-6 rounded-3xl border-4 transition-all duration-300
                      ${o?"bg-gray-100 border-gray-200 opacity-80 cursor-default":f?"bg-white border-purple-200 hover:border-purple-400 hover:shadow-xl hover:-translate-y-1 cursor-pointer":"bg-gray-50 border-gray-200 opacity-60 cursor-not-allowed"}
                    `,children:[e.jsx("div",{className:"text-6xl mb-4 transform group-hover:scale-110 transition-transform",children:t.icon}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:t.name}),o?e.jsxs("div",{className:"bg-green-100 text-green-700 px-4 py-1 rounded-full font-bold flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"})," å·²æ“æœ‰"]}):e.jsxs("div",{className:`
                        px-4 py-1 rounded-full font-bold flex items-center gap-1
                        ${f?"bg-yellow-100 text-yellow-700":"bg-gray-200 text-gray-500"}
                      `,children:[e.jsx(d,{className:"w-4 h-4 fill-current"})," ",t.price]})]},t.id)})}),l==="sticker"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(m.div,{animate:{rotate:[0,10,-10,0]},transition:{repeat:1/0,duration:2},className:"text-9xl mb-8",children:"ðŸŽ"}),e.jsx("h3",{className:"text-3xl font-black text-purple-800 mb-4",children:"é©šå–œè²¼ç´™åŒ…"}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-md text-center",children:"éš¨æ©Ÿç²å¾—ä¸€å¼µè²¼ç´™ï¼æœ‰æ©Ÿæœƒç²å¾—ã€Œå‚³èªªç´šã€çš„ç¨€æœ‰è²¼ç´™å–”ï¼"}),e.jsxs("button",{onClick:()=>b({id:"gacha",name:"é©šå–œè²¼ç´™åŒ…",price:50,type:"gacha"}),disabled:r.coins<50,className:`
                   px-12 py-6 rounded-3xl font-black text-2xl shadow-xl flex items-center gap-3 transition-all
                   ${r.coins>=50?"bg-gradient-to-r from-pink-500 to-purple-500 text-white hover:scale-105 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}
                 `,children:[e.jsx(d,{className:"w-8 h-8 fill-white"}),"50 é‡‘å¹£æŠ½ä¸€æ¬¡"]})]})]})]}),e.jsx(h,{open:A,onOpenChange:c,children:e.jsxs(p,{className:"sm:max-w-md rounded-2xl",children:[e.jsx(M,{children:e.jsx(H,{className:"text-center text-2xl font-bold",children:"ç¢ºèªè³¼è²·"})}),s&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:l==="sticker"?"ðŸŽ":s.icon}),e.jsxs("p",{className:"text-lg text-gray-600 mb-2",children:["ç¢ºå®šè¦è³¼è²· ",e.jsx("strong",{children:s.name})," å—Žï¼Ÿ"]}),e.jsxs("div",{className:"inline-flex items-center gap-2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-full font-bold text-xl",children:[e.jsx(d,{className:"w-5 h-5 fill-current"})," ",s.price]})]}),e.jsxs(_,{className:"gap-2 sm:justify-center",children:[e.jsx(i,{variant:"outline",onClick:()=>c(!1),className:"rounded-xl flex-1",children:"å†æƒ³æƒ³"}),e.jsx(i,{onClick:D,className:"rounded-xl flex-1 bg-purple-600 hover:bg-purple-700",children:"ç¢ºå®šè³¼è²·"})]})]})}),e.jsx(h,{open:u&&l==="avatar",onOpenChange:a,children:e.jsx(p,{className:"sm:max-w-md rounded-2xl bg-gradient-to-br from-yellow-50 to-orange-50 border-4 border-yellow-200",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m.div,{initial:{scale:0},animate:{scale:1},type:"spring",className:"text-8xl mb-4",children:s?.icon}),e.jsx("h2",{className:"text-3xl font-black text-orange-800 mb-2",children:"è³¼è²·æˆåŠŸï¼"}),e.jsxs("p",{className:"text-lg text-orange-600",children:["ä½ ç¾åœ¨å¯ä»¥ä½¿ç”¨ ",e.jsx("strong",{children:s?.name})," ç•¶ä½œé ­åƒå›‰ï¼"]}),e.jsx(i,{onClick:()=>a(!1),className:"mt-6 w-full rounded-xl bg-orange-500 hover:bg-orange-600 text-white text-lg h-12",children:"å¤ªæ£’äº†ï¼"})]})})}),e.jsx(h,{open:u&&l==="sticker",onOpenChange:a,children:e.jsx(p,{className:"sm:max-w-md rounded-2xl bg-gradient-to-br from-purple-50 to-pink-50 border-4 border-pink-200",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},type:"spring",className:"text-8xl mb-4",children:x?.emoji}),e.jsx("h2",{className:"text-3xl font-black text-pink-800 mb-2",children:"æ­å–œç²å¾—ï¼"}),e.jsxs("p",{className:"text-lg text-pink-600 mb-1",children:["ä½ æŠ½åˆ°äº† ",e.jsx("strong",{children:x?.name}),"ï¼"]}),e.jsx("div",{className:"text-sm font-bold bg-white/50 inline-block px-3 py-1 rounded-full text-pink-400",children:x?.rarity}),e.jsx(i,{onClick:()=>a(!1),className:"mt-8 w-full rounded-xl bg-pink-500 hover:bg-pink-600 text-white text-lg h-12",children:"æ”¶ä¸‹è²¼ç´™"})]})})})]})}export{X as default};
