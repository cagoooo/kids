import{r as o}from"./index-WfsaVO51.js";let n=null;function t(){if(!("speechSynthesis"in window))return null;const c=window.speechSynthesis.getVoices(),i=[e=>e.lang==="zh-TW"&&e.name.includes("Mei-Jia"),e=>e.lang==="zh-TW"&&e.name.includes("Ting-Ting"),e=>e.lang==="zh-TW",e=>e.lang==="zh_TW",e=>e.lang.startsWith("zh-TW"),e=>e.lang.includes("TW"),e=>e.lang.startsWith("zh-"),e=>e.lang.startsWith("zh_"),e=>e.lang.includes("zh")];for(const e of i){const s=c.find(e);if(s)return s}return null}typeof window<"u"&&"speechSynthesis"in window&&(window.speechSynthesis.addEventListener("voiceschanged",()=>{n=t()}),n=t());function h(){return{speak:o.useCallback(i=>{if(typeof window>"u"||!("speechSynthesis"in window)){console.warn("Speech synthesis not supported");return}try{window.speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(i);e.lang="zh-TW",e.rate=.85,e.pitch=1,e.volume=1,n||(n=t()),n&&(e.voice=n),e.onerror=s=>{console.error("Speech synthesis error:",s)},window.speechSynthesis.speak(e)}catch(e){console.error("Speech synthesis failed:",e)}},[])}}export{h as u};
