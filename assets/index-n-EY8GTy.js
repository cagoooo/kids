const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-B8DElID4.js","assets/Layout-D_yaY9ik.js","assets/use-tts-DPGGw7V0.js","assets/dialog-C1f_E0fV.js","assets/input-CAKYNKOk.js","assets/shapes-B33n_Wah.js","assets/shopping-cart-C-Np4dgf.js","assets/apple-uRo6sh9H.js","assets/ColorGame-k15W_v-p.js","assets/GameShell-BlSRuUtV.js","assets/use-scores-BVyad7jY.js","assets/useQuery-Bqjn5xqP.js","assets/SpeakableOption-DNVqkCdl.js","assets/MathGame-S9I45VUX.js","assets/EnglishGame-Dc03_yLM.js","assets/ShapeGame-B32sSkVG.js","assets/core.esm--E3q7WdY.js","assets/MelodyGame-BJef0DTw.js","assets/ClockGame-DdS97fLp.js","assets/BopomofoGame-B_fdlKGK.js","assets/EmotionGame-Ds-6unh0.js","assets/CodingGame-Ccz3nweK.js","assets/GardenGame-ZvGBTfUw.js","assets/MarketGame-CnEydgQO.js","assets/RecycleGame--2M14JC1.js","assets/MemoryGame-UmNVqKYX.js","assets/AnimalGame-KZIW9O3J.js","assets/TrafficGame-CSbtcBbB.js","assets/BodyGame-DBXP2cHj.js","assets/FoodGame-DNwKWNbC.js","assets/JobGame-Cmn9ROU0.js","assets/PuzzleGame-Dr1IgeTZ.js","assets/DifferenceGame-qcIxILGe.js","assets/SequenceGame-DQV-H70w.js","assets/SortingGame-cebk9bLS.js","assets/Scores-DO_dcxTo.js","assets/Stickers-BcOiunQZ.js","assets/lock-BeSzguN2.js","assets/Certificates-CXIQ-8ZK.js"])))=>i.map(i=>d[i]);
function BR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function DT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bp={exports:{}},nu={},$p={exports:{}},Le={};var qv;function $R(){if(qv)return Le;qv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function E(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,C={};function x(U,Z,Pe){this.props=U,this.context=Z,this.refs=C,this.updater=Pe||A}x.prototype.isReactComponent={},x.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},x.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function q(){}q.prototype=x.prototype;function H(U,Z,Pe){this.props=U,this.context=Z,this.refs=C,this.updater=Pe||A}var G=H.prototype=new q;G.constructor=H,D(G,x.prototype),G.isPureReactComponent=!0;var J=Array.isArray,ee=Object.prototype.hasOwnProperty,ie={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function S(U,Z,Pe){var Re,Oe={},Me=null,Fe=null;if(Z!=null)for(Re in Z.ref!==void 0&&(Fe=Z.ref),Z.key!==void 0&&(Me=""+Z.key),Z)ee.call(Z,Re)&&!P.hasOwnProperty(Re)&&(Oe[Re]=Z[Re]);var Ue=arguments.length-2;if(Ue===1)Oe.children=Pe;else if(1<Ue){for(var We=Array(Ue),Mt=0;Mt<Ue;Mt++)We[Mt]=arguments[Mt+2];Oe.children=We}if(U&&U.defaultProps)for(Re in Ue=U.defaultProps,Ue)Oe[Re]===void 0&&(Oe[Re]=Ue[Re]);return{$$typeof:n,type:U,key:Me,ref:Fe,props:Oe,_owner:ie.current}}function k(U,Z){return{$$typeof:n,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function V(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Pe){return Z[Pe]})}var M=/\/+/g;function R(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):Z.toString(36)}function ae(U,Z,Pe,Re,Oe){var Me=typeof U;(Me==="undefined"||Me==="boolean")&&(U=null);var Fe=!1;if(U===null)Fe=!0;else switch(Me){case"string":case"number":Fe=!0;break;case"object":switch(U.$$typeof){case n:case e:Fe=!0}}if(Fe)return Fe=U,Oe=Oe(Fe),U=Re===""?"."+R(Fe,0):Re,J(Oe)?(Pe="",U!=null&&(Pe=U.replace(M,"$&/")+"/"),ae(Oe,Z,Pe,"",function(Mt){return Mt})):Oe!=null&&(O(Oe)&&(Oe=k(Oe,Pe+(!Oe.key||Fe&&Fe.key===Oe.key?"":(""+Oe.key).replace(M,"$&/")+"/")+U)),Z.push(Oe)),1;if(Fe=0,Re=Re===""?".":Re+":",J(U))for(var Ue=0;Ue<U.length;Ue++){Me=U[Ue];var We=Re+R(Me,Ue);Fe+=ae(Me,Z,Pe,We,Oe)}else if(We=E(U),typeof We=="function")for(U=We.call(U),Ue=0;!(Me=U.next()).done;)Me=Me.value,We=Re+R(Me,Ue++),Fe+=ae(Me,Z,Pe,We,Oe);else if(Me==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Fe}function ke(U,Z,Pe){if(U==null)return U;var Re=[],Oe=0;return ae(U,Re,"","",function(Me){return Z.call(Pe,Me,Oe++)}),Re}function Ae(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(Pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=Pe)},function(Pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=Pe)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var Te={current:null},X={transition:null},he={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:X,ReactCurrentOwner:ie};function ue(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:ke,forEach:function(U,Z,Pe){ke(U,function(){Z.apply(this,arguments)},Pe)},count:function(U){var Z=0;return ke(U,function(){Z++}),Z},toArray:function(U){return ke(U,function(Z){return Z})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Le.Component=x,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=H,Le.StrictMode=r,Le.Suspense=f,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Le.act=ue,Le.cloneElement=function(U,Z,Pe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Re=D({},U.props),Oe=U.key,Me=U.ref,Fe=U._owner;if(Z!=null){if(Z.ref!==void 0&&(Me=Z.ref,Fe=ie.current),Z.key!==void 0&&(Oe=""+Z.key),U.type&&U.type.defaultProps)var Ue=U.type.defaultProps;for(We in Z)ee.call(Z,We)&&!P.hasOwnProperty(We)&&(Re[We]=Z[We]===void 0&&Ue!==void 0?Ue[We]:Z[We])}var We=arguments.length-2;if(We===1)Re.children=Pe;else if(1<We){Ue=Array(We);for(var Mt=0;Mt<We;Mt++)Ue[Mt]=arguments[Mt+2];Re.children=Ue}return{$$typeof:n,type:U.type,key:Oe,ref:Me,props:Re,_owner:Fe}},Le.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},Le.createElement=S,Le.createFactory=function(U){var Z=S.bind(null,U);return Z.type=U,Z},Le.createRef=function(){return{current:null}},Le.forwardRef=function(U){return{$$typeof:h,render:U}},Le.isValidElement=O,Le.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:Ae}},Le.memo=function(U,Z){return{$$typeof:p,type:U,compare:Z===void 0?null:Z}},Le.startTransition=function(U){var Z=X.transition;X.transition={};try{U()}finally{X.transition=Z}},Le.unstable_act=ue,Le.useCallback=function(U,Z){return Te.current.useCallback(U,Z)},Le.useContext=function(U){return Te.current.useContext(U)},Le.useDebugValue=function(){},Le.useDeferredValue=function(U){return Te.current.useDeferredValue(U)},Le.useEffect=function(U,Z){return Te.current.useEffect(U,Z)},Le.useId=function(){return Te.current.useId()},Le.useImperativeHandle=function(U,Z,Pe){return Te.current.useImperativeHandle(U,Z,Pe)},Le.useInsertionEffect=function(U,Z){return Te.current.useInsertionEffect(U,Z)},Le.useLayoutEffect=function(U,Z){return Te.current.useLayoutEffect(U,Z)},Le.useMemo=function(U,Z){return Te.current.useMemo(U,Z)},Le.useReducer=function(U,Z,Pe){return Te.current.useReducer(U,Z,Pe)},Le.useRef=function(U){return Te.current.useRef(U)},Le.useState=function(U){return Te.current.useState(U)},Le.useSyncExternalStore=function(U,Z,Pe){return Te.current.useSyncExternalStore(U,Z,Pe)},Le.useTransition=function(){return Te.current.useTransition()},Le.version="18.3.1",Le}var Hv;function Vd(){return Hv||(Hv=1,$p.exports=$R()),$p.exports}var Gv;function qR(){if(Gv)return nu;Gv=1;var n=Vd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var _,v={},E=null,A=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(A=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(v[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)v[_]===void 0&&(v[_]=f[_]);return{$$typeof:e,type:h,key:E,ref:A,props:v,_owner:s.current}}return nu.Fragment=t,nu.jsx=l,nu.jsxs=l,nu}var Kv;function HR(){return Kv||(Kv=1,Bp.exports=qR()),Bp.exports}var Q=HR(),Ih={},qp={exports:{}},an={},Hp={exports:{}},Gp={};var Wv;function GR(){return Wv||(Wv=1,(function(n){function e(X,he){var ue=X.length;X.push(he);e:for(;0<ue;){var U=ue-1>>>1,Z=X[U];if(0<s(Z,he))X[U]=he,X[ue]=Z,ue=U;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var he=X[0],ue=X.pop();if(ue!==he){X[0]=ue;e:for(var U=0,Z=X.length,Pe=Z>>>1;U<Pe;){var Re=2*(U+1)-1,Oe=X[Re],Me=Re+1,Fe=X[Me];if(0>s(Oe,ue))Me<Z&&0>s(Fe,Oe)?(X[U]=Fe,X[Me]=ue,U=Me):(X[U]=Oe,X[Re]=ue,U=Re);else if(Me<Z&&0>s(Fe,ue))X[U]=Fe,X[Me]=ue,U=Me;else break e}}return he}function s(X,he){var ue=X.sortIndex-he.sortIndex;return ue!==0?ue:X.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],_=1,v=null,E=3,A=!1,D=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(X){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=X)r(p),he.sortIndex=he.expirationTime,e(f,he);else break;he=t(p)}}function J(X){if(C=!1,G(X),!D)if(t(f)!==null)D=!0,Ae(ee);else{var he=t(p);he!==null&&Te(J,he.startTime-X)}}function ee(X,he){D=!1,C&&(C=!1,q(S),S=-1),A=!0;var ue=E;try{for(G(he),v=t(f);v!==null&&(!(v.expirationTime>he)||X&&!V());){var U=v.callback;if(typeof U=="function"){v.callback=null,E=v.priorityLevel;var Z=U(v.expirationTime<=he);he=n.unstable_now(),typeof Z=="function"?v.callback=Z:v===t(f)&&r(f),G(he)}else r(f);v=t(f)}if(v!==null)var Pe=!0;else{var Re=t(p);Re!==null&&Te(J,Re.startTime-he),Pe=!1}return Pe}finally{v=null,E=ue,A=!1}}var ie=!1,P=null,S=-1,k=5,O=-1;function V(){return!(n.unstable_now()-O<k)}function M(){if(P!==null){var X=n.unstable_now();O=X;var he=!0;try{he=P(!0,X)}finally{he?R():(ie=!1,P=null)}}else ie=!1}var R;if(typeof H=="function")R=function(){H(M)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ke=ae.port2;ae.port1.onmessage=M,R=function(){ke.postMessage(null)}}else R=function(){x(M,0)};function Ae(X){P=X,ie||(ie=!0,R())}function Te(X,he){S=x(function(){X(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){D||A||(D=!0,Ae(ee))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(X){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var ue=E;E=he;try{return X()}finally{E=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=E;E=X;try{return he()}finally{E=ue}},n.unstable_scheduleCallback=function(X,he,ue){var U=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?U+ue:U):ue=U,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ue+Z,X={id:_++,callback:he,priorityLevel:X,startTime:ue,expirationTime:Z,sortIndex:-1},ue>U?(X.sortIndex=ue,e(p,X),t(f)===null&&X===t(p)&&(C?(q(S),S=-1):C=!0,Te(J,ue-U))):(X.sortIndex=Z,e(f,X),D||A||(D=!0,Ae(ee))),X},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(X){var he=E;return function(){var ue=E;E=he;try{return X.apply(this,arguments)}finally{E=ue}}}})(Gp)),Gp}var Qv;function KR(){return Qv||(Qv=1,Hp.exports=GR()),Hp.exports}var Yv;function WR(){if(Yv)return an;Yv=1;var n=Vd(),e=KR();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},v={};function E(i){return f.call(v,i)?!0:f.call(_,i)?!1:p.test(i)?v[i]=!0:(_[i]=!0,!1)}function A(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function D(i,o,u,d){if(o===null||typeof o>"u"||A(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,u,d,m,g,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=g,this.removeEmptyString=T}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];x[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function H(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(q,H);x[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(q,H);x[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(q,H);x[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,u,d){var m=x.hasOwnProperty(o)?x[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(D(o,u,m,d)&&(u=null),d||m===null?E(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),ie=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),X=Symbol.iterator;function he(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Object.assign,U;function Z(i){if(U===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);U=o&&o[1]||""}return`
`+U+i}var Pe=!1;function Re(i,o){if(!i||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(K){var d=K}Reflect.construct(i,[],o)}else{try{o.call()}catch(K){d=K}i.call(o.prototype)}else{try{throw Error()}catch(K){d=K}i()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var m=K.stack.split(`
`),g=d.stack.split(`
`),T=m.length-1,b=g.length-1;1<=T&&0<=b&&m[T]!==g[b];)b--;for(;1<=T&&0<=b;T--,b--)if(m[T]!==g[b]){if(T!==1||b!==1)do if(T--,b--,0>b||m[T]!==g[b]){var L=`
`+m[T].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=T&&0<=b);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Z(i):""}function Oe(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Re(i.type,!1),i;case 11:return i=Re(i.type.render,!1),i;case 1:return i=Re(i.type,!0),i;default:return""}}function Me(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case ie:return"Portal";case k:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ae:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ke:return o=i.displayName||null,o!==null?o:Me(i.type)||"Memo";case Ae:o=i._payload,i=i._init;try{return Me(i(o))}catch{}}return null}function Fe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ue(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function We(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mt(i){var o=We(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){d=""+T,g.call(this,T)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function di(i){i._valueTracker||(i._valueTracker=Mt(i))}function Es(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=We(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function dn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function To(i,o){var u=o.checked;return ue({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function lc(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=Ue(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Io(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function Ts(i,o){Io(i,o);var u=Ue(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Et(i,o.type,u):o.hasOwnProperty("defaultValue")&&Et(i,o.type,Ue(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ul(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Et(i,o,u){(o!=="number"||dn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var gt=Array.isArray;function jn(i,o,u,d){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&d&&(i[u].defaultSelected=!0)}else{for(u=""+Ue(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function cl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hl(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Ue(u)}}function uc(i,o){var u=Ue(o.value),d=Ue(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function fi(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function dl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function So(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?dl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var pi,cc=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(pi=pi||document.createElement("div"),pi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=pi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Is(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hc=["Webkit","ms","Moz","O"];Object.keys(mi).forEach(function(i){hc.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),mi[o]=mi[i]})});function gi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||mi.hasOwnProperty(i)&&mi[i]?(""+o).trim():o+"px"}function Ao(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=gi(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,m):i[u]=m}}var fl=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zn(i,o){if(o){if(fl[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Po(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yi=null;function Ro(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Vr=null,Or=null,ft=null;function pl(i){if(i=zl(i)){if(typeof Vr!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Fc(o),Vr(i.stateNode,i.type,o))}}function _i(i){Or?ft?ft.push(i):ft=[i]:Or=i}function vi(){if(Or){var i=Or,o=ft;if(ft=Or=null,pl(i),o)for(i=0;i<o.length;i++)pl(o[i])}}function dc(i,o){return i(o)}function fc(){}var ir=!1;function pc(i,o,u){if(ir)return i(o,u);ir=!0;try{return dc(i,o,u)}finally{ir=!1,(Or!==null||ft!==null)&&(fc(),vi())}}function Ss(i,o){var u=i.stateNode;if(u===null)return null;var d=Fc(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var wi=!1;if(h)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{wi=!1}function mc(i,o,u,d,m,g,T,b,L){var K=Array.prototype.slice.call(arguments,3);try{o.apply(u,K)}catch(re){this.onError(re)}}var Mr=!1,sr=null,Co=!1,bn=null,gc={onError:function(i){Mr=!0,sr=i}};function yc(i,o,u,d,m,g,T,b,L){Mr=!1,sr=null,mc.apply(gc,arguments)}function ml(i,o,u,d,m,g,T,b,L){if(yc.apply(this,arguments),Mr){if(Mr){var K=sr;Mr=!1,sr=null}else throw Error(t(198));Co||(Co=!0,bn=K)}}function Bn(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function gl(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function _c(i){if(Bn(i)!==i)throw Error(t(188))}function vc(i){var o=i.alternate;if(!o){if(o=Bn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var m=u.return;if(m===null)break;var g=m.alternate;if(g===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===u)return _c(m),i;if(g===d)return _c(m),o;g=g.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=g;else{for(var T=!1,b=m.child;b;){if(b===u){T=!0,u=m,d=g;break}if(b===d){T=!0,d=m,u=g;break}b=b.sibling}if(!T){for(b=g.child;b;){if(b===u){T=!0,u=g,d=m;break}if(b===d){T=!0,d=g,u=m;break}b=b.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function wc(i){return i=vc(i),i!==null?As(i):null}function As(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=As(i);if(o!==null)return o;i=i.sibling}return null}var yl=e.unstable_scheduleCallback,xo=e.unstable_cancelCallback,Ps=e.unstable_shouldYield,Lr=e.unstable_requestPaint,it=e.unstable_now,vf=e.unstable_getCurrentPriorityLevel,bo=e.unstable_ImmediatePriority,_l=e.unstable_UserBlockingPriority,Rs=e.unstable_NormalPriority,vl=e.unstable_LowPriority,ko=e.unstable_IdlePriority,Cs=null,fn=null;function Ec(i){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Cs,i,void 0,(i.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:xs,or=Math.log,kn=Math.LN2;function xs(i){return i>>>=0,i===0?32:31-(or(i)/kn|0)|0}var ar=64,Ti=4194304;function Ge(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Fr(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,g=i.pingedLanes,T=u&268435455;if(T!==0){var b=T&~m;b!==0?d=Ge(b):(g&=T,g!==0&&(d=Ge(g)))}else T=u&~m,T!==0?d=Ge(T):g!==0&&(d=Ge(g));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,g=o&-o,m>=g||m===16&&(g&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-pn(o),m=1<<u,d|=i[u],o&=~m;return d}function bs(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes;0<g;){var T=31-pn(g),b=1<<T,L=m[T];L===-1?((b&u)===0||(b&d)!==0)&&(m[T]=bs(b,o)):L<=o&&(i.expiredLanes|=b),g&=~b}}function wl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function El(){var i=ar;return ar<<=1,(ar&4194240)===0&&(ar=64),i}function Tl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ns(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-pn(o),i[o]=u}function wf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-pn(u),g=1<<m;o[m]=0,d[m]=-1,i[m]=-1,u&=~g}}function Il(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-pn(u),m=1<<d;m&o|i[d]&o&&(i[d]|=o),u&=~m}}var Be=0;function lr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Sl,No,Al,Pl,Rl,ur=!1,Do=[],cr=null,hr=null,Lt=null,Ds=new Map,Ur=new Map,mn=[],Tc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ii(i,o){switch(i){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Ds.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(o.pointerId)}}function $n(i,o,u,d,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:g,targetContainers:[m]},o!==null&&(o=zl(o),o!==null&&No(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function Ic(i,o,u,d,m){switch(o){case"focusin":return cr=$n(cr,i,o,u,d,m),!0;case"dragenter":return hr=$n(hr,i,o,u,d,m),!0;case"mouseover":return Lt=$n(Lt,i,o,u,d,m),!0;case"pointerover":var g=m.pointerId;return Ds.set(g,$n(Ds.get(g)||null,i,o,u,d,m)),!0;case"gotpointercapture":return g=m.pointerId,Ur.set(g,$n(Ur.get(g)||null,i,o,u,d,m)),!0}return!1}function Vo(i){var o=Ls(i.target);if(o!==null){var u=Bn(o);if(u!==null){if(o=u.tag,o===13){if(o=gl(u),o!==null){i.blockedOn=o,Rl(i.priority,function(){Al(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ze(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Oo(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);yi=d,u.target.dispatchEvent(d),yi=null}else return o=zl(u),o!==null&&No(o),i.blockedOn=u,!1;o.shift()}return!0}function Sc(i,o,u){Ze(i)&&u.delete(o)}function Ef(){ur=!1,cr!==null&&Ze(cr)&&(cr=null),hr!==null&&Ze(hr)&&(hr=null),Lt!==null&&Ze(Lt)&&(Lt=null),Ds.forEach(Sc),Ur.forEach(Sc)}function Si(i,o){i.blockedOn===o&&(i.blockedOn=null,ur||(ur=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ef)))}function Ai(i){function o(m){return Si(m,i)}if(0<Do.length){Si(Do[0],i);for(var u=1;u<Do.length;u++){var d=Do[u];d.blockedOn===i&&(d.blockedOn=null)}}for(cr!==null&&Si(cr,i),hr!==null&&Si(hr,i),Lt!==null&&Si(Lt,i),Ds.forEach(o),Ur.forEach(o),u=0;u<mn.length;u++)d=mn[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<mn.length&&(u=mn[0],u.blockedOn===null);)Vo(u),u.blockedOn===null&&mn.shift()}var jr=J.ReactCurrentBatchConfig,zr=!0;function dr(i,o,u,d){var m=Be,g=jr.transition;jr.transition=null;try{Be=1,Cl(i,o,u,d)}finally{Be=m,jr.transition=g}}function Ac(i,o,u,d){var m=Be,g=jr.transition;jr.transition=null;try{Be=4,Cl(i,o,u,d)}finally{Be=m,jr.transition=g}}function Cl(i,o,u,d){if(zr){var m=Oo(i,o,u,d);if(m===null)Nf(i,o,d,fr,u),Ii(i,d);else if(Ic(m,i,o,u,d))d.stopPropagation();else if(Ii(i,d),o&4&&-1<Tc.indexOf(i)){for(;m!==null;){var g=zl(m);if(g!==null&&Sl(g),g=Oo(i,o,u,d),g===null&&Nf(i,o,d,fr,u),g===m)break;m=g}m!==null&&d.stopPropagation()}else Nf(i,o,d,null,u)}}var fr=null;function Oo(i,o,u,d){if(fr=null,i=Ro(d),i=Ls(i),i!==null)if(o=Bn(i),o===null)i=null;else if(u=o.tag,u===13){if(i=gl(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return fr=i,null}function Mo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vf()){case bo:return 1;case _l:return 4;case Rs:case vl:return 16;case ko:return 536870912;default:return 16}default:return 16}}var gn=null,Lo=null,Br=null;function Pc(){if(Br)return Br;var i,o=Lo,u=o.length,d,m="value"in gn?gn.value:gn.textContent,g=m.length;for(i=0;i<u&&o[i]===m[i];i++);var T=u-i;for(d=1;d<=T&&o[u-d]===m[g-d];d++);return Br=m.slice(i,1<d?1-d:void 0)}function Vs(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function pr(){return!0}function xl(){return!1}function Bt(i){function o(u,d,m,g,T){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(u=i[b],this[b]=u?u(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pr:xl,this.isPropagationStopped=xl,this}return ue(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),o}var mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Os=Bt(mr),Pi=ue({},mr,{view:0,detail:0}),Fo=Bt(Pi),Uo,jo,yn,Ms=ue({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yn&&(yn&&i.type==="mousemove"?(Uo=i.screenX-yn.screenX,jo=i.screenY-yn.screenY):jo=Uo=0,yn=i),Uo)},movementY:function(i){return"movementY"in i?i.movementY:jo}}),bl=Bt(Ms),Rc=ue({},Ms,{dataTransfer:0}),Cc=Bt(Rc),zo=ue({},Pi,{relatedTarget:0}),Ft=Bt(zo),xc=ue({},mr,{animationName:0,elapsedTime:0,pseudoElement:0}),bc=Bt(xc),Ri=ue({},mr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),c=Bt(Ri),y=ue({},mr,{data:0}),w=Bt(y),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=W[i])?!!o[i]:!1}function Ne(){return ce}var yt=ue({},Pi,{key:function(i){if(i.key){var o=I[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Vs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?B[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(i){return i.type==="keypress"?Vs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Vs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qe=Bt(yt),Tt=ue({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_n=Bt(Tt),$r=ue({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),gr=Bt($r),yr=ue({},mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bo=Bt(yr),kl=ue({},Ms,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),MP=Bt(kl),LP=[9,13,27,32],Tf=h&&"CompositionEvent"in window,Nl=null;h&&"documentMode"in document&&(Nl=document.documentMode);var FP=h&&"TextEvent"in window&&!Nl,My=h&&(!Tf||Nl&&8<Nl&&11>=Nl),Ly=" ",Fy=!1;function Uy(i,o){switch(i){case"keyup":return LP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $o=!1;function UP(i,o){switch(i){case"compositionend":return jy(o);case"keypress":return o.which!==32?null:(Fy=!0,Ly);case"textInput":return i=o.data,i===Ly&&Fy?null:i;default:return null}}function jP(i,o){if($o)return i==="compositionend"||!Tf&&Uy(i,o)?(i=Pc(),Br=Lo=gn=null,$o=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return My&&o.locale!=="ko"?null:o.data;default:return null}}var zP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!zP[i.type]:o==="textarea"}function By(i,o,u,d){_i(d),o=Oc(o,"onChange"),0<o.length&&(u=new Os("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Dl=null,Vl=null;function BP(i){o_(i,0)}function kc(i){var o=Wo(i);if(Es(o))return i}function $P(i,o){if(i==="change")return o}var $y=!1;if(h){var If;if(h){var Sf="oninput"in document;if(!Sf){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Sf=typeof qy.oninput=="function"}If=Sf}else If=!1;$y=If&&(!document.documentMode||9<document.documentMode)}function Hy(){Dl&&(Dl.detachEvent("onpropertychange",Gy),Vl=Dl=null)}function Gy(i){if(i.propertyName==="value"&&kc(Vl)){var o=[];By(o,Vl,i,Ro(i)),pc(BP,o)}}function qP(i,o,u){i==="focusin"?(Hy(),Dl=o,Vl=u,Dl.attachEvent("onpropertychange",Gy)):i==="focusout"&&Hy()}function HP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return kc(Vl)}function GP(i,o){if(i==="click")return kc(o)}function KP(i,o){if(i==="input"||i==="change")return kc(o)}function WP(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var qn=typeof Object.is=="function"?Object.is:WP;function Ol(i,o){if(qn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!qn(i[m],o[m]))return!1}return!0}function Ky(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wy(i,o){var u=Ky(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ky(u)}}function Qy(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Qy(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Yy(){for(var i=window,o=dn();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=dn(i.document)}return o}function Af(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function QP(i){var o=Yy(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Qy(u.ownerDocument.documentElement,u)){if(d!==null&&Af(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,g=Math.min(d.start,m);d=d.end===void 0?g:Math.min(d.end,m),!i.extend&&g>d&&(m=d,d=g,g=m),m=Wy(u,g);var T=Wy(u,d);m&&T&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),g>d?(i.addRange(o),i.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var YP=h&&"documentMode"in document&&11>=document.documentMode,qo=null,Pf=null,Ml=null,Rf=!1;function Jy(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Rf||qo==null||qo!==dn(d)||(d=qo,"selectionStart"in d&&Af(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ml&&Ol(Ml,d)||(Ml=d,d=Oc(Pf,"onSelect"),0<d.length&&(o=new Os("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=qo)))}function Nc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ho={animationend:Nc("Animation","AnimationEnd"),animationiteration:Nc("Animation","AnimationIteration"),animationstart:Nc("Animation","AnimationStart"),transitionend:Nc("Transition","TransitionEnd")},Cf={},Xy={};h&&(Xy=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Dc(i){if(Cf[i])return Cf[i];if(!Ho[i])return i;var o=Ho[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Xy)return Cf[i]=o[u];return i}var Zy=Dc("animationend"),e_=Dc("animationiteration"),t_=Dc("animationstart"),n_=Dc("transitionend"),r_=new Map,i_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(i,o){r_.set(i,o),a(o,[i])}for(var xf=0;xf<i_.length;xf++){var bf=i_[xf],JP=bf.toLowerCase(),XP=bf[0].toUpperCase()+bf.slice(1);Ci(JP,"on"+XP)}Ci(Zy,"onAnimationEnd"),Ci(e_,"onAnimationIteration"),Ci(t_,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(n_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function s_(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,ml(d,o,void 0,i),i.currentTarget=null}function o_(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],m=d.event;d=d.listeners;e:{var g=void 0;if(o)for(var T=d.length-1;0<=T;T--){var b=d[T],L=b.instance,K=b.currentTarget;if(b=b.listener,L!==g&&m.isPropagationStopped())break e;s_(m,b,K),g=L}else for(T=0;T<d.length;T++){if(b=d[T],L=b.instance,K=b.currentTarget,b=b.listener,L!==g&&m.isPropagationStopped())break e;s_(m,b,K),g=L}}}if(Co)throw i=bn,Co=!1,bn=null,i}function st(i,o){var u=o[Ff];u===void 0&&(u=o[Ff]=new Set);var d=i+"__bubble";u.has(d)||(a_(o,i,2,!1),u.add(d))}function kf(i,o,u){var d=0;o&&(d|=4),a_(u,i,d,o)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function Fl(i){if(!i[Vc]){i[Vc]=!0,r.forEach(function(u){u!=="selectionchange"&&(ZP.has(u)||kf(u,!1,i),kf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Vc]||(o[Vc]=!0,kf("selectionchange",!1,o))}}function a_(i,o,u,d){switch(Mo(o)){case 1:var m=dr;break;case 4:m=Ac;break;default:m=Cl}u=m.bind(null,o,u,i),m=void 0,!wi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function Nf(i,o,u,d,m){var g=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var b=d.stateNode.containerInfo;if(b===m||b.nodeType===8&&b.parentNode===m)break;if(T===4)for(T=d.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;T=T.return}for(;b!==null;){if(T=Ls(b),T===null)return;if(L=T.tag,L===5||L===6){d=g=T;continue e}b=b.parentNode}}d=d.return}pc(function(){var K=g,re=Ro(u),se=[];e:{var te=r_.get(i);if(te!==void 0){var fe=Os,ge=i;switch(i){case"keypress":if(Vs(u)===0)break e;case"keydown":case"keyup":fe=Qe;break;case"focusin":ge="focus",fe=Ft;break;case"focusout":ge="blur",fe=Ft;break;case"beforeblur":case"afterblur":fe=Ft;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Cc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=gr;break;case Zy:case e_:case t_:fe=bc;break;case n_:fe=Bo;break;case"scroll":fe=Fo;break;case"wheel":fe=MP;break;case"copy":case"cut":case"paste":fe=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=_n}var ye=(o&4)!==0,_t=!ye&&i==="scroll",z=ye?te!==null?te+"Capture":null:te;ye=[];for(var F=K,$;F!==null;){$=F;var oe=$.stateNode;if($.tag===5&&oe!==null&&($=oe,z!==null&&(oe=Ss(F,z),oe!=null&&ye.push(Ul(F,oe,$)))),_t)break;F=F.return}0<ye.length&&(te=new fe(te,ge,null,u,re),se.push({event:te,listeners:ye}))}}if((o&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",te&&u!==yi&&(ge=u.relatedTarget||u.fromElement)&&(Ls(ge)||ge[qr]))break e;if((fe||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,fe?(ge=u.relatedTarget||u.toElement,fe=K,ge=ge?Ls(ge):null,ge!==null&&(_t=Bn(ge),ge!==_t||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=K),fe!==ge)){if(ye=bl,oe="onMouseLeave",z="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(ye=_n,oe="onPointerLeave",z="onPointerEnter",F="pointer"),_t=fe==null?te:Wo(fe),$=ge==null?te:Wo(ge),te=new ye(oe,F+"leave",fe,u,re),te.target=_t,te.relatedTarget=$,oe=null,Ls(re)===K&&(ye=new ye(z,F+"enter",ge,u,re),ye.target=$,ye.relatedTarget=_t,oe=ye),_t=oe,fe&&ge)t:{for(ye=fe,z=ge,F=0,$=ye;$;$=Go($))F++;for($=0,oe=z;oe;oe=Go(oe))$++;for(;0<F-$;)ye=Go(ye),F--;for(;0<$-F;)z=Go(z),$--;for(;F--;){if(ye===z||z!==null&&ye===z.alternate)break t;ye=Go(ye),z=Go(z)}ye=null}else ye=null;fe!==null&&l_(se,te,fe,ye,!1),ge!==null&&_t!==null&&l_(se,_t,ge,ye,!0)}}e:{if(te=K?Wo(K):window,fe=te.nodeName&&te.nodeName.toLowerCase(),fe==="select"||fe==="input"&&te.type==="file")var ve=$P;else if(zy(te))if($y)ve=KP;else{ve=HP;var Ie=qP}else(fe=te.nodeName)&&fe.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=GP);if(ve&&(ve=ve(i,K))){By(se,ve,u,re);break e}Ie&&Ie(i,te,K),i==="focusout"&&(Ie=te._wrapperState)&&Ie.controlled&&te.type==="number"&&Et(te,"number",te.value)}switch(Ie=K?Wo(K):window,i){case"focusin":(zy(Ie)||Ie.contentEditable==="true")&&(qo=Ie,Pf=K,Ml=null);break;case"focusout":Ml=Pf=qo=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,Jy(se,u,re);break;case"selectionchange":if(YP)break;case"keydown":case"keyup":Jy(se,u,re)}var Se;if(Tf)e:{switch(i){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else $o?Uy(i,u)&&(Ce="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ce="onCompositionStart");Ce&&(My&&u.locale!=="ko"&&($o||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&$o&&(Se=Pc()):(gn=re,Lo="value"in gn?gn.value:gn.textContent,$o=!0)),Ie=Oc(K,Ce),0<Ie.length&&(Ce=new w(Ce,i,null,u,re),se.push({event:Ce,listeners:Ie}),Se?Ce.data=Se:(Se=jy(u),Se!==null&&(Ce.data=Se)))),(Se=FP?UP(i,u):jP(i,u))&&(K=Oc(K,"onBeforeInput"),0<K.length&&(re=new w("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:K}),re.data=Se))}o_(se,o)})}function Ul(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Oc(i,o){for(var u=o+"Capture",d=[];i!==null;){var m=i,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=Ss(i,u),g!=null&&d.unshift(Ul(i,g,m)),g=Ss(i,o),g!=null&&d.push(Ul(i,g,m))),i=i.return}return d}function Go(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function l_(i,o,u,d,m){for(var g=o._reactName,T=[];u!==null&&u!==d;){var b=u,L=b.alternate,K=b.stateNode;if(L!==null&&L===d)break;b.tag===5&&K!==null&&(b=K,m?(L=Ss(u,g),L!=null&&T.unshift(Ul(u,L,b))):m||(L=Ss(u,g),L!=null&&T.push(Ul(u,L,b)))),u=u.return}T.length!==0&&i.push({event:o,listeners:T})}var eR=/\r\n?/g,tR=/\u0000|\uFFFD/g;function u_(i){return(typeof i=="string"?i:""+i).replace(eR,`
`).replace(tR,"")}function Mc(i,o,u){if(o=u_(o),u_(i)!==o&&u)throw Error(t(425))}function Lc(){}var Df=null,Vf=null;function Of(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Mf=typeof setTimeout=="function"?setTimeout:void 0,nR=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,rR=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(i){return c_.resolve(null).then(i).catch(iR)}:Mf;function iR(i){setTimeout(function(){throw i})}function Lf(i,o){var u=o,d=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){i.removeChild(m),Ai(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Ai(o)}function xi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function h_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ko,jl="__reactProps$"+Ko,qr="__reactContainer$"+Ko,Ff="__reactEvents$"+Ko,sR="__reactListeners$"+Ko,oR="__reactHandles$"+Ko;function Ls(i){var o=i[_r];if(o)return o;for(var u=i.parentNode;u;){if(o=u[qr]||u[_r]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=h_(i);i!==null;){if(u=i[_r])return u;i=h_(i)}return o}i=u,u=i.parentNode}return null}function zl(i){return i=i[_r]||i[qr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Wo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Fc(i){return i[jl]||null}var Uf=[],Qo=-1;function bi(i){return{current:i}}function ot(i){0>Qo||(i.current=Uf[Qo],Uf[Qo]=null,Qo--)}function tt(i,o){Qo++,Uf[Qo]=i.current,i.current=o}var ki={},$t=bi(ki),tn=bi(!1),Fs=ki;function Yo(i,o){var u=i.type.contextTypes;if(!u)return ki;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in u)m[g]=o[g];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function nn(i){return i=i.childContextTypes,i!=null}function Uc(){ot(tn),ot($t)}function d_(i,o,u){if($t.current!==ki)throw Error(t(168));tt($t,o),tt(tn,u)}function f_(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,Fe(i)||"Unknown",m));return ue({},u,d)}function jc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ki,Fs=$t.current,tt($t,i),tt(tn,tn.current),!0}function p_(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=f_(i,o,Fs),d.__reactInternalMemoizedMergedChildContext=i,ot(tn),ot($t),tt($t,i)):ot(tn),tt(tn,u)}var Hr=null,zc=!1,jf=!1;function m_(i){Hr===null?Hr=[i]:Hr.push(i)}function aR(i){zc=!0,m_(i)}function Ni(){if(!jf&&Hr!==null){jf=!0;var i=0,o=Be;try{var u=Hr;for(Be=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}Hr=null,zc=!1}catch(m){throw Hr!==null&&(Hr=Hr.slice(i+1)),yl(bo,Ni),m}finally{Be=o,jf=!1}}return null}var Jo=[],Xo=0,Bc=null,$c=0,Nn=[],Dn=0,Us=null,Gr=1,Kr="";function js(i,o){Jo[Xo++]=$c,Jo[Xo++]=Bc,Bc=i,$c=o}function g_(i,o,u){Nn[Dn++]=Gr,Nn[Dn++]=Kr,Nn[Dn++]=Us,Us=i;var d=Gr;i=Kr;var m=32-pn(d)-1;d&=~(1<<m),u+=1;var g=32-pn(o)+m;if(30<g){var T=m-m%5;g=(d&(1<<T)-1).toString(32),d>>=T,m-=T,Gr=1<<32-pn(o)+m|u<<m|d,Kr=g+i}else Gr=1<<g|u<<m|d,Kr=i}function zf(i){i.return!==null&&(js(i,1),g_(i,1,0))}function Bf(i){for(;i===Bc;)Bc=Jo[--Xo],Jo[Xo]=null,$c=Jo[--Xo],Jo[Xo]=null;for(;i===Us;)Us=Nn[--Dn],Nn[Dn]=null,Kr=Nn[--Dn],Nn[Dn]=null,Gr=Nn[--Dn],Nn[Dn]=null}var vn=null,wn=null,lt=!1,Hn=null;function y_(i,o){var u=Ln(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function __(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,vn=i,wn=xi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,vn=i,wn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Us!==null?{id:Gr,overflow:Kr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Ln(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,vn=i,wn=null,!0):!1;default:return!1}}function $f(i){return(i.mode&1)!==0&&(i.flags&128)===0}function qf(i){if(lt){var o=wn;if(o){var u=o;if(!__(i,o)){if($f(i))throw Error(t(418));o=xi(u.nextSibling);var d=vn;o&&__(i,o)?y_(d,u):(i.flags=i.flags&-4097|2,lt=!1,vn=i)}}else{if($f(i))throw Error(t(418));i.flags=i.flags&-4097|2,lt=!1,vn=i}}}function v_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;vn=i}function qc(i){if(i!==vn)return!1;if(!lt)return v_(i),lt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Of(i.type,i.memoizedProps)),o&&(o=wn)){if($f(i))throw w_(),Error(t(418));for(;o;)y_(i,o),o=xi(o.nextSibling)}if(v_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){wn=xi(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}wn=null}}else wn=vn?xi(i.stateNode.nextSibling):null;return!0}function w_(){for(var i=wn;i;)i=xi(i.nextSibling)}function Zo(){wn=vn=null,lt=!1}function Hf(i){Hn===null?Hn=[i]:Hn.push(i)}var lR=J.ReactCurrentBatchConfig;function Bl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var m=d,g=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===g?o.ref:(o=function(T){var b=m.refs;T===null?delete b[g]:b[g]=T},o._stringRef=g,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Hc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function E_(i){var o=i._init;return o(i._payload)}function T_(i){function o(z,F){if(i){var $=z.deletions;$===null?(z.deletions=[F],z.flags|=16):$.push(F)}}function u(z,F){if(!i)return null;for(;F!==null;)o(z,F),F=F.sibling;return null}function d(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function m(z,F){return z=ji(z,F),z.index=0,z.sibling=null,z}function g(z,F,$){return z.index=$,i?($=z.alternate,$!==null?($=$.index,$<F?(z.flags|=2,F):$):(z.flags|=2,F)):(z.flags|=1048576,F)}function T(z){return i&&z.alternate===null&&(z.flags|=2),z}function b(z,F,$,oe){return F===null||F.tag!==6?(F=Mp($,z.mode,oe),F.return=z,F):(F=m(F,$),F.return=z,F)}function L(z,F,$,oe){var ve=$.type;return ve===P?re(z,F,$.props.children,oe,$.key):F!==null&&(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ae&&E_(ve)===F.type)?(oe=m(F,$.props),oe.ref=Bl(z,F,$),oe.return=z,oe):(oe=mh($.type,$.key,$.props,null,z.mode,oe),oe.ref=Bl(z,F,$),oe.return=z,oe)}function K(z,F,$,oe){return F===null||F.tag!==4||F.stateNode.containerInfo!==$.containerInfo||F.stateNode.implementation!==$.implementation?(F=Lp($,z.mode,oe),F.return=z,F):(F=m(F,$.children||[]),F.return=z,F)}function re(z,F,$,oe,ve){return F===null||F.tag!==7?(F=Ws($,z.mode,oe,ve),F.return=z,F):(F=m(F,$),F.return=z,F)}function se(z,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return F=Mp(""+F,z.mode,$),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ee:return $=mh(F.type,F.key,F.props,null,z.mode,$),$.ref=Bl(z,null,F),$.return=z,$;case ie:return F=Lp(F,z.mode,$),F.return=z,F;case Ae:var oe=F._init;return se(z,oe(F._payload),$)}if(gt(F)||he(F))return F=Ws(F,z.mode,$,null),F.return=z,F;Hc(z,F)}return null}function te(z,F,$,oe){var ve=F!==null?F.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ve!==null?null:b(z,F,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ee:return $.key===ve?L(z,F,$,oe):null;case ie:return $.key===ve?K(z,F,$,oe):null;case Ae:return ve=$._init,te(z,F,ve($._payload),oe)}if(gt($)||he($))return ve!==null?null:re(z,F,$,oe,null);Hc(z,$)}return null}function fe(z,F,$,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get($)||null,b(F,z,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case ee:return z=z.get(oe.key===null?$:oe.key)||null,L(F,z,oe,ve);case ie:return z=z.get(oe.key===null?$:oe.key)||null,K(F,z,oe,ve);case Ae:var Ie=oe._init;return fe(z,F,$,Ie(oe._payload),ve)}if(gt(oe)||he(oe))return z=z.get($)||null,re(F,z,oe,ve,null);Hc(F,oe)}return null}function ge(z,F,$,oe){for(var ve=null,Ie=null,Se=F,Ce=F=0,Dt=null;Se!==null&&Ce<$.length;Ce++){Se.index>Ce?(Dt=Se,Se=null):Dt=Se.sibling;var He=te(z,Se,$[Ce],oe);if(He===null){Se===null&&(Se=Dt);break}i&&Se&&He.alternate===null&&o(z,Se),F=g(He,F,Ce),Ie===null?ve=He:Ie.sibling=He,Ie=He,Se=Dt}if(Ce===$.length)return u(z,Se),lt&&js(z,Ce),ve;if(Se===null){for(;Ce<$.length;Ce++)Se=se(z,$[Ce],oe),Se!==null&&(F=g(Se,F,Ce),Ie===null?ve=Se:Ie.sibling=Se,Ie=Se);return lt&&js(z,Ce),ve}for(Se=d(z,Se);Ce<$.length;Ce++)Dt=fe(Se,z,Ce,$[Ce],oe),Dt!==null&&(i&&Dt.alternate!==null&&Se.delete(Dt.key===null?Ce:Dt.key),F=g(Dt,F,Ce),Ie===null?ve=Dt:Ie.sibling=Dt,Ie=Dt);return i&&Se.forEach(function(zi){return o(z,zi)}),lt&&js(z,Ce),ve}function ye(z,F,$,oe){var ve=he($);if(typeof ve!="function")throw Error(t(150));if($=ve.call($),$==null)throw Error(t(151));for(var Ie=ve=null,Se=F,Ce=F=0,Dt=null,He=$.next();Se!==null&&!He.done;Ce++,He=$.next()){Se.index>Ce?(Dt=Se,Se=null):Dt=Se.sibling;var zi=te(z,Se,He.value,oe);if(zi===null){Se===null&&(Se=Dt);break}i&&Se&&zi.alternate===null&&o(z,Se),F=g(zi,F,Ce),Ie===null?ve=zi:Ie.sibling=zi,Ie=zi,Se=Dt}if(He.done)return u(z,Se),lt&&js(z,Ce),ve;if(Se===null){for(;!He.done;Ce++,He=$.next())He=se(z,He.value,oe),He!==null&&(F=g(He,F,Ce),Ie===null?ve=He:Ie.sibling=He,Ie=He);return lt&&js(z,Ce),ve}for(Se=d(z,Se);!He.done;Ce++,He=$.next())He=fe(Se,z,Ce,He.value,oe),He!==null&&(i&&He.alternate!==null&&Se.delete(He.key===null?Ce:He.key),F=g(He,F,Ce),Ie===null?ve=He:Ie.sibling=He,Ie=He);return i&&Se.forEach(function(zR){return o(z,zR)}),lt&&js(z,Ce),ve}function _t(z,F,$,oe){if(typeof $=="object"&&$!==null&&$.type===P&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case ee:e:{for(var ve=$.key,Ie=F;Ie!==null;){if(Ie.key===ve){if(ve=$.type,ve===P){if(Ie.tag===7){u(z,Ie.sibling),F=m(Ie,$.props.children),F.return=z,z=F;break e}}else if(Ie.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Ae&&E_(ve)===Ie.type){u(z,Ie.sibling),F=m(Ie,$.props),F.ref=Bl(z,Ie,$),F.return=z,z=F;break e}u(z,Ie);break}else o(z,Ie);Ie=Ie.sibling}$.type===P?(F=Ws($.props.children,z.mode,oe,$.key),F.return=z,z=F):(oe=mh($.type,$.key,$.props,null,z.mode,oe),oe.ref=Bl(z,F,$),oe.return=z,z=oe)}return T(z);case ie:e:{for(Ie=$.key;F!==null;){if(F.key===Ie)if(F.tag===4&&F.stateNode.containerInfo===$.containerInfo&&F.stateNode.implementation===$.implementation){u(z,F.sibling),F=m(F,$.children||[]),F.return=z,z=F;break e}else{u(z,F);break}else o(z,F);F=F.sibling}F=Lp($,z.mode,oe),F.return=z,z=F}return T(z);case Ae:return Ie=$._init,_t(z,F,Ie($._payload),oe)}if(gt($))return ge(z,F,$,oe);if(he($))return ye(z,F,$,oe);Hc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,F!==null&&F.tag===6?(u(z,F.sibling),F=m(F,$),F.return=z,z=F):(u(z,F),F=Mp($,z.mode,oe),F.return=z,z=F),T(z)):u(z,F)}return _t}var ea=T_(!0),I_=T_(!1),Gc=bi(null),Kc=null,ta=null,Gf=null;function Kf(){Gf=ta=Kc=null}function Wf(i){var o=Gc.current;ot(Gc),i._currentValue=o}function Qf(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function na(i,o){Kc=i,Gf=ta=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(rn=!0),i.firstContext=null)}function Vn(i){var o=i._currentValue;if(Gf!==i)if(i={context:i,memoizedValue:o,next:null},ta===null){if(Kc===null)throw Error(t(308));ta=i,Kc.dependencies={lanes:0,firstContext:i}}else ta=ta.next=i;return o}var zs=null;function Yf(i){zs===null?zs=[i]:zs.push(i)}function S_(i,o,u,d){var m=o.interleaved;return m===null?(u.next=u,Yf(o)):(u.next=m.next,m.next=u),o.interleaved=u,Wr(i,d)}function Wr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Di=!1;function Jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Qr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Vi(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(qe&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Wr(i,u)}return m=d.interleaved,m===null?(o.next=o,Yf(d)):(o.next=m.next,m.next=o),d.interleaved=o,Wr(i,u)}function Wc(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Il(i,u)}}function P_(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?m=g=T:g=g.next=T,u=u.next}while(u!==null);g===null?m=g=o:g=g.next=o}else m=g=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Qc(i,o,u,d){var m=i.updateQueue;Di=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,b=m.shared.pending;if(b!==null){m.shared.pending=null;var L=b,K=L.next;L.next=null,T===null?g=K:T.next=K,T=L;var re=i.alternate;re!==null&&(re=re.updateQueue,b=re.lastBaseUpdate,b!==T&&(b===null?re.firstBaseUpdate=K:b.next=K,re.lastBaseUpdate=L))}if(g!==null){var se=m.baseState;T=0,re=K=L=null,b=g;do{var te=b.lane,fe=b.eventTime;if((d&te)===te){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var ge=i,ye=b;switch(te=o,fe=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){se=ge.call(fe,se,te);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(fe,se,te):ge,te==null)break e;se=ue({},se,te);break e;case 2:Di=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,te=m.effects,te===null?m.effects=[b]:te.push(b))}else fe={eventTime:fe,lane:te,tag:b.tag,payload:b.payload,callback:b.callback,next:null},re===null?(K=re=fe,L=se):re=re.next=fe,T|=te;if(b=b.next,b===null){if(b=m.shared.pending,b===null)break;te=b,b=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);if(re===null&&(L=se),m.baseState=L,m.firstBaseUpdate=K,m.lastBaseUpdate=re,o=m.shared.interleaved,o!==null){m=o;do T|=m.lane,m=m.next;while(m!==o)}else g===null&&(m.shared.lanes=0);qs|=T,i.lanes=T,i.memoizedState=se}}function R_(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var $l={},vr=bi($l),ql=bi($l),Hl=bi($l);function Bs(i){if(i===$l)throw Error(t(174));return i}function Xf(i,o){switch(tt(Hl,o),tt(ql,i),tt(vr,$l),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:So(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=So(o,i)}ot(vr),tt(vr,o)}function ra(){ot(vr),ot(ql),ot(Hl)}function C_(i){Bs(Hl.current);var o=Bs(vr.current),u=So(o,i.type);o!==u&&(tt(ql,i),tt(vr,u))}function Zf(i){ql.current===i&&(ot(vr),ot(ql))}var ct=bi(0);function Yc(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ep=[];function tp(){for(var i=0;i<ep.length;i++)ep[i]._workInProgressVersionPrimary=null;ep.length=0}var Jc=J.ReactCurrentDispatcher,np=J.ReactCurrentBatchConfig,$s=0,ht=null,Pt=null,kt=null,Xc=!1,Gl=!1,Kl=0,uR=0;function qt(){throw Error(t(321))}function rp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!qn(i[u],o[u]))return!1;return!0}function ip(i,o,u,d,m,g){if($s=g,ht=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Jc.current=i===null||i.memoizedState===null?fR:pR,i=u(d,m),Gl){g=0;do{if(Gl=!1,Kl=0,25<=g)throw Error(t(301));g+=1,kt=Pt=null,o.updateQueue=null,Jc.current=mR,i=u(d,m)}while(Gl)}if(Jc.current=th,o=Pt!==null&&Pt.next!==null,$s=0,kt=Pt=ht=null,Xc=!1,o)throw Error(t(300));return i}function sp(){var i=Kl!==0;return Kl=0,i}function wr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ht.memoizedState=kt=i:kt=kt.next=i,kt}function On(){if(Pt===null){var i=ht.alternate;i=i!==null?i.memoizedState:null}else i=Pt.next;var o=kt===null?ht.memoizedState:kt.next;if(o!==null)kt=o,Pt=i;else{if(i===null)throw Error(t(310));Pt=i,i={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},kt===null?ht.memoizedState=kt=i:kt=kt.next=i}return kt}function Wl(i,o){return typeof o=="function"?o(i):o}function op(i){var o=On(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=Pt,m=d.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}d.baseQueue=m=g,u.pending=null}if(m!==null){g=m.next,d=d.baseState;var b=T=null,L=null,K=g;do{var re=K.lane;if(($s&re)===re)L!==null&&(L=L.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:i(d,K.action);else{var se={lane:re,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};L===null?(b=L=se,T=d):L=L.next=se,ht.lanes|=re,qs|=re}K=K.next}while(K!==null&&K!==g);L===null?T=d:L.next=b,qn(d,o.memoizedState)||(rn=!0),o.memoizedState=d,o.baseState=T,o.baseQueue=L,u.lastRenderedState=d}if(i=u.interleaved,i!==null){m=i;do g=m.lane,ht.lanes|=g,qs|=g,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function ap(i){var o=On(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,m=u.pending,g=o.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);qn(g,o.memoizedState)||(rn=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),u.lastRenderedState=g}return[g,d]}function x_(){}function b_(i,o){var u=ht,d=On(),m=o(),g=!qn(d.memoizedState,m);if(g&&(d.memoizedState=m,rn=!0),d=d.queue,lp(D_.bind(null,u,d,i),[i]),d.getSnapshot!==o||g||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,Ql(9,N_.bind(null,u,d,m,o),void 0,null),Nt===null)throw Error(t(349));($s&30)!==0||k_(u,o,m)}return m}function k_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ht.updateQueue,o===null?(o={lastEffect:null,stores:null},ht.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function N_(i,o,u,d){o.value=u,o.getSnapshot=d,V_(o)&&O_(i)}function D_(i,o,u){return u(function(){V_(o)&&O_(i)})}function V_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!qn(i,u)}catch{return!0}}function O_(i){var o=Wr(i,1);o!==null&&Qn(o,i,1,-1)}function M_(i){var o=wr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:i},o.queue=i,i=i.dispatch=dR.bind(null,ht,i),[o.memoizedState,i]}function Ql(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=ht.updateQueue,o===null?(o={lastEffect:null,stores:null},ht.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function L_(){return On().memoizedState}function Zc(i,o,u,d){var m=wr();ht.flags|=i,m.memoizedState=Ql(1|o,u,void 0,d===void 0?null:d)}function eh(i,o,u,d){var m=On();d=d===void 0?null:d;var g=void 0;if(Pt!==null){var T=Pt.memoizedState;if(g=T.destroy,d!==null&&rp(d,T.deps)){m.memoizedState=Ql(o,u,g,d);return}}ht.flags|=i,m.memoizedState=Ql(1|o,u,g,d)}function F_(i,o){return Zc(8390656,8,i,o)}function lp(i,o){return eh(2048,8,i,o)}function U_(i,o){return eh(4,2,i,o)}function j_(i,o){return eh(4,4,i,o)}function z_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function B_(i,o,u){return u=u!=null?u.concat([i]):null,eh(4,4,z_.bind(null,o,i),u)}function up(){}function $_(i,o){var u=On();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&rp(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function q_(i,o){var u=On();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&rp(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function H_(i,o,u){return($s&21)===0?(i.baseState&&(i.baseState=!1,rn=!0),i.memoizedState=u):(qn(u,o)||(u=El(),ht.lanes|=u,qs|=u,i.baseState=!0),o)}function cR(i,o){var u=Be;Be=u!==0&&4>u?u:4,i(!0);var d=np.transition;np.transition={};try{i(!1),o()}finally{Be=u,np.transition=d}}function G_(){return On().memoizedState}function hR(i,o,u){var d=Fi(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},K_(i))W_(o,u);else if(u=S_(i,o,u,d),u!==null){var m=Xt();Qn(u,i,d,m),Q_(u,o,d)}}function dR(i,o,u){var d=Fi(i),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(K_(i))W_(o,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var T=o.lastRenderedState,b=g(T,u);if(m.hasEagerState=!0,m.eagerState=b,qn(b,T)){var L=o.interleaved;L===null?(m.next=m,Yf(o)):(m.next=L.next,L.next=m),o.interleaved=m;return}}catch{}u=S_(i,o,m,d),u!==null&&(m=Xt(),Qn(u,i,d,m),Q_(u,o,d))}}function K_(i){var o=i.alternate;return i===ht||o!==null&&o===ht}function W_(i,o){Gl=Xc=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Q_(i,o,u){if((u&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Il(i,u)}}var th={readContext:Vn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},fR={readContext:Vn,useCallback:function(i,o){return wr().memoizedState=[i,o===void 0?null:o],i},useContext:Vn,useEffect:F_,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Zc(4194308,4,z_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Zc(4194308,4,i,o)},useInsertionEffect:function(i,o){return Zc(4,2,i,o)},useMemo:function(i,o){var u=wr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=wr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=hR.bind(null,ht,i),[d.memoizedState,i]},useRef:function(i){var o=wr();return i={current:i},o.memoizedState=i},useState:M_,useDebugValue:up,useDeferredValue:function(i){return wr().memoizedState=i},useTransition:function(){var i=M_(!1),o=i[0];return i=cR.bind(null,i[1]),wr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=ht,m=wr();if(lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Nt===null)throw Error(t(349));($s&30)!==0||k_(d,o,u)}m.memoizedState=u;var g={value:u,getSnapshot:o};return m.queue=g,F_(D_.bind(null,d,g,i),[i]),d.flags|=2048,Ql(9,N_.bind(null,d,g,u,o),void 0,null),u},useId:function(){var i=wr(),o=Nt.identifierPrefix;if(lt){var u=Kr,d=Gr;u=(d&~(1<<32-pn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=Kl++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=uR++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},pR={readContext:Vn,useCallback:$_,useContext:Vn,useEffect:lp,useImperativeHandle:B_,useInsertionEffect:U_,useLayoutEffect:j_,useMemo:q_,useReducer:op,useRef:L_,useState:function(){return op(Wl)},useDebugValue:up,useDeferredValue:function(i){var o=On();return H_(o,Pt.memoizedState,i)},useTransition:function(){var i=op(Wl)[0],o=On().memoizedState;return[i,o]},useMutableSource:x_,useSyncExternalStore:b_,useId:G_,unstable_isNewReconciler:!1},mR={readContext:Vn,useCallback:$_,useContext:Vn,useEffect:lp,useImperativeHandle:B_,useInsertionEffect:U_,useLayoutEffect:j_,useMemo:q_,useReducer:ap,useRef:L_,useState:function(){return ap(Wl)},useDebugValue:up,useDeferredValue:function(i){var o=On();return Pt===null?o.memoizedState=i:H_(o,Pt.memoizedState,i)},useTransition:function(){var i=ap(Wl)[0],o=On().memoizedState;return[i,o]},useMutableSource:x_,useSyncExternalStore:b_,useId:G_,unstable_isNewReconciler:!1};function Gn(i,o){if(i&&i.defaultProps){o=ue({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function cp(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:ue({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var nh={isMounted:function(i){return(i=i._reactInternals)?Bn(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=Xt(),m=Fi(i),g=Qr(d,m);g.payload=o,u!=null&&(g.callback=u),o=Vi(i,g,m),o!==null&&(Qn(o,i,m,d),Wc(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=Xt(),m=Fi(i),g=Qr(d,m);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=Vi(i,g,m),o!==null&&(Qn(o,i,m,d),Wc(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Xt(),d=Fi(i),m=Qr(u,d);m.tag=2,o!=null&&(m.callback=o),o=Vi(i,m,d),o!==null&&(Qn(o,i,d,u),Wc(o,i,d))}};function Y_(i,o,u,d,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,T):o.prototype&&o.prototype.isPureReactComponent?!Ol(u,d)||!Ol(m,g):!0}function J_(i,o,u){var d=!1,m=ki,g=o.contextType;return typeof g=="object"&&g!==null?g=Vn(g):(m=nn(o)?Fs:$t.current,d=o.contextTypes,g=(d=d!=null)?Yo(i,m):ki),o=new o(u,g),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=nh,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=g),o}function X_(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&nh.enqueueReplaceState(o,o.state,null)}function hp(i,o,u,d){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},Jf(i);var g=o.contextType;typeof g=="object"&&g!==null?m.context=Vn(g):(g=nn(o)?Fs:$t.current,m.context=Yo(i,g)),m.state=i.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(cp(i,o,g,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&nh.enqueueReplaceState(m,m.state,null),Qc(i,u,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function ia(i,o){try{var u="",d=o;do u+=Oe(d),d=d.return;while(d);var m=u}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:i,source:o,stack:m,digest:null}}function dp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function fp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var gR=typeof WeakMap=="function"?WeakMap:Map;function Z_(i,o,u){u=Qr(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){uh||(uh=!0,Cp=d),fp(i,o)},u}function ev(i,o,u){u=Qr(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){fp(i,o)}}var g=i.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){fp(i,o),typeof d!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function tv(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new gR;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),i=bR.bind(null,i,o,u),o.then(i,i))}function nv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function rv(i,o,u,d,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Qr(-1,1),o.tag=2,Vi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var yR=J.ReactCurrentOwner,rn=!1;function Jt(i,o,u,d){o.child=i===null?I_(o,null,u,d):ea(o,i.child,u,d)}function iv(i,o,u,d,m){u=u.render;var g=o.ref;return na(o,m),d=ip(i,o,u,d,g,m),u=sp(),i!==null&&!rn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Yr(i,o,m)):(lt&&u&&zf(o),o.flags|=1,Jt(i,o,d,m),o.child)}function sv(i,o,u,d,m){if(i===null){var g=u.type;return typeof g=="function"&&!Op(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=g,ov(i,o,g,d,m)):(i=mh(u.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(g=i.child,(i.lanes&m)===0){var T=g.memoizedProps;if(u=u.compare,u=u!==null?u:Ol,u(T,d)&&i.ref===o.ref)return Yr(i,o,m)}return o.flags|=1,i=ji(g,d),i.ref=o.ref,i.return=o,o.child=i}function ov(i,o,u,d,m){if(i!==null){var g=i.memoizedProps;if(Ol(g,d)&&i.ref===o.ref)if(rn=!1,o.pendingProps=d=g,(i.lanes&m)!==0)(i.flags&131072)!==0&&(rn=!0);else return o.lanes=i.lanes,Yr(i,o,m)}return pp(i,o,u,d,m)}function av(i,o,u){var d=o.pendingProps,m=d.children,g=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(oa,En),En|=u;else{if((u&1073741824)===0)return i=g!==null?g.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,tt(oa,En),En|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:u,tt(oa,En),En|=d}else g!==null?(d=g.baseLanes|u,o.memoizedState=null):d=u,tt(oa,En),En|=d;return Jt(i,o,m,u),o.child}function lv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function pp(i,o,u,d,m){var g=nn(u)?Fs:$t.current;return g=Yo(o,g),na(o,m),u=ip(i,o,u,d,g,m),d=sp(),i!==null&&!rn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Yr(i,o,m)):(lt&&d&&zf(o),o.flags|=1,Jt(i,o,u,m),o.child)}function uv(i,o,u,d,m){if(nn(u)){var g=!0;jc(o)}else g=!1;if(na(o,m),o.stateNode===null)ih(i,o),J_(o,u,d),hp(o,u,d,m),d=!0;else if(i===null){var T=o.stateNode,b=o.memoizedProps;T.props=b;var L=T.context,K=u.contextType;typeof K=="object"&&K!==null?K=Vn(K):(K=nn(u)?Fs:$t.current,K=Yo(o,K));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof T.getSnapshotBeforeUpdate=="function";se||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b!==d||L!==K)&&X_(o,T,d,K),Di=!1;var te=o.memoizedState;T.state=te,Qc(o,d,T,m),L=o.memoizedState,b!==d||te!==L||tn.current||Di?(typeof re=="function"&&(cp(o,u,re,d),L=o.memoizedState),(b=Di||Y_(o,u,b,d,te,L,K))?(se||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=L),T.props=d,T.state=L,T.context=K,d=b):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{T=o.stateNode,A_(i,o),b=o.memoizedProps,K=o.type===o.elementType?b:Gn(o.type,b),T.props=K,se=o.pendingProps,te=T.context,L=u.contextType,typeof L=="object"&&L!==null?L=Vn(L):(L=nn(u)?Fs:$t.current,L=Yo(o,L));var fe=u.getDerivedStateFromProps;(re=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(b!==se||te!==L)&&X_(o,T,d,L),Di=!1,te=o.memoizedState,T.state=te,Qc(o,d,T,m);var ge=o.memoizedState;b!==se||te!==ge||tn.current||Di?(typeof fe=="function"&&(cp(o,u,fe,d),ge=o.memoizedState),(K=Di||Y_(o,u,K,d,te,ge,L)||!1)?(re||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,ge,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,ge,L)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ge),T.props=d,T.state=ge,T.context=L,d=K):(typeof T.componentDidUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&te===i.memoizedState||(o.flags|=1024),d=!1)}return mp(i,o,u,d,g,m)}function mp(i,o,u,d,m,g){lv(i,o);var T=(o.flags&128)!==0;if(!d&&!T)return m&&p_(o,u,!1),Yr(i,o,g);d=o.stateNode,yR.current=o;var b=T&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&T?(o.child=ea(o,i.child,null,g),o.child=ea(o,null,b,g)):Jt(i,o,b,g),o.memoizedState=d.state,m&&p_(o,u,!0),o.child}function cv(i){var o=i.stateNode;o.pendingContext?d_(i,o.pendingContext,o.pendingContext!==o.context):o.context&&d_(i,o.context,!1),Xf(i,o.containerInfo)}function hv(i,o,u,d,m){return Zo(),Hf(m),o.flags|=256,Jt(i,o,u,d),o.child}var gp={dehydrated:null,treeContext:null,retryLane:0};function yp(i){return{baseLanes:i,cachePool:null,transitions:null}}function dv(i,o,u){var d=o.pendingProps,m=ct.current,g=!1,T=(o.flags&128)!==0,b;if((b=T)||(b=i!==null&&i.memoizedState===null?!1:(m&2)!==0),b?(g=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),tt(ct,m&1),i===null)return qf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=d.children,i=d.fallback,g?(d=o.mode,g=o.child,T={mode:"hidden",children:T},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=T):g=gh(T,d,0,null),i=Ws(i,d,u,null),g.return=o,i.return=o,g.sibling=i,o.child=g,o.child.memoizedState=yp(u),o.memoizedState=gp,i):_p(o,T));if(m=i.memoizedState,m!==null&&(b=m.dehydrated,b!==null))return _R(i,o,T,d,b,m,u);if(g){g=d.fallback,T=o.mode,m=i.child,b=m.sibling;var L={mode:"hidden",children:d.children};return(T&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=L,o.deletions=null):(d=ji(m,L),d.subtreeFlags=m.subtreeFlags&14680064),b!==null?g=ji(b,g):(g=Ws(g,T,u,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,T=i.child.memoizedState,T=T===null?yp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},g.memoizedState=T,g.childLanes=i.childLanes&~u,o.memoizedState=gp,d}return g=i.child,i=g.sibling,d=ji(g,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function _p(i,o){return o=gh({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function rh(i,o,u,d){return d!==null&&Hf(d),ea(o,i.child,null,u),i=_p(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function _R(i,o,u,d,m,g,T){if(u)return o.flags&256?(o.flags&=-257,d=dp(Error(t(422))),rh(i,o,T,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(g=d.fallback,m=o.mode,d=gh({mode:"visible",children:d.children},m,0,null),g=Ws(g,m,T,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,(o.mode&1)!==0&&ea(o,i.child,null,T),o.child.memoizedState=yp(T),o.memoizedState=gp,g);if((o.mode&1)===0)return rh(i,o,T,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var b=d.dgst;return d=b,g=Error(t(419)),d=dp(g,d,void 0),rh(i,o,T,d)}if(b=(T&i.childLanes)!==0,rn||b){if(d=Nt,d!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|T))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,Wr(i,m),Qn(d,i,m,-1))}return Vp(),d=dp(Error(t(421))),rh(i,o,T,d)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=kR.bind(null,i),m._reactRetry=o,null):(i=g.treeContext,wn=xi(m.nextSibling),vn=o,lt=!0,Hn=null,i!==null&&(Nn[Dn++]=Gr,Nn[Dn++]=Kr,Nn[Dn++]=Us,Gr=i.id,Kr=i.overflow,Us=o),o=_p(o,d.children),o.flags|=4096,o)}function fv(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Qf(i.return,o,u)}function vp(i,o,u,d,m){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=u,g.tailMode=m)}function pv(i,o,u){var d=o.pendingProps,m=d.revealOrder,g=d.tail;if(Jt(i,o,d.children,u),d=ct.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&fv(i,u,o);else if(i.tag===19)fv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(tt(ct,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&Yc(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),vp(o,!1,m,u,g);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Yc(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}vp(o,!0,u,null,g);break;case"together":vp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ih(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Yr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),qs|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=ji(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=ji(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function vR(i,o,u){switch(o.tag){case 3:cv(o),Zo();break;case 5:C_(o);break;case 1:nn(o.type)&&jc(o);break;case 4:Xf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;tt(Gc,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(tt(ct,ct.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?dv(i,o,u):(tt(ct,ct.current&1),i=Yr(i,o,u),i!==null?i.sibling:null);tt(ct,ct.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(i.flags&128)!==0){if(d)return pv(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(ct,ct.current),d)break;return null;case 22:case 23:return o.lanes=0,av(i,o,u)}return Yr(i,o,u)}var mv,wp,gv,yv;mv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},wp=function(){},gv=function(i,o,u,d){var m=i.memoizedProps;if(m!==d){i=o.stateNode,Bs(vr.current);var g=null;switch(u){case"input":m=To(i,m),d=To(i,d),g=[];break;case"select":m=ue({},m,{value:void 0}),d=ue({},d,{value:void 0}),g=[];break;case"textarea":m=cl(i,m),d=cl(i,d),g=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Lc)}zn(u,d);var T;u=null;for(K in m)if(!d.hasOwnProperty(K)&&m.hasOwnProperty(K)&&m[K]!=null)if(K==="style"){var b=m[K];for(T in b)b.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in d){var L=d[K];if(b=m?.[K],d.hasOwnProperty(K)&&L!==b&&(L!=null||b!=null))if(K==="style")if(b){for(T in b)!b.hasOwnProperty(T)||L&&L.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in L)L.hasOwnProperty(T)&&b[T]!==L[T]&&(u||(u={}),u[T]=L[T])}else u||(g||(g=[]),g.push(K,u)),u=L;else K==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,b=b?b.__html:void 0,L!=null&&b!==L&&(g=g||[]).push(K,L)):K==="children"?typeof L!="string"&&typeof L!="number"||(g=g||[]).push(K,""+L):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(s.hasOwnProperty(K)?(L!=null&&K==="onScroll"&&st("scroll",i),g||b===L||(g=[])):(g=g||[]).push(K,L))}u&&(g=g||[]).push("style",u);var K=g;(o.updateQueue=K)&&(o.flags|=4)}},yv=function(i,o,u,d){u!==d&&(o.flags|=4)};function Yl(i,o){if(!lt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Ht(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function wR(i,o,u){var d=o.pendingProps;switch(Bf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(o),null;case 1:return nn(o.type)&&Uc(),Ht(o),null;case 3:return d=o.stateNode,ra(),ot(tn),ot($t),tp(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(qc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hn!==null&&(kp(Hn),Hn=null))),wp(i,o),Ht(o),null;case 5:Zf(o);var m=Bs(Hl.current);if(u=o.type,i!==null&&o.stateNode!=null)gv(i,o,u,d,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return Ht(o),null}if(i=Bs(vr.current),qc(o)){d=o.stateNode,u=o.type;var g=o.memoizedProps;switch(d[_r]=o,d[jl]=g,i=(o.mode&1)!==0,u){case"dialog":st("cancel",d),st("close",d);break;case"iframe":case"object":case"embed":st("load",d);break;case"video":case"audio":for(m=0;m<Ll.length;m++)st(Ll[m],d);break;case"source":st("error",d);break;case"img":case"image":case"link":st("error",d),st("load",d);break;case"details":st("toggle",d);break;case"input":lc(d,g),st("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},st("invalid",d);break;case"textarea":hl(d,g),st("invalid",d)}zn(u,g),m=null;for(var T in g)if(g.hasOwnProperty(T)){var b=g[T];T==="children"?typeof b=="string"?d.textContent!==b&&(g.suppressHydrationWarning!==!0&&Mc(d.textContent,b,i),m=["children",b]):typeof b=="number"&&d.textContent!==""+b&&(g.suppressHydrationWarning!==!0&&Mc(d.textContent,b,i),m=["children",""+b]):s.hasOwnProperty(T)&&b!=null&&T==="onScroll"&&st("scroll",d)}switch(u){case"input":di(d),ul(d,g,!0);break;case"textarea":di(d),fi(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Lc)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=dl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=T.createElement(u,{is:d.is}):(i=T.createElement(u),u==="select"&&(T=i,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):i=T.createElementNS(i,u),i[_r]=o,i[jl]=d,mv(i,o,!1,!1),o.stateNode=i;e:{switch(T=Po(u,d),u){case"dialog":st("cancel",i),st("close",i),m=d;break;case"iframe":case"object":case"embed":st("load",i),m=d;break;case"video":case"audio":for(m=0;m<Ll.length;m++)st(Ll[m],i);m=d;break;case"source":st("error",i),m=d;break;case"img":case"image":case"link":st("error",i),st("load",i),m=d;break;case"details":st("toggle",i),m=d;break;case"input":lc(i,d),m=To(i,d),st("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=ue({},d,{value:void 0}),st("invalid",i);break;case"textarea":hl(i,d),m=cl(i,d),st("invalid",i);break;default:m=d}zn(u,m),b=m;for(g in b)if(b.hasOwnProperty(g)){var L=b[g];g==="style"?Ao(i,L):g==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&cc(i,L)):g==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Is(i,L):typeof L=="number"&&Is(i,""+L):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(s.hasOwnProperty(g)?L!=null&&g==="onScroll"&&st("scroll",i):L!=null&&G(i,g,L,T))}switch(u){case"input":di(i),ul(i,d,!1);break;case"textarea":di(i),fi(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Ue(d.value));break;case"select":i.multiple=!!d.multiple,g=d.value,g!=null?jn(i,!!d.multiple,g,!1):d.defaultValue!=null&&jn(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Lc)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ht(o),null;case 6:if(i&&o.stateNode!=null)yv(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=Bs(Hl.current),Bs(vr.current),qc(o)){if(d=o.stateNode,u=o.memoizedProps,d[_r]=o,(g=d.nodeValue!==u)&&(i=vn,i!==null))switch(i.tag){case 3:Mc(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Mc(d.nodeValue,u,(i.mode&1)!==0)}g&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[_r]=o,o.stateNode=d}return Ht(o),null;case 13:if(ot(ct),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(lt&&wn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)w_(),Zo(),o.flags|=98560,g=!1;else if(g=qc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(t(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[_r]=o}else Zo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ht(o),g=!1}else Hn!==null&&(kp(Hn),Hn=null),g=!0;if(!g)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(ct.current&1)!==0?Rt===0&&(Rt=3):Vp())),o.updateQueue!==null&&(o.flags|=4),Ht(o),null);case 4:return ra(),wp(i,o),i===null&&Fl(o.stateNode.containerInfo),Ht(o),null;case 10:return Wf(o.type._context),Ht(o),null;case 17:return nn(o.type)&&Uc(),Ht(o),null;case 19:if(ot(ct),g=o.memoizedState,g===null)return Ht(o),null;if(d=(o.flags&128)!==0,T=g.rendering,T===null)if(d)Yl(g,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(T=Yc(i),T!==null){for(o.flags|=128,Yl(g,!1),d=T.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)g=u,i=d,g.flags&=14680066,T=g.alternate,T===null?(g.childLanes=0,g.lanes=i,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=T.childLanes,g.lanes=T.lanes,g.child=T.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=T.memoizedProps,g.memoizedState=T.memoizedState,g.updateQueue=T.updateQueue,g.type=T.type,i=T.dependencies,g.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return tt(ct,ct.current&1|2),o.child}i=i.sibling}g.tail!==null&&it()>aa&&(o.flags|=128,d=!0,Yl(g,!1),o.lanes=4194304)}else{if(!d)if(i=Yc(T),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Yl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!lt)return Ht(o),null}else 2*it()-g.renderingStartTime>aa&&u!==1073741824&&(o.flags|=128,d=!0,Yl(g,!1),o.lanes=4194304);g.isBackwards?(T.sibling=o.child,o.child=T):(u=g.last,u!==null?u.sibling=T:o.child=T,g.last=T)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=it(),o.sibling=null,u=ct.current,tt(ct,d?u&1|2:u&1),o):(Ht(o),null);case 22:case 23:return Dp(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(En&1073741824)!==0&&(Ht(o),o.subtreeFlags&6&&(o.flags|=8192)):Ht(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function ER(i,o){switch(Bf(o),o.tag){case 1:return nn(o.type)&&Uc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ra(),ot(tn),ot($t),tp(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Zf(o),null;case 13:if(ot(ct),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Zo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ot(ct),null;case 4:return ra(),null;case 10:return Wf(o.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var sh=!1,Gt=!1,TR=typeof WeakSet=="function"?WeakSet:Set,pe=null;function sa(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){pt(i,o,d)}else u.current=null}function Ep(i,o,u){try{u()}catch(d){pt(i,o,d)}}var _v=!1;function IR(i,o){if(Df=zr,i=Yy(),Af(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var T=0,b=-1,L=-1,K=0,re=0,se=i,te=null;t:for(;;){for(var fe;se!==u||m!==0&&se.nodeType!==3||(b=T+m),se!==g||d!==0&&se.nodeType!==3||(L=T+d),se.nodeType===3&&(T+=se.nodeValue.length),(fe=se.firstChild)!==null;)te=se,se=fe;for(;;){if(se===i)break t;if(te===u&&++K===m&&(b=T),te===g&&++re===d&&(L=T),(fe=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=fe}u=b===-1||L===-1?null:{start:b,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Vf={focusedElem:i,selectionRange:u},zr=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,_t=ge.memoizedState,z=o.stateNode,F=z.getSnapshotBeforeUpdate(o.elementType===o.type?ye:Gn(o.type,ye),_t);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var $=o.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){pt(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=_v,_v=!1,ge}function Jl(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var g=m.destroy;m.destroy=void 0,g!==void 0&&Ep(o,u,g)}m=m.next}while(m!==d)}}function oh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Tp(i){var o=i.ref;if(o!==null){var u=i.stateNode;i.tag,i=u,typeof o=="function"?o(i):o.current=i}}function vv(i){var o=i.alternate;o!==null&&(i.alternate=null,vv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[_r],delete o[jl],delete o[Ff],delete o[sR],delete o[oR])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function wv(i){return i.tag===5||i.tag===3||i.tag===4}function Ev(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||wv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ip(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Lc));else if(d!==4&&(i=i.child,i!==null))for(Ip(i,o,u),i=i.sibling;i!==null;)Ip(i,o,u),i=i.sibling}function Sp(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Sp(i,o,u),i=i.sibling;i!==null;)Sp(i,o,u),i=i.sibling}var Ut=null,Kn=!1;function Oi(i,o,u){for(u=u.child;u!==null;)Tv(i,o,u),u=u.sibling}function Tv(i,o,u){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Cs,u)}catch{}switch(u.tag){case 5:Gt||sa(u,o);case 6:var d=Ut,m=Kn;Ut=null,Oi(i,o,u),Ut=d,Kn=m,Ut!==null&&(Kn?(i=Ut,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Ut.removeChild(u.stateNode));break;case 18:Ut!==null&&(Kn?(i=Ut,u=u.stateNode,i.nodeType===8?Lf(i.parentNode,u):i.nodeType===1&&Lf(i,u),Ai(i)):Lf(Ut,u.stateNode));break;case 4:d=Ut,m=Kn,Ut=u.stateNode.containerInfo,Kn=!0,Oi(i,o,u),Ut=d,Kn=m;break;case 0:case 11:case 14:case 15:if(!Gt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var g=m,T=g.destroy;g=g.tag,T!==void 0&&((g&2)!==0||(g&4)!==0)&&Ep(u,o,T),m=m.next}while(m!==d)}Oi(i,o,u);break;case 1:if(!Gt&&(sa(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(b){pt(u,o,b)}Oi(i,o,u);break;case 21:Oi(i,o,u);break;case 22:u.mode&1?(Gt=(d=Gt)||u.memoizedState!==null,Oi(i,o,u),Gt=d):Oi(i,o,u);break;default:Oi(i,o,u)}}function Iv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new TR),o.forEach(function(d){var m=NR.bind(null,i,d);u.has(d)||(u.add(d),d.then(m,m))})}}function Wn(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var g=i,T=o,b=T;e:for(;b!==null;){switch(b.tag){case 5:Ut=b.stateNode,Kn=!1;break e;case 3:Ut=b.stateNode.containerInfo,Kn=!0;break e;case 4:Ut=b.stateNode.containerInfo,Kn=!0;break e}b=b.return}if(Ut===null)throw Error(t(160));Tv(g,T,m),Ut=null,Kn=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(K){pt(m,o,K)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Sv(o,i),o=o.sibling}function Sv(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Wn(o,i),Er(i),d&4){try{Jl(3,i,i.return),oh(3,i)}catch(ye){pt(i,i.return,ye)}try{Jl(5,i,i.return)}catch(ye){pt(i,i.return,ye)}}break;case 1:Wn(o,i),Er(i),d&512&&u!==null&&sa(u,u.return);break;case 5:if(Wn(o,i),Er(i),d&512&&u!==null&&sa(u,u.return),i.flags&32){var m=i.stateNode;try{Is(m,"")}catch(ye){pt(i,i.return,ye)}}if(d&4&&(m=i.stateNode,m!=null)){var g=i.memoizedProps,T=u!==null?u.memoizedProps:g,b=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{b==="input"&&g.type==="radio"&&g.name!=null&&Io(m,g),Po(b,T);var K=Po(b,g);for(T=0;T<L.length;T+=2){var re=L[T],se=L[T+1];re==="style"?Ao(m,se):re==="dangerouslySetInnerHTML"?cc(m,se):re==="children"?Is(m,se):G(m,re,se,K)}switch(b){case"input":Ts(m,g);break;case"textarea":uc(m,g);break;case"select":var te=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?jn(m,!!g.multiple,fe,!1):te!==!!g.multiple&&(g.defaultValue!=null?jn(m,!!g.multiple,g.defaultValue,!0):jn(m,!!g.multiple,g.multiple?[]:"",!1))}m[jl]=g}catch(ye){pt(i,i.return,ye)}}break;case 6:if(Wn(o,i),Er(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,g=i.memoizedProps;try{m.nodeValue=g}catch(ye){pt(i,i.return,ye)}}break;case 3:if(Wn(o,i),Er(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Ai(o.containerInfo)}catch(ye){pt(i,i.return,ye)}break;case 4:Wn(o,i),Er(i);break;case 13:Wn(o,i),Er(i),m=i.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Rp=it())),d&4&&Iv(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(Gt=(K=Gt)||re,Wn(o,i),Gt=K):Wn(o,i),Er(i),d&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!re&&(i.mode&1)!==0)for(pe=i,re=i.child;re!==null;){for(se=pe=re;pe!==null;){switch(te=pe,fe=te.child,te.tag){case 0:case 11:case 14:case 15:Jl(4,te,te.return);break;case 1:sa(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){d=te,u=te.return;try{o=d,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(ye){pt(d,u,ye)}}break;case 5:sa(te,te.return);break;case 22:if(te.memoizedState!==null){Rv(se);continue}}fe!==null?(fe.return=te,pe=fe):Rv(se)}re=re.sibling}e:for(re=null,se=i;;){if(se.tag===5){if(re===null){re=se;try{m=se.stateNode,K?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(b=se.stateNode,L=se.memoizedProps.style,T=L!=null&&L.hasOwnProperty("display")?L.display:null,b.style.display=gi("display",T))}catch(ye){pt(i,i.return,ye)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=K?"":se.memoizedProps}catch(ye){pt(i,i.return,ye)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===i)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===i)break e;for(;se.sibling===null;){if(se.return===null||se.return===i)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Wn(o,i),Er(i),d&4&&Iv(i);break;case 21:break;default:Wn(o,i),Er(i)}}function Er(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(wv(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Is(m,""),d.flags&=-33);var g=Ev(i);Sp(i,g,m);break;case 3:case 4:var T=d.stateNode.containerInfo,b=Ev(i);Ip(i,b,T);break;default:throw Error(t(161))}}catch(L){pt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function SR(i,o,u){pe=i,Av(i)}function Av(i,o,u){for(var d=(i.mode&1)!==0;pe!==null;){var m=pe,g=m.child;if(m.tag===22&&d){var T=m.memoizedState!==null||sh;if(!T){var b=m.alternate,L=b!==null&&b.memoizedState!==null||Gt;b=sh;var K=Gt;if(sh=T,(Gt=L)&&!K)for(pe=m;pe!==null;)T=pe,L=T.child,T.tag===22&&T.memoizedState!==null?Cv(m):L!==null?(L.return=T,pe=L):Cv(m);for(;g!==null;)pe=g,Av(g),g=g.sibling;pe=m,sh=b,Gt=K}Pv(i)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,pe=g):Pv(i)}}function Pv(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Gt||oh(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Gt)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:Gn(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=o.updateQueue;g!==null&&R_(o,g,d);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}R_(o,T,u)}break;case 5:var b=o.stateNode;if(u===null&&o.flags&4){u=b;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var K=o.alternate;if(K!==null){var re=K.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&Ai(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||o.flags&512&&Tp(o)}catch(te){pt(o,o.return,te)}}if(o===i){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function Rv(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function Cv(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{oh(4,o)}catch(L){pt(o,u,L)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(L){pt(o,m,L)}}var g=o.return;try{Tp(o)}catch(L){pt(o,g,L)}break;case 5:var T=o.return;try{Tp(o)}catch(L){pt(o,T,L)}}}catch(L){pt(o,o.return,L)}if(o===i){pe=null;break}var b=o.sibling;if(b!==null){b.return=o.return,pe=b;break}pe=o.return}}var AR=Math.ceil,ah=J.ReactCurrentDispatcher,Ap=J.ReactCurrentOwner,Mn=J.ReactCurrentBatchConfig,qe=0,Nt=null,It=null,jt=0,En=0,oa=bi(0),Rt=0,Xl=null,qs=0,lh=0,Pp=0,Zl=null,sn=null,Rp=0,aa=1/0,Jr=null,uh=!1,Cp=null,Mi=null,ch=!1,Li=null,hh=0,eu=0,xp=null,dh=-1,fh=0;function Xt(){return(qe&6)!==0?it():dh!==-1?dh:dh=it()}function Fi(i){return(i.mode&1)===0?1:(qe&2)!==0&&jt!==0?jt&-jt:lR.transition!==null?(fh===0&&(fh=El()),fh):(i=Be,i!==0||(i=window.event,i=i===void 0?16:Mo(i.type)),i)}function Qn(i,o,u,d){if(50<eu)throw eu=0,xp=null,Error(t(185));Ns(i,u,d),((qe&2)===0||i!==Nt)&&(i===Nt&&((qe&2)===0&&(lh|=u),Rt===4&&Ui(i,jt)),on(i,d),u===1&&qe===0&&(o.mode&1)===0&&(aa=it()+500,zc&&Ni()))}function on(i,o){var u=i.callbackNode;ks(i,o);var d=Fr(i,i===Nt?jt:0);if(d===0)u!==null&&xo(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&xo(u),o===1)i.tag===0?aR(bv.bind(null,i)):m_(bv.bind(null,i)),rR(function(){(qe&6)===0&&Ni()}),u=null;else{switch(lr(d)){case 1:u=bo;break;case 4:u=_l;break;case 16:u=Rs;break;case 536870912:u=ko;break;default:u=Rs}u=Fv(u,xv.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function xv(i,o){if(dh=-1,fh=0,(qe&6)!==0)throw Error(t(327));var u=i.callbackNode;if(la()&&i.callbackNode!==u)return null;var d=Fr(i,i===Nt?jt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=ph(i,d);else{o=d;var m=qe;qe|=2;var g=Nv();(Nt!==i||jt!==o)&&(Jr=null,aa=it()+500,Gs(i,o));do try{CR();break}catch(b){kv(i,b)}while(!0);Kf(),ah.current=g,qe=m,It!==null?o=0:(Nt=null,jt=0,o=Rt)}if(o!==0){if(o===2&&(m=wl(i),m!==0&&(d=m,o=bp(i,m))),o===1)throw u=Xl,Gs(i,0),Ui(i,d),on(i,it()),u;if(o===6)Ui(i,d);else{if(m=i.current.alternate,(d&30)===0&&!PR(m)&&(o=ph(i,d),o===2&&(g=wl(i),g!==0&&(d=g,o=bp(i,g))),o===1))throw u=Xl,Gs(i,0),Ui(i,d),on(i,it()),u;switch(i.finishedWork=m,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Ks(i,sn,Jr);break;case 3:if(Ui(i,d),(d&130023424)===d&&(o=Rp+500-it(),10<o)){if(Fr(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){Xt(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=Mf(Ks.bind(null,i,sn,Jr),o);break}Ks(i,sn,Jr);break;case 4:if(Ui(i,d),(d&4194240)===d)break;for(o=i.eventTimes,m=-1;0<d;){var T=31-pn(d);g=1<<T,T=o[T],T>m&&(m=T),d&=~g}if(d=m,d=it()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*AR(d/1960))-d,10<d){i.timeoutHandle=Mf(Ks.bind(null,i,sn,Jr),d);break}Ks(i,sn,Jr);break;case 5:Ks(i,sn,Jr);break;default:throw Error(t(329))}}}return on(i,it()),i.callbackNode===u?xv.bind(null,i):null}function bp(i,o){var u=Zl;return i.current.memoizedState.isDehydrated&&(Gs(i,o).flags|=256),i=ph(i,o),i!==2&&(o=sn,sn=u,o!==null&&kp(o)),i}function kp(i){sn===null?sn=i:sn.push.apply(sn,i)}function PR(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],g=m.getSnapshot;m=m.value;try{if(!qn(g(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ui(i,o){for(o&=~Pp,o&=~lh,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-pn(o),d=1<<u;i[u]=-1,o&=~d}}function bv(i){if((qe&6)!==0)throw Error(t(327));la();var o=Fr(i,0);if((o&1)===0)return on(i,it()),null;var u=ph(i,o);if(i.tag!==0&&u===2){var d=wl(i);d!==0&&(o=d,u=bp(i,d))}if(u===1)throw u=Xl,Gs(i,0),Ui(i,o),on(i,it()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ks(i,sn,Jr),on(i,it()),null}function Np(i,o){var u=qe;qe|=1;try{return i(o)}finally{qe=u,qe===0&&(aa=it()+500,zc&&Ni())}}function Hs(i){Li!==null&&Li.tag===0&&(qe&6)===0&&la();var o=qe;qe|=1;var u=Mn.transition,d=Be;try{if(Mn.transition=null,Be=1,i)return i()}finally{Be=d,Mn.transition=u,qe=o,(qe&6)===0&&Ni()}}function Dp(){En=oa.current,ot(oa)}function Gs(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,nR(u)),It!==null)for(u=It.return;u!==null;){var d=u;switch(Bf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Uc();break;case 3:ra(),ot(tn),ot($t),tp();break;case 5:Zf(d);break;case 4:ra();break;case 13:ot(ct);break;case 19:ot(ct);break;case 10:Wf(d.type._context);break;case 22:case 23:Dp()}u=u.return}if(Nt=i,It=i=ji(i.current,null),jt=En=o,Rt=0,Xl=null,Pp=lh=qs=0,sn=Zl=null,zs!==null){for(o=0;o<zs.length;o++)if(u=zs[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,g=u.pending;if(g!==null){var T=g.next;g.next=m,d.next=T}u.pending=d}zs=null}return i}function kv(i,o){do{var u=It;try{if(Kf(),Jc.current=th,Xc){for(var d=ht.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Xc=!1}if($s=0,kt=Pt=ht=null,Gl=!1,Kl=0,Ap.current=null,u===null||u.return===null){Rt=1,Xl=o,It=null;break}e:{var g=i,T=u.return,b=u,L=o;if(o=jt,b.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var K=L,re=b,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=nv(T);if(fe!==null){fe.flags&=-257,rv(fe,T,b,g,o),fe.mode&1&&tv(g,K,o),o=fe,L=K;var ge=o.updateQueue;if(ge===null){var ye=new Set;ye.add(L),o.updateQueue=ye}else ge.add(L);break e}else{if((o&1)===0){tv(g,K,o),Vp();break e}L=Error(t(426))}}else if(lt&&b.mode&1){var _t=nv(T);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),rv(_t,T,b,g,o),Hf(ia(L,b));break e}}g=L=ia(L,b),Rt!==4&&(Rt=2),Zl===null?Zl=[g]:Zl.push(g),g=T;do{switch(g.tag){case 3:g.flags|=65536,o&=-o,g.lanes|=o;var z=Z_(g,L,o);P_(g,z);break e;case 1:b=L;var F=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Mi===null||!Mi.has($)))){g.flags|=65536,o&=-o,g.lanes|=o;var oe=ev(g,b,o);P_(g,oe);break e}}g=g.return}while(g!==null)}Vv(u)}catch(ve){o=ve,It===u&&u!==null&&(It=u=u.return);continue}break}while(!0)}function Nv(){var i=ah.current;return ah.current=th,i===null?th:i}function Vp(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Nt===null||(qs&268435455)===0&&(lh&268435455)===0||Ui(Nt,jt)}function ph(i,o){var u=qe;qe|=2;var d=Nv();(Nt!==i||jt!==o)&&(Jr=null,Gs(i,o));do try{RR();break}catch(m){kv(i,m)}while(!0);if(Kf(),qe=u,ah.current=d,It!==null)throw Error(t(261));return Nt=null,jt=0,Rt}function RR(){for(;It!==null;)Dv(It)}function CR(){for(;It!==null&&!Ps();)Dv(It)}function Dv(i){var o=Lv(i.alternate,i,En);i.memoizedProps=i.pendingProps,o===null?Vv(i):It=o,Ap.current=null}function Vv(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=wR(u,o,En),u!==null){It=u;return}}else{if(u=ER(u,o),u!==null){u.flags&=32767,It=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Rt=6,It=null;return}}if(o=o.sibling,o!==null){It=o;return}It=o=i}while(o!==null);Rt===0&&(Rt=5)}function Ks(i,o,u){var d=Be,m=Mn.transition;try{Mn.transition=null,Be=1,xR(i,o,u,d)}finally{Mn.transition=m,Be=d}return null}function xR(i,o,u,d){do la();while(Li!==null);if((qe&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var g=u.lanes|u.childLanes;if(wf(i,g),i===Nt&&(It=Nt=null,jt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ch||(ch=!0,Fv(Rs,function(){return la(),null})),g=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||g){g=Mn.transition,Mn.transition=null;var T=Be;Be=1;var b=qe;qe|=4,Ap.current=null,IR(i,u),Sv(u,i),QP(Vf),zr=!!Df,Vf=Df=null,i.current=u,SR(u),Lr(),qe=b,Be=T,Mn.transition=g}else i.current=u;if(ch&&(ch=!1,Li=i,hh=m),g=i.pendingLanes,g===0&&(Mi=null),Ec(u.stateNode),on(i,it()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(uh)throw uh=!1,i=Cp,Cp=null,i;return(hh&1)!==0&&i.tag!==0&&la(),g=i.pendingLanes,(g&1)!==0?i===xp?eu++:(eu=0,xp=i):eu=0,Ni(),null}function la(){if(Li!==null){var i=lr(hh),o=Mn.transition,u=Be;try{if(Mn.transition=null,Be=16>i?16:i,Li===null)var d=!1;else{if(i=Li,Li=null,hh=0,(qe&6)!==0)throw Error(t(331));var m=qe;for(qe|=4,pe=i.current;pe!==null;){var g=pe,T=g.child;if((pe.flags&16)!==0){var b=g.deletions;if(b!==null){for(var L=0;L<b.length;L++){var K=b[L];for(pe=K;pe!==null;){var re=pe;switch(re.tag){case 0:case 11:case 15:Jl(8,re,g)}var se=re.child;if(se!==null)se.return=re,pe=se;else for(;pe!==null;){re=pe;var te=re.sibling,fe=re.return;if(vv(re),re===K){pe=null;break}if(te!==null){te.return=fe,pe=te;break}pe=fe}}}var ge=g.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var _t=ye.sibling;ye.sibling=null,ye=_t}while(ye!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&T!==null)T.return=g,pe=T;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Jl(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,pe=z;break e}pe=g.return}}var F=i.current;for(pe=F;pe!==null;){T=pe;var $=T.child;if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,pe=$;else e:for(T=F;pe!==null;){if(b=pe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:oh(9,b)}}catch(ve){pt(b,b.return,ve)}if(b===T){pe=null;break e}var oe=b.sibling;if(oe!==null){oe.return=b.return,pe=oe;break e}pe=b.return}}if(qe=m,Ni(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Cs,i)}catch{}d=!0}return d}finally{Be=u,Mn.transition=o}}return!1}function Ov(i,o,u){o=ia(u,o),o=Z_(i,o,1),i=Vi(i,o,1),o=Xt(),i!==null&&(Ns(i,1,o),on(i,o))}function pt(i,o,u){if(i.tag===3)Ov(i,i,u);else for(;o!==null;){if(o.tag===3){Ov(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Mi===null||!Mi.has(d))){i=ia(u,i),i=ev(o,i,1),o=Vi(o,i,1),i=Xt(),o!==null&&(Ns(o,1,i),on(o,i));break}}o=o.return}}function bR(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=Xt(),i.pingedLanes|=i.suspendedLanes&u,Nt===i&&(jt&u)===u&&(Rt===4||Rt===3&&(jt&130023424)===jt&&500>it()-Rp?Gs(i,0):Pp|=u),on(i,o)}function Mv(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ti,Ti<<=1,(Ti&130023424)===0&&(Ti=4194304)));var u=Xt();i=Wr(i,o),i!==null&&(Ns(i,o,u),on(i,u))}function kR(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Mv(i,u)}function NR(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),Mv(i,u)}var Lv;Lv=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||tn.current)rn=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return rn=!1,vR(i,o,u);rn=(i.flags&131072)!==0}else rn=!1,lt&&(o.flags&1048576)!==0&&g_(o,$c,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;ih(i,o),i=o.pendingProps;var m=Yo(o,$t.current);na(o,u),m=ip(null,o,d,i,m,u);var g=sp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,nn(d)?(g=!0,jc(o)):g=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Jf(o),m.updater=nh,o.stateNode=m,m._reactInternals=o,hp(o,d,i,u),o=mp(null,o,d,!0,g,u)):(o.tag=0,lt&&g&&zf(o),Jt(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(ih(i,o),i=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=VR(d),i=Gn(d,i),m){case 0:o=pp(null,o,d,i,u);break e;case 1:o=uv(null,o,d,i,u);break e;case 11:o=iv(null,o,d,i,u);break e;case 14:o=sv(null,o,d,Gn(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Gn(d,m),pp(i,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Gn(d,m),uv(i,o,d,m,u);case 3:e:{if(cv(o),i===null)throw Error(t(387));d=o.pendingProps,g=o.memoizedState,m=g.element,A_(i,o),Qc(o,d,null,u);var T=o.memoizedState;if(d=T.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){m=ia(Error(t(423)),o),o=hv(i,o,d,u,m);break e}else if(d!==m){m=ia(Error(t(424)),o),o=hv(i,o,d,u,m);break e}else for(wn=xi(o.stateNode.containerInfo.firstChild),vn=o,lt=!0,Hn=null,u=I_(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Zo(),d===m){o=Yr(i,o,u);break e}Jt(i,o,d,u)}o=o.child}return o;case 5:return C_(o),i===null&&qf(o),d=o.type,m=o.pendingProps,g=i!==null?i.memoizedProps:null,T=m.children,Of(d,m)?T=null:g!==null&&Of(d,g)&&(o.flags|=32),lv(i,o),Jt(i,o,T,u),o.child;case 6:return i===null&&qf(o),null;case 13:return dv(i,o,u);case 4:return Xf(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=ea(o,null,d,u):Jt(i,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Gn(d,m),iv(i,o,d,m,u);case 7:return Jt(i,o,o.pendingProps,u),o.child;case 8:return Jt(i,o,o.pendingProps.children,u),o.child;case 12:return Jt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,g=o.memoizedProps,T=m.value,tt(Gc,d._currentValue),d._currentValue=T,g!==null)if(qn(g.value,T)){if(g.children===m.children&&!tn.current){o=Yr(i,o,u);break e}}else for(g=o.child,g!==null&&(g.return=o);g!==null;){var b=g.dependencies;if(b!==null){T=g.child;for(var L=b.firstContext;L!==null;){if(L.context===d){if(g.tag===1){L=Qr(-1,u&-u),L.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var re=K.pending;re===null?L.next=L:(L.next=re.next,re.next=L),K.pending=L}}g.lanes|=u,L=g.alternate,L!==null&&(L.lanes|=u),Qf(g.return,u,o),b.lanes|=u;break}L=L.next}}else if(g.tag===10)T=g.type===o.type?null:g.child;else if(g.tag===18){if(T=g.return,T===null)throw Error(t(341));T.lanes|=u,b=T.alternate,b!==null&&(b.lanes|=u),Qf(T,u,o),T=g.sibling}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===o){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}Jt(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,na(o,u),m=Vn(m),d=d(m),o.flags|=1,Jt(i,o,d,u),o.child;case 14:return d=o.type,m=Gn(d,o.pendingProps),m=Gn(d.type,m),sv(i,o,d,m,u);case 15:return ov(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:Gn(d,m),ih(i,o),o.tag=1,nn(d)?(i=!0,jc(o)):i=!1,na(o,u),J_(o,d,m),hp(o,d,m,u),mp(null,o,d,!0,i,u);case 19:return pv(i,o,u);case 22:return av(i,o,u)}throw Error(t(156,o.tag))};function Fv(i,o){return yl(i,o)}function DR(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,o,u,d){return new DR(i,o,u,d)}function Op(i){return i=i.prototype,!(!i||!i.isReactComponent)}function VR(i){if(typeof i=="function")return Op(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===ke)return 14}return 2}function ji(i,o){var u=i.alternate;return u===null?(u=Ln(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function mh(i,o,u,d,m,g){var T=2;if(d=i,typeof i=="function")Op(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case P:return Ws(u.children,m,g,o);case S:T=8,m|=8;break;case k:return i=Ln(12,u,o,m|2),i.elementType=k,i.lanes=g,i;case R:return i=Ln(13,u,o,m),i.elementType=R,i.lanes=g,i;case ae:return i=Ln(19,u,o,m),i.elementType=ae,i.lanes=g,i;case Te:return gh(u,m,g,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:T=10;break e;case V:T=9;break e;case M:T=11;break e;case ke:T=14;break e;case Ae:T=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Ln(T,u,o,m),o.elementType=i,o.type=d,o.lanes=g,o}function Ws(i,o,u,d){return i=Ln(7,i,d,o),i.lanes=u,i}function gh(i,o,u,d){return i=Ln(22,i,d,o),i.elementType=Te,i.lanes=u,i.stateNode={isHidden:!1},i}function Mp(i,o,u){return i=Ln(6,i,null,o),i.lanes=u,i}function Lp(i,o,u){return o=Ln(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function OR(i,o,u,d,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tl(0),this.expirationTimes=Tl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tl(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Fp(i,o,u,d,m,g,T,b,L){return i=new OR(i,o,u,b,L),o===1?(o=1,g===!0&&(o|=8)):o=0,g=Ln(3,null,null,o),i.current=g,g.stateNode=i,g.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(g),i}function MR(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function Uv(i){if(!i)return ki;i=i._reactInternals;e:{if(Bn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(nn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(nn(u))return f_(i,u,o)}return o}function jv(i,o,u,d,m,g,T,b,L){return i=Fp(u,d,!0,i,m,g,T,b,L),i.context=Uv(null),u=i.current,d=Xt(),m=Fi(u),g=Qr(d,m),g.callback=o??null,Vi(u,g,m),i.current.lanes=m,Ns(i,m,d),on(i,d),i}function yh(i,o,u,d){var m=o.current,g=Xt(),T=Fi(m);return u=Uv(u),o.context===null?o.context=u:o.pendingContext=u,o=Qr(g,T),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Vi(m,o,T),i!==null&&(Qn(i,m,T,g),Wc(i,m,T)),T}function _h(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function zv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Up(i,o){zv(i,o),(i=i.alternate)&&zv(i,o)}function LR(){return null}var Bv=typeof reportError=="function"?reportError:function(i){console.error(i)};function jp(i){this._internalRoot=i}vh.prototype.render=jp.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));yh(i,o,null,null)},vh.prototype.unmount=jp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Hs(function(){yh(null,i,null,null)}),o[qr]=null}};function vh(i){this._internalRoot=i}vh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Pl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<mn.length&&o!==0&&o<mn[u].priority;u++);mn.splice(u,0,i),u===0&&Vo(i)}};function zp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function $v(){}function FR(i,o,u,d,m){if(m){if(typeof d=="function"){var g=d;d=function(){var K=_h(T);g.call(K)}}var T=jv(o,d,i,0,null,!1,!1,"",$v);return i._reactRootContainer=T,i[qr]=T.current,Fl(i.nodeType===8?i.parentNode:i),Hs(),T}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var b=d;d=function(){var K=_h(L);b.call(K)}}var L=Fp(i,0,!1,null,null,!1,!1,"",$v);return i._reactRootContainer=L,i[qr]=L.current,Fl(i.nodeType===8?i.parentNode:i),Hs(function(){yh(o,L,u,d)}),L}function Eh(i,o,u,d,m){var g=u._reactRootContainer;if(g){var T=g;if(typeof m=="function"){var b=m;m=function(){var L=_h(T);b.call(L)}}yh(o,T,i,m)}else T=FR(u,o,i,m,d);return _h(T)}Sl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ge(o.pendingLanes);u!==0&&(Il(o,u|1),on(o,it()),(qe&6)===0&&(aa=it()+500,Ni()))}break;case 13:Hs(function(){var d=Wr(i,1);if(d!==null){var m=Xt();Qn(d,i,1,m)}}),Up(i,1)}},No=function(i){if(i.tag===13){var o=Wr(i,134217728);if(o!==null){var u=Xt();Qn(o,i,134217728,u)}Up(i,134217728)}},Al=function(i){if(i.tag===13){var o=Fi(i),u=Wr(i,o);if(u!==null){var d=Xt();Qn(u,i,o,d)}Up(i,o)}},Pl=function(){return Be},Rl=function(i,o){var u=Be;try{return Be=i,o()}finally{Be=u}},Vr=function(i,o,u){switch(o){case"input":if(Ts(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var m=Fc(d);if(!m)throw Error(t(90));Es(d),Ts(d,m)}}}break;case"textarea":uc(i,u);break;case"select":o=u.value,o!=null&&jn(i,!!u.multiple,o,!1)}},dc=Np,fc=Hs;var UR={usingClientEntryPoint:!1,Events:[zl,Wo,Fc,_i,vi,Np]},tu={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jR={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=wc(i),i===null?null:i.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||LR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Cs=Th.inject(jR),fn=Th}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UR,an.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zp(o))throw Error(t(200));return MR(i,o,null,u)},an.createRoot=function(i,o){if(!zp(i))throw Error(t(299));var u=!1,d="",m=Bv;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Fp(i,1,!1,null,null,u,!1,d,m),i[qr]=o.current,Fl(i.nodeType===8?i.parentNode:i),new jp(o)},an.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=wc(o),i=i===null?null:i.stateNode,i},an.flushSync=function(i){return Hs(i)},an.hydrate=function(i,o,u){if(!wh(o))throw Error(t(200));return Eh(null,i,o,!0,u)},an.hydrateRoot=function(i,o,u){if(!zp(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,g="",T=Bv;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),o=jv(o,null,i,1,u??null,m,!1,g,T),i[qr]=o.current,Fl(i),d)for(i=0;i<d.length;i++)u=d[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new vh(o)},an.render=function(i,o,u){if(!wh(o))throw Error(t(200));return Eh(null,i,o,!1,u)},an.unmountComponentAtNode=function(i){if(!wh(i))throw Error(t(40));return i._reactRootContainer?(Hs(function(){Eh(null,null,i,!1,function(){i._reactRootContainer=null,i[qr]=null})}),!0):!1},an.unstable_batchedUpdates=Np,an.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!wh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Eh(i,o,u,!1,d)},an.version="18.3.1-next-f1338f8080-20240426",an}var Jv;function VT(){if(Jv)return qp.exports;Jv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qp.exports=WR(),qp.exports}var Xv;function QR(){if(Xv)return Ih;Xv=1;var n=VT();return Ih.createRoot=n.createRoot,Ih.hydrateRoot=n.hydrateRoot,Ih}var YR=QR();const JR="modulepreload",XR=function(n){return"/kids/"+n},Zv={},rt=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let f=function(p){return Promise.all(p.map(_=>Promise.resolve(_).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=l?.nonce||l?.getAttribute("nonce");s=f(t.map(p=>{if(p=XR(p),p in Zv)return;Zv[p]=!0;const _=p.endsWith(".css"),v=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const E=document.createElement("link");if(E.rel=_?"stylesheet":JR,_||(E.as="script"),E.crossOrigin="",E.href=p,h&&E.setAttribute("nonce",h),document.head.appendChild(E),_)return new Promise((A,D)=>{E.addEventListener("load",A),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return s.then(l=>{for(const h of l||[])h.status==="rejected"&&a(h.reason);return e().catch(a)})};var N=Vd();const Wi=DT(N),ZR=BR({__proto__:null,default:Wi},[N]);function eC(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,r,s,a,l=[],h="",f=n.split("/");for(f[0]||f.shift();s=f.shift();)t=s[0],t==="*"?(l.push(t),h+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(r=s.indexOf("?",1),a=s.indexOf(".",1),l.push(s.substring(1,~r?r:~a?a:s.length)),h+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(h+=(~r?"?":"")+"\\"+s.substring(a))):h+="/"+s;return{keys:l,pattern:new RegExp("^"+h+(e?"(?=$|/)":"/?$"),"i")}}var Kp={exports:{}},Wp={};var ew;function tC(){if(ew)return Wp;ew=1;var n=Vd();function e(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function h(v,E){var A=E(),D=r({inst:{value:A,getSnapshot:E}}),C=D[0].inst,x=D[1];return a(function(){C.value=A,C.getSnapshot=E,f(C)&&x({inst:C})},[v,A,E]),s(function(){return f(C)&&x({inst:C}),v(function(){f(C)&&x({inst:C})})},[v]),l(A),A}function f(v){var E=v.getSnapshot;v=v.value;try{var A=E();return!t(v,A)}catch{return!0}}function p(v,E){return E()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:h;return Wp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:_,Wp}var tw;function nC(){return tw||(tw=1,Kp.exports=tC()),Kp.exports}var rC=nC();const iC=ZR.useInsertionEffect,sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oC=sC?N.useLayoutEffect:N.useEffect,aC=iC||oC,OT=n=>{const e=N.useRef([n,(...t)=>e[0](...t)]).current;return aC(()=>{e[0]=n}),e[1]},lC="popstate",ug="pushState",cg="replaceState",uC="hashchange",nw=[lC,ug,cg,uC],cC=n=>{for(const e of nw)addEventListener(e,n);return()=>{for(const e of nw)removeEventListener(e,n)}},MT=(n,e)=>rC.useSyncExternalStore(cC,n,e),hC=()=>location.search,dC=({ssrSearch:n=""}={})=>MT(hC,()=>n),rw=()=>location.pathname,fC=({ssrPath:n}={})=>MT(rw,n?()=>n:rw),pC=(n,{replace:e=!1,state:t=null}={})=>history[e?cg:ug](t,"",n),mC=(n={})=>[fC(n),pC],iw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[iw]>"u"){for(const n of[ug,cg]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),r=new Event(n);return r.arguments=arguments,dispatchEvent(r),t}}Object.defineProperty(window,iw,{value:!0})}const gC=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",LT=(n="")=>n==="/"?"":n,yC=(n,e)=>n[0]==="~"?n.slice(1):LT(e)+n,_C=(n="",e)=>gC(sw(LT(n)),sw(e)),sw=n=>{try{return decodeURI(n)}catch{return n}},FT={hook:mC,searchHook:dC,parser:eC,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},UT=N.createContext(FT),Ku=()=>N.useContext(UT),jT={},zT=N.createContext(jT),vC=()=>N.useContext(zT),Od=n=>{const[e,t]=n.hook(n);return[_C(n.base,e),OT((r,s)=>t(yC(r,n.base),s))]},SF=()=>Od(Ku()),BT=(n,e,t,r)=>{const{pattern:s,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",r),l=s.exec(t)||[],[h,...f]=l;return h!==void 0?[!0,(()=>{const p=a!==!1?Object.fromEntries(a.map((v,E)=>[v,f[E]])):l.groups;let _={...f};return p&&Object.assign(_,p),_})(),...r?[h]:[]]:[!1,null]},wC=({children:n,...e})=>{const t=Ku(),r=e.hook?FT:t;let s=r;const[a,l]=e.ssrPath?.split("?")??[];l&&(e.ssrSearch=l,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let h=N.useRef({}),f=h.current,p=f;for(let _ in r){const v=_==="base"?r[_]+(e[_]||""):e[_]||r[_];f===p&&v!==p[_]&&(h.current=p={...p}),p[_]=v,v!==r[_]&&(s=p)}return N.createElement(UT.Provider,{value:s,children:n})},ow=({children:n,component:e},t)=>e?N.createElement(e,{params:t}):typeof n=="function"?n(t):n,EC=n=>{let e=N.useRef(jT),t=e.current;for(const r in n)n[r]!==t[r]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},et=({path:n,nest:e,match:t,...r})=>{const s=Ku(),[a]=Od(s),[l,h,f]=t??BT(s.parser,n,a,e),p=EC({...vC(),...h});if(!l)return null;const _=f?N.createElement(wC,{base:f},ow(r,p)):ow(r,p);return N.createElement(zT.Provider,{value:p,children:_})},TC=N.forwardRef((n,e)=>{const t=Ku(),[r,s]=Od(t),{to:a="",href:l=a,onClick:h,asChild:f,children:p,className:_,replace:v,state:E,...A}=n,D=OT(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(h?.(x),x.defaultPrevented||(x.preventDefault(),s(l,n)))}),C=t.hrefs(l[0]==="~"?l.slice(1):t.base+l,t);return f&&N.isValidElement(p)?N.cloneElement(p,{onClick:D,href:C}):N.createElement("a",{...A,onClick:D,href:C,className:_?.call?_(r===l):_,children:p,ref:e})}),$T=n=>Array.isArray(n)?n.flatMap(e=>$T(e&&e.type===N.Fragment?e.props.children:e)):[n],IC=({children:n,location:e})=>{const t=Ku(),[r]=Od(t);for(const s of $T(n)){let a=0;if(N.isValidElement(s)&&(a=BT(t.parser,s.props.path,e||r,s.props.nest))[0])return N.cloneElement(s,{match:a})}return null};var Md=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ld=typeof window>"u"||"Deno"in globalThis;function Yn(){}function SC(n,e){return typeof n=="function"?n(e):n}function AC(n){return typeof n=="number"&&n>=0&&n!==1/0}function PC(n,e){return Math.max(n+(e||0)-Date.now(),0)}function aw(n,e){return typeof n=="function"?n(e):n}function RC(n,e){return typeof n=="function"?n(e):n}function lw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:a,queryKey:l,stale:h}=n;if(l){if(r){if(e.queryHash!==hg(l,e.options))return!1}else if(!Cu(e.queryKey,l))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||s&&s!==e.state.fetchStatus||a&&!a(e))}function uw(n,e){const{exact:t,status:r,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Ru(e.options.mutationKey)!==Ru(a))return!1}else if(!Cu(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function hg(n,e){return(e?.queryKeyHashFn||Ru)(n)}function Ru(n){return JSON.stringify(n,(e,t)=>_m(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Cu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Cu(n[t],e[t])):!1}function qT(n,e){if(n===e)return n;const t=cw(n)&&cw(e);if(t||_m(n)&&_m(e)){const r=t?n:Object.keys(n),s=r.length,a=t?e:Object.keys(e),l=a.length,h=t?[]:{};let f=0;for(let p=0;p<l;p++){const _=t?p:a[p];(!t&&r.includes(_)||t)&&n[_]===void 0&&e[_]===void 0?(h[_]=void 0,f++):(h[_]=qT(n[_],e[_]),h[_]===n[_]&&n[_]!==void 0&&f++)}return s===l&&f===s?n:h}return e}function AF(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function cw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _m(n){if(!hw(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!hw(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function hw(n){return Object.prototype.toString.call(n)==="[object Object]"}function CC(n){return new Promise(e=>{setTimeout(e,n)})}function xC(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?qT(n,e):e}function bC(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function kC(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var dg=Symbol();function HT(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===dg?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var NC=class extends Md{#e;#t;#n;constructor(){super(),this.#n=n=>{if(!Ld&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},GT=new NC,DC=class extends Md{#e=!0;#t;#n;constructor(){super(),this.#n=n=>{if(!Ld&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#n=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},nd=new DC;function VC(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function OC(n){return Math.min(1e3*2**n,3e4)}function KT(n){return(n??"online")==="online"?nd.isOnline():!0}var WT=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function Qp(n){return n instanceof WT}function QT(n){let e=!1,t=0,r=!1,s;const a=VC(),l=C=>{r||(E(new WT(C)),n.abort?.())},h=()=>{e=!0},f=()=>{e=!1},p=()=>GT.isFocused()&&(n.networkMode==="always"||nd.isOnline())&&n.canRun(),_=()=>KT(n.networkMode)&&n.canRun(),v=C=>{r||(r=!0,n.onSuccess?.(C),s?.(),a.resolve(C))},E=C=>{r||(r=!0,n.onError?.(C),s?.(),a.reject(C))},A=()=>new Promise(C=>{s=x=>{(r||p())&&C(x)},n.onPause?.()}).then(()=>{s=void 0,r||n.onContinue?.()}),D=()=>{if(r)return;let C;const x=t===0?n.initialPromise:void 0;try{C=x??n.fn()}catch(q){C=Promise.reject(q)}Promise.resolve(C).then(v).catch(q=>{if(r)return;const H=n.retry??(Ld?0:3),G=n.retryDelay??OC,J=typeof G=="function"?G(t,q):G,ee=H===!0||typeof H=="number"&&t<H||typeof H=="function"&&H(t,q);if(e||!ee){E(q);return}t++,n.onFail?.(t,q),CC(J).then(()=>p()?void 0:A()).then(()=>{e?E(q):D()})})};return{promise:a,cancel:l,continue:()=>(s?.(),a),cancelRetry:h,continueRetry:f,canStart:_,start:()=>(_()?D():A().then(D),a)}}function MC(){let n=[],e=0,t=h=>{h()},r=h=>{h()},s=h=>setTimeout(h,0);const a=h=>{e?n.push(h):s(()=>{t(h)})},l=()=>{const h=n;n=[],h.length&&s(()=>{r(()=>{h.forEach(f=>{t(f)})})})};return{batch:h=>{let f;e++;try{f=h()}finally{e--,e||l()}return f},batchCalls:h=>(...f)=>{a(()=>{h(...f)})},schedule:a,setNotifyFunction:h=>{t=h},setBatchNotifyFunction:h=>{r=h},setScheduler:h=>{s=h}}}var Zt=MC(),YT=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AC(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ld?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},LC=class extends YT{#e;#t;#n;#r;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=UC(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const r=xC(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Yn).catch(Yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>RC(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!PC(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},a=()=>{const f=HT(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return s(p),this.#s=!1,this.options.persister?this.options.persister(f,p,this):f(p)},l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(l),this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta});const h=f=>{Qp(f)&&f.silent||this.#i({type:"error",error:f}),Qp(f)||(this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this)),this.scheduleGc()};return this.#r=QT({initialPromise:t?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{if(f===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(p){h(p);return}this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),this.scheduleGc()},onError:h,onFail:(f,p)=>{this.#i({type:"failed",failureCount:f,error:p})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#r.start()}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...FC(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Qp(s)&&s.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Zt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function FC(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:KT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function UC(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var jC=class extends Md{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const r=e.queryKey,s=e.queryHash??hg(r,e);let a=this.get(s);return a||(a=new LC({cache:this,queryKey:r,queryHash:s,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(r)}),this.add(a)),a}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){Zt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>lw(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>lw(n,t)):e}notify(n){Zt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},zC=class extends YT{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||BC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){this.#n=QT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(s,a)=>{this.#r({type:"failed",failureCount:s,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",r=!this.#n.canStart();try{if(!t){this.#r({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);const a=await this.options.onMutate?.(e);a!==this.state.context&&this.#r({type:"pending",context:a,variables:e,isPaused:r})}const s=await this.#n.start();return await this.#t.config.onSuccess?.(s,e,this.state.context,this),await this.options.onSuccess?.(s,e,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,e,this.state.context),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,e,this.state.context,this),await this.options.onError?.(s,e,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,e,this.state.context),s}finally{this.#r({type:"error",error:s})}}finally{this.#t.runNext(this)}}#r(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Zt.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function BC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $C=class extends Md{constructor(n={}){super(),this.config=n,this.#e=new Map,this.#t=Date.now()}#e;#t;build(n,e,t){const r=new zC({mutationCache:this,mutationId:++this.#t,options:n.defaultMutationOptions(e),state:t});return this.add(r),r}add(n){const e=Sh(n),t=this.#e.get(e)??[];t.push(n),this.#e.set(e,t),this.notify({type:"added",mutation:n})}remove(n){const e=Sh(n);if(this.#e.has(e)){const t=this.#e.get(e)?.filter(r=>r!==n);t&&(t.length===0?this.#e.delete(e):this.#e.set(e,t))}this.notify({type:"removed",mutation:n})}canRun(n){const e=this.#e.get(Sh(n))?.find(t=>t.state.status==="pending");return!e||e===n}runNext(n){return this.#e.get(Sh(n))?.find(t=>t!==n&&t.state.isPaused)?.continue()??Promise.resolve()}clear(){Zt.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}getAll(){return[...this.#e.values()].flat()}find(n){const e={exact:!0,...n};return this.getAll().find(t=>uw(e,t))}findAll(n={}){return this.getAll().filter(e=>uw(n,e))}notify(n){Zt.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return Zt.batch(()=>Promise.all(n.map(e=>e.continue().catch(Yn))))}};function Sh(n){return n.options.scope?.id??String(n.mutationId)}function dw(n){return{onFetch:(e,t)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let h={pages:[],pageParams:[]},f=0;const p=async()=>{let _=!1;const v=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},E=HT(e.options,e.fetchOptions),A=async(D,C,x)=>{if(_)return Promise.reject();if(C==null&&D.pages.length)return Promise.resolve(D);const q={queryKey:e.queryKey,pageParam:C,direction:x?"backward":"forward",meta:e.options.meta};v(q);const H=await E(q),{maxPages:G}=e.options,J=x?kC:bC;return{pages:J(D.pages,H,G),pageParams:J(D.pageParams,C,G)}};if(s&&a.length){const D=s==="backward",C=D?qC:fw,x={pages:a,pageParams:l},q=C(r,x);h=await A(x,q,D)}else{const D=n??a.length;do{const C=f===0?l[0]??r.initialPageParam:fw(r,h);if(f>0&&C==null)break;h=await A(h,C),f++}while(f<D)}return h};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=p}}}function fw(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function qC(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var HC=class{#e;#t;#n;#r;#o;#s;#i;#a;constructor(n={}){this.#e=n.queryCache||new jC,this.#t=n.mutationCache||new $C,this.#n=n.defaultOptions||{},this.#r=new Map,this.#o=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#i=GT.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=nd.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=this.#e.build(this,t);return n.revalidateIfStale&&r.isStaleByTime(aw(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),a=this.#e.get(r.queryHash)?.state.data,l=SC(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return Zt.batch(()=>this.#e.findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;Zt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e,r={type:"active",...n};return Zt.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Zt.batch(()=>this.#e.findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Yn).catch(Yn)}invalidateQueries(n={},e={}){return Zt.batch(()=>{if(this.#e.findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:e?.cancelRefetch??!0},r=Zt.batch(()=>this.#e.findAll(n).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(Yn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Yn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(aw(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Yn).catch(Yn)}fetchInfiniteQuery(n){return n.behavior=dw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Yn).catch(Yn)}ensureInfiniteQueryData(n){return n.behavior=dw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return nd.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(n){this.#n=n}setQueryDefaults(n,e){this.#r.set(Ru(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#r.values()];let t={};return e.forEach(r=>{Cu(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){this.#o.set(Ru(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#o.values()];let t={};return e.forEach(r=>{Cu(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#n.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=hg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===dg&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#n.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},JT=N.createContext(void 0),CF=n=>{const e=N.useContext(JT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},GC=({client:n,children:e})=>(N.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),Q.jsx(JT.Provider,{value:n,children:e}));async function KC(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const WC=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return await KC(t),await t.json()},QC=new HC({defaultOptions:{queries:{queryFn:WC({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),YC=1,JC=1e6;let Yp=0;function XC(){return Yp=(Yp+1)%Number.MAX_SAFE_INTEGER,Yp.toString()}const Jp=new Map,pw=n=>{if(Jp.has(n))return;const e=setTimeout(()=>{Jp.delete(n),mu({type:"REMOVE_TOAST",toastId:n})},JC);Jp.set(n,e)},ZC=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,YC)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?pw(t):n.toasts.forEach(r=>{pw(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Lh=[];let Fh={toasts:[]};function mu(n){Fh=ZC(Fh,n),Lh.forEach(e=>{e(Fh)})}function ex({...n}){const e=XC(),t=s=>mu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>mu({type:"DISMISS_TOAST",toastId:e});return mu({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function tx(){const[n,e]=N.useState(Fh);return N.useEffect(()=>(Lh.push(e),()=>{const t=Lh.indexOf(e);t>-1&&Lh.splice(t,1)}),[n]),{...n,toast:ex,dismiss:t=>mu({type:"DISMISS_TOAST",toastId:t})}}var Fd=VT();const nx=DT(Fd);function Ct(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function mw(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function XT(...n){return e=>{let t=!1;const r=n.map(s=>{const a=mw(s,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():mw(n[s],null)}}}}function tr(...n){return N.useCallback(XT(...n),n)}function xF(n,e){const t=N.createContext(e),r=a=>{const{children:l,...h}=a,f=N.useMemo(()=>h,Object.values(h));return Q.jsx(t.Provider,{value:f,children:l})};r.displayName=n+"Provider";function s(a){const l=N.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[r,s]}function Ud(n,e=[]){let t=[];function r(a,l){const h=N.createContext(l),f=t.length;t=[...t,l];const p=v=>{const{scope:E,children:A,...D}=v,C=E?.[n]?.[f]||h,x=N.useMemo(()=>D,Object.values(D));return Q.jsx(C.Provider,{value:x,children:A})};p.displayName=a+"Provider";function _(v,E){const A=E?.[n]?.[f]||h,D=N.useContext(A);if(D)return D;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[p,_]}const s=()=>{const a=t.map(l=>N.createContext(l));return function(h){const f=h?.[n]||a;return N.useMemo(()=>({[`__scope${n}`]:{...h,[n]:f}}),[h,f])}};return s.scopeName=n,[r,rx(s,...e)]}function rx(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const l=r.reduce((h,{useScope:f,scopeName:p})=>{const v=f(a)[`__scope${p}`];return{...h,...v}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function rd(n){const e=sx(n),t=N.forwardRef((r,s)=>{const{children:a,...l}=r,h=N.Children.toArray(a),f=h.find(ax);if(f){const p=f.props.children,_=h.map(v=>v===f?N.Children.count(p)>1?N.Children.only(null):N.isValidElement(p)?p.props.children:null:v);return Q.jsx(e,{...l,ref:s,children:N.isValidElement(p)?N.cloneElement(p,void 0,_):null})}return Q.jsx(e,{...l,ref:s,children:a})});return t.displayName=`${n}.Slot`,t}var ix=rd("Slot");function sx(n){const e=N.forwardRef((t,r)=>{const{children:s,...a}=t;if(N.isValidElement(s)){const l=ux(s),h=lx(a,s.props);return s.type!==N.Fragment&&(h.ref=r?XT(r,l):l),N.cloneElement(s,h)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var ZT=Symbol("radix.slottable");function ox(n){const e=({children:t})=>Q.jsx(Q.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=ZT,e}function ax(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===ZT}function lx(n,e){const t={...e};for(const r in e){const s=n[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?t[r]=(...h)=>{a(...h),s(...h)}:s&&(t[r]=s):r==="style"?t[r]={...s,...a}:r==="className"&&(t[r]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function ux(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cx(n){const e=n+"CollectionProvider",[t,r]=Ud(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=C=>{const{scope:x,children:q}=C,H=Wi.useRef(null),G=Wi.useRef(new Map).current;return Q.jsx(s,{scope:x,itemMap:G,collectionRef:H,children:q})};l.displayName=e;const h=n+"CollectionSlot",f=rd(h),p=Wi.forwardRef((C,x)=>{const{scope:q,children:H}=C,G=a(h,q),J=tr(x,G.collectionRef);return Q.jsx(f,{ref:J,children:H})});p.displayName=h;const _=n+"CollectionItemSlot",v="data-radix-collection-item",E=rd(_),A=Wi.forwardRef((C,x)=>{const{scope:q,children:H,...G}=C,J=Wi.useRef(null),ee=tr(x,J),ie=a(_,q);return Wi.useEffect(()=>(ie.itemMap.set(J,{ref:J,...G}),()=>{ie.itemMap.delete(J)})),Q.jsx(E,{[v]:"",ref:ee,children:H})});A.displayName=_;function D(C){const x=a(n+"CollectionConsumer",C);return Wi.useCallback(()=>{const H=x.collectionRef.current;if(!H)return[];const G=Array.from(H.querySelectorAll(`[${v}]`));return Array.from(x.itemMap.values()).sort((ie,P)=>G.indexOf(ie.ref.current)-G.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:l,Slot:p,ItemSlot:A},D,r]}var hx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],cn=hx.reduce((n,e)=>{const t=rd(`Primitive.${e}`),r=N.forwardRef((s,a)=>{const{asChild:l,...h}=s,f=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Q.jsx(f,{...h,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function eI(n,e){n&&Fd.flushSync(()=>n.dispatchEvent(e))}function br(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n}),N.useMemo(()=>(...t)=>e.current?.(...t),[])}function dx(n,e=globalThis?.document){const t=br(n);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var fx="DismissableLayer",vm="dismissableLayer.update",px="dismissableLayer.pointerDownOutside",mx="dismissableLayer.focusOutside",gw,tI=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fg=N.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:h,...f}=n,p=N.useContext(tI),[_,v]=N.useState(null),E=_?.ownerDocument??globalThis?.document,[,A]=N.useState({}),D=tr(e,P=>v(P)),C=Array.from(p.layers),[x]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),q=C.indexOf(x),H=_?C.indexOf(_):-1,G=p.layersWithOutsidePointerEventsDisabled.size>0,J=H>=q,ee=yx(P=>{const S=P.target,k=[...p.branches].some(O=>O.contains(S));!J||k||(s?.(P),l?.(P),P.defaultPrevented||h?.())},E),ie=_x(P=>{const S=P.target;[...p.branches].some(O=>O.contains(S))||(a?.(P),l?.(P),P.defaultPrevented||h?.())},E);return dx(P=>{H===p.layers.size-1&&(r?.(P),!P.defaultPrevented&&h&&(P.preventDefault(),h()))},E),N.useEffect(()=>{if(_)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(gw=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(_)),p.layers.add(_),yw(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=gw)}},[_,E,t,p]),N.useEffect(()=>()=>{_&&(p.layers.delete(_),p.layersWithOutsidePointerEventsDisabled.delete(_),yw())},[_,p]),N.useEffect(()=>{const P=()=>A({});return document.addEventListener(vm,P),()=>document.removeEventListener(vm,P)},[]),Q.jsx(cn.div,{...f,ref:D,style:{pointerEvents:G?J?"auto":"none":void 0,...n.style},onFocusCapture:Ct(n.onFocusCapture,ie.onFocusCapture),onBlurCapture:Ct(n.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:Ct(n.onPointerDownCapture,ee.onPointerDownCapture)})});fg.displayName=fx;var gx="DismissableLayerBranch",nI=N.forwardRef((n,e)=>{const t=N.useContext(tI),r=N.useRef(null),s=tr(e,r);return N.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),Q.jsx(cn.div,{...n,ref:s})});nI.displayName=gx;function yx(n,e=globalThis?.document){const t=br(n),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const a=h=>{if(h.target&&!r.current){let f=function(){rI(px,t,p,{discrete:!0})};const p={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function _x(n,e=globalThis?.document){const t=br(n),r=N.useRef(!1);return N.useEffect(()=>{const s=a=>{a.target&&!r.current&&rI(mx,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yw(){const n=new CustomEvent(vm);document.dispatchEvent(n)}function rI(n,e,t,{discrete:r}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?eI(s,a):s.dispatchEvent(a)}var vx=fg,wx=nI,ao=globalThis?.document?N.useLayoutEffect:()=>{},Ex="Portal",iI=N.forwardRef((n,e)=>{const{container:t,...r}=n,[s,a]=N.useState(!1);ao(()=>a(!0),[]);const l=t||s&&globalThis?.document?.body;return l?nx.createPortal(Q.jsx(cn.div,{...r,ref:e}),l):null});iI.displayName=Ex;function Tx(n,e){return N.useReducer((t,r)=>e[t][r]??t,n)}var pg=n=>{const{present:e,children:t}=n,r=Ix(e),s=typeof t=="function"?t({present:r.isPresent}):N.Children.only(t),a=tr(r.ref,Sx(s));return typeof t=="function"||r.isPresent?N.cloneElement(s,{ref:a}):null};pg.displayName="Presence";function Ix(n){const[e,t]=N.useState(),r=N.useRef({}),s=N.useRef(n),a=N.useRef("none"),l=n?"mounted":"unmounted",[h,f]=Tx(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const p=Ah(r.current);a.current=h==="mounted"?p:"none"},[h]),ao(()=>{const p=r.current,_=s.current;if(_!==n){const E=a.current,A=Ah(p);n?f("MOUNT"):A==="none"||p?.display==="none"?f("UNMOUNT"):f(_&&E!==A?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,f]),ao(()=>{if(e){let p;const _=e.ownerDocument.defaultView??window,v=A=>{const C=Ah(r.current).includes(A.animationName);if(A.target===e&&C&&(f("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",p=_.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},E=A=>{A.target===e&&(a.current=Ah(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{_.clearTimeout(p),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:N.useCallback(p=>{p&&(r.current=getComputedStyle(p)),t(p)},[])}}function Ah(n){return n?.animationName||"none"}function Sx(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Ax({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,s]=Px({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r,h=br(t),f=N.useCallback(p=>{if(a){const v=typeof p=="function"?p(n):p;v!==n&&h(v)}else s(p)},[a,n,s,h]);return[l,f]}function Px({defaultProp:n,onChange:e}){const t=N.useState(n),[r]=t,s=N.useRef(r),a=br(e);return N.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),t}var Rx="VisuallyHidden",jd=N.forwardRef((n,e)=>Q.jsx(cn.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));jd.displayName=Rx;var Cx=jd,mg="ToastProvider",[gg,xx,bx]=cx("Toast"),[sI]=Ud("Toast",[bx]),[kx,zd]=sI(mg),oI=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:l}=n,[h,f]=N.useState(null),[p,_]=N.useState(0),v=N.useRef(!1),E=N.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${mg}\`. Expected non-empty \`string\`.`),Q.jsx(gg.Provider,{scope:e,children:Q.jsx(kx,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:p,viewport:h,onViewportChange:f,onToastAdd:N.useCallback(()=>_(A=>A+1),[]),onToastRemove:N.useCallback(()=>_(A=>A-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:E,children:l})})};oI.displayName=mg;var aI="ToastViewport",Nx=["F8"],wm="toast.viewportPause",Em="toast.viewportResume",lI=N.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Nx,label:s="Notifications ({hotkey})",...a}=n,l=zd(aI,t),h=xx(t),f=N.useRef(null),p=N.useRef(null),_=N.useRef(null),v=N.useRef(null),E=tr(e,v,l.onViewportChange),A=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=l.toastCount>0;N.useEffect(()=>{const x=q=>{r.length!==0&&r.every(G=>q[G]||q.code===G)&&v.current?.focus()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),N.useEffect(()=>{const x=f.current,q=v.current;if(D&&x&&q){const H=()=>{if(!l.isClosePausedRef.current){const ie=new CustomEvent(wm);q.dispatchEvent(ie),l.isClosePausedRef.current=!0}},G=()=>{if(l.isClosePausedRef.current){const ie=new CustomEvent(Em);q.dispatchEvent(ie),l.isClosePausedRef.current=!1}},J=ie=>{!x.contains(ie.relatedTarget)&&G()},ee=()=>{x.contains(document.activeElement)||G()};return x.addEventListener("focusin",H),x.addEventListener("focusout",J),x.addEventListener("pointermove",H),x.addEventListener("pointerleave",ee),window.addEventListener("blur",H),window.addEventListener("focus",G),()=>{x.removeEventListener("focusin",H),x.removeEventListener("focusout",J),x.removeEventListener("pointermove",H),x.removeEventListener("pointerleave",ee),window.removeEventListener("blur",H),window.removeEventListener("focus",G)}}},[D,l.isClosePausedRef]);const C=N.useCallback(({tabbingDirection:x})=>{const H=h().map(G=>{const J=G.ref.current,ee=[J,...Hx(J)];return x==="forwards"?ee:ee.reverse()});return(x==="forwards"?H.reverse():H).flat()},[h]);return N.useEffect(()=>{const x=v.current;if(x){const q=H=>{const G=H.altKey||H.ctrlKey||H.metaKey;if(H.key==="Tab"&&!G){const ee=document.activeElement,ie=H.shiftKey;if(H.target===x&&ie){p.current?.focus();return}const k=C({tabbingDirection:ie?"backwards":"forwards"}),O=k.findIndex(V=>V===ee);Xp(k.slice(O+1))?H.preventDefault():ie?p.current?.focus():_.current?.focus()}};return x.addEventListener("keydown",q),()=>x.removeEventListener("keydown",q)}},[h,C]),Q.jsxs(wx,{ref:f,role:"region","aria-label":s.replace("{hotkey}",A),tabIndex:-1,style:{pointerEvents:D?void 0:"none"},children:[D&&Q.jsx(Tm,{ref:p,onFocusFromOutsideViewport:()=>{const x=C({tabbingDirection:"forwards"});Xp(x)}}),Q.jsx(gg.Slot,{scope:t,children:Q.jsx(cn.ol,{tabIndex:-1,...a,ref:E})}),D&&Q.jsx(Tm,{ref:_,onFocusFromOutsideViewport:()=>{const x=C({tabbingDirection:"backwards"});Xp(x)}})]})});lI.displayName=aI;var uI="ToastFocusProxy",Tm=N.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,a=zd(uI,t);return Q.jsx(jd,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{const h=l.relatedTarget;!a.viewport?.contains(h)&&r()}})});Tm.displayName=uI;var Bd="Toast",Dx="toast.swipeStart",Vx="toast.swipeMove",Ox="toast.swipeCancel",Mx="toast.swipeEnd",cI=N.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:a,...l}=n,[h=!0,f]=Ax({prop:r,defaultProp:s,onChange:a});return Q.jsx(pg,{present:t||h,children:Q.jsx(Ux,{open:h,...l,ref:e,onClose:()=>f(!1),onPause:br(n.onPause),onResume:br(n.onResume),onSwipeStart:Ct(n.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ct(n.onSwipeMove,p=>{const{x:_,y:v}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${_}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:Ct(n.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ct(n.onSwipeEnd,p=>{const{x:_,y:v}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${_}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});cI.displayName=Bd;var[Lx,Fx]=sI(Bd,{onClose(){}}),Ux=N.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:a,onClose:l,onEscapeKeyDown:h,onPause:f,onResume:p,onSwipeStart:_,onSwipeMove:v,onSwipeCancel:E,onSwipeEnd:A,...D}=n,C=zd(Bd,t),[x,q]=N.useState(null),H=tr(e,ae=>q(ae)),G=N.useRef(null),J=N.useRef(null),ee=s||C.duration,ie=N.useRef(0),P=N.useRef(ee),S=N.useRef(0),{onToastAdd:k,onToastRemove:O}=C,V=br(()=>{x?.contains(document.activeElement)&&C.viewport?.focus(),l()}),M=N.useCallback(ae=>{!ae||ae===1/0||(window.clearTimeout(S.current),ie.current=new Date().getTime(),S.current=window.setTimeout(V,ae))},[V]);N.useEffect(()=>{const ae=C.viewport;if(ae){const ke=()=>{M(P.current),p?.()},Ae=()=>{const Te=new Date().getTime()-ie.current;P.current=P.current-Te,window.clearTimeout(S.current),f?.()};return ae.addEventListener(wm,Ae),ae.addEventListener(Em,ke),()=>{ae.removeEventListener(wm,Ae),ae.removeEventListener(Em,ke)}}},[C.viewport,ee,f,p,M]),N.useEffect(()=>{a&&!C.isClosePausedRef.current&&M(ee)},[a,ee,C.isClosePausedRef,M]),N.useEffect(()=>(k(),()=>O()),[k,O]);const R=N.useMemo(()=>x?yI(x):null,[x]);return C.viewport?Q.jsxs(Q.Fragment,{children:[R&&Q.jsx(jx,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),Q.jsx(Lx,{scope:t,onClose:V,children:Fd.createPortal(Q.jsx(gg.ItemSlot,{scope:t,children:Q.jsx(vx,{asChild:!0,onEscapeKeyDown:Ct(h,()=>{C.isFocusedToastEscapeKeyDownRef.current||V(),C.isFocusedToastEscapeKeyDownRef.current=!1}),children:Q.jsx(cn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":C.swipeDirection,...D,ref:H,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Ct(n.onKeyDown,ae=>{ae.key==="Escape"&&(h?.(ae.nativeEvent),ae.nativeEvent.defaultPrevented||(C.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:Ct(n.onPointerDown,ae=>{ae.button===0&&(G.current={x:ae.clientX,y:ae.clientY})}),onPointerMove:Ct(n.onPointerMove,ae=>{if(!G.current)return;const ke=ae.clientX-G.current.x,Ae=ae.clientY-G.current.y,Te=!!J.current,X=["left","right"].includes(C.swipeDirection),he=["left","up"].includes(C.swipeDirection)?Math.min:Math.max,ue=X?he(0,ke):0,U=X?0:he(0,Ae),Z=ae.pointerType==="touch"?10:2,Pe={x:ue,y:U},Re={originalEvent:ae,delta:Pe};Te?(J.current=Pe,Ph(Vx,v,Re,{discrete:!1})):_w(Pe,C.swipeDirection,Z)?(J.current=Pe,Ph(Dx,_,Re,{discrete:!1}),ae.target.setPointerCapture(ae.pointerId)):(Math.abs(ke)>Z||Math.abs(Ae)>Z)&&(G.current=null)}),onPointerUp:Ct(n.onPointerUp,ae=>{const ke=J.current,Ae=ae.target;if(Ae.hasPointerCapture(ae.pointerId)&&Ae.releasePointerCapture(ae.pointerId),J.current=null,G.current=null,ke){const Te=ae.currentTarget,X={originalEvent:ae,delta:ke};_w(ke,C.swipeDirection,C.swipeThreshold)?Ph(Mx,A,X,{discrete:!0}):Ph(Ox,E,X,{discrete:!0}),Te.addEventListener("click",he=>he.preventDefault(),{once:!0})}})})})}),C.viewport)})]}):null}),jx=n=>{const{__scopeToast:e,children:t,...r}=n,s=zd(Bd,e),[a,l]=N.useState(!1),[h,f]=N.useState(!1);return $x(()=>l(!0)),N.useEffect(()=>{const p=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(p)},[]),h?null:Q.jsx(iI,{asChild:!0,children:Q.jsx(jd,{...r,children:a&&Q.jsxs(Q.Fragment,{children:[s.label," ",t]})})})},zx="ToastTitle",hI=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return Q.jsx(cn.div,{...r,ref:e})});hI.displayName=zx;var Bx="ToastDescription",dI=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return Q.jsx(cn.div,{...r,ref:e})});dI.displayName=Bx;var fI="ToastAction",pI=N.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?Q.jsx(gI,{altText:t,asChild:!0,children:Q.jsx(yg,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fI}\`. Expected non-empty \`string\`.`),null)});pI.displayName=fI;var mI="ToastClose",yg=N.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=Fx(mI,t);return Q.jsx(gI,{asChild:!0,children:Q.jsx(cn.button,{type:"button",...r,ref:e,onClick:Ct(n.onClick,s.onClose)})})});yg.displayName=mI;var gI=N.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return Q.jsx(cn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function yI(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),qx(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const l=r.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...yI(r))}}),e}function Ph(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?eI(s,a):s.dispatchEvent(a)}var _w=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),a=r>s;return e==="left"||e==="right"?a&&r>t:!a&&s>t};function $x(n=()=>{}){const e=br(n);ao(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function qx(n){return n.nodeType===n.ELEMENT_NODE}function Hx(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Xp(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Gx=oI,_I=lI,vI=cI,wI=hI,EI=dI,TI=pI,II=yg;function SI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=SI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function AI(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=SI(n))&&(r&&(r+=" "),r+=e);return r}const vw=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ww=AI,PI=(n,e)=>t=>{var r;if(e?.variants==null)return ww(n,t?.class,t?.className);const{variants:s,defaultVariants:a}=e,l=Object.keys(s).map(p=>{const _=t?.[p],v=a?.[p];if(_===null)return null;const E=vw(_)||vw(v);return s[p][E]}),h=t&&Object.entries(t).reduce((p,_)=>{let[v,E]=_;return E===void 0||(p[v]=E),p},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,_)=>{let{class:v,className:E,...A}=_;return Object.entries(A).every(D=>{let[C,x]=D;return Array.isArray(x)?x.includes({...a,...h}[C]):{...a,...h}[C]===x})?[...p,v,E]:p},[]);return ww(n,l,f,t?.class,t?.className)};const Kx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RI=(...n)=>n.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");var Wx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Qx=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...h},f)=>N.createElement("svg",{ref:f,...Wx,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:RI("lucide",s),...h},[...l.map(([p,_])=>N.createElement(p,_)),...Array.isArray(a)?a:[a]]));const _g=(n,e)=>{const t=N.forwardRef(({className:r,...s},a)=>N.createElement(Qx,{ref:a,iconNode:e,className:RI(`lucide-${Kx(n)}`,r),...s}));return t.displayName=`${n}`,t};const Yx=_g("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const CI=_g("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Jx=_g("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vg="-",Xx=n=>{const e=e1(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const h=l.split(vg);return h[0]===""&&h.length!==1&&h.shift(),xI(h,e)||Zx(l)},getConflictingClassGroupIds:(l,h)=>{const f=t[l]||[];return h&&r[l]?[...f,...r[l]]:f}}},xI=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?xI(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(vg);return e.validators.find(({validator:l})=>l(a))?.classGroupId},Ew=/^\[(.+)\]$/,Zx=n=>{if(Ew.test(n)){const e=Ew.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},e1=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return n1(Object.entries(n.classGroups),t).forEach(([a,l])=>{Im(l,r,a,e)}),r},Im=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:Tw(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(t1(s)){Im(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,l])=>{Im(l,Tw(e,a),t,r)})})},Tw=(n,e)=>{let t=n;return e.split(vg).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},t1=n=>n.isThemeGetter,n1=(n,e)=>e?n.map(([t,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,h])=>[e+l,h])):a);return[t,s]}):n,r1=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return s(a,l),l},set(a,l){t.has(a)?t.set(a,l):s(a,l)}}},bI="!",i1=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],a=e.length,l=h=>{const f=[];let p=0,_=0,v;for(let x=0;x<h.length;x++){let q=h[x];if(p===0){if(q===s&&(r||h.slice(x,x+a)===e)){f.push(h.slice(_,x)),_=x+a;continue}if(q==="/"){v=x;continue}}q==="["?p++:q==="]"&&p--}const E=f.length===0?h:h.substring(_),A=E.startsWith(bI),D=A?E.substring(1):E,C=v&&v>_?v-_:void 0;return{modifiers:f,hasImportantModifier:A,baseClassName:D,maybePostfixModifierPosition:C}};return t?h=>t({className:h,parseClassName:l}):l},s1=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},o1=n=>({cache:r1(n.cacheSize),parseClassName:i1(n),...Xx(n)}),a1=/\s+/,l1=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],l=n.trim().split(a1);let h="";for(let f=l.length-1;f>=0;f-=1){const p=l[f],{modifiers:_,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:A}=t(p);let D=!!A,C=r(D?E.substring(0,A):E);if(!C){if(!D){h=p+(h.length>0?" "+h:h);continue}if(C=r(E),!C){h=p+(h.length>0?" "+h:h);continue}D=!1}const x=s1(_).join(":"),q=v?x+bI:x,H=q+C;if(a.includes(H))continue;a.push(H);const G=s(C,D);for(let J=0;J<G.length;++J){const ee=G[J];a.push(q+ee)}h=p+(h.length>0?" "+h:h)}return h};function u1(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=kI(e))&&(r&&(r+=" "),r+=t);return r}const kI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=kI(n[r]))&&(t&&(t+=" "),t+=e);return t};function c1(n,...e){let t,r,s,a=l;function l(f){const p=e.reduce((_,v)=>v(_),n());return t=o1(p),r=t.cache.get,s=t.cache.set,a=h,h(f)}function h(f){const p=r(f);if(p)return p;const _=l1(f,t);return s(f,_),_}return function(){return a(u1.apply(null,arguments))}}const at=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},NI=/^\[(?:([a-z-]+):)?(.+)\]$/i,h1=/^\d+\/\d+$/,d1=new Set(["px","full","screen"]),f1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,p1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,m1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,g1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xr=n=>Ea(n)||d1.has(n)||h1.test(n),Bi=n=>Ja(n,"length",A1),Ea=n=>!!n&&!Number.isNaN(Number(n)),Zp=n=>Ja(n,"number",Ea),ru=n=>!!n&&Number.isInteger(Number(n)),_1=n=>n.endsWith("%")&&Ea(n.slice(0,-1)),De=n=>NI.test(n),$i=n=>f1.test(n),v1=new Set(["length","size","percentage"]),w1=n=>Ja(n,v1,DI),E1=n=>Ja(n,"position",DI),T1=new Set(["image","url"]),I1=n=>Ja(n,T1,R1),S1=n=>Ja(n,"",P1),iu=()=>!0,Ja=(n,e,t)=>{const r=NI.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},A1=n=>p1.test(n)&&!m1.test(n),DI=()=>!1,P1=n=>g1.test(n),R1=n=>y1.test(n),C1=()=>{const n=at("colors"),e=at("spacing"),t=at("blur"),r=at("brightness"),s=at("borderColor"),a=at("borderRadius"),l=at("borderSpacing"),h=at("borderWidth"),f=at("contrast"),p=at("grayscale"),_=at("hueRotate"),v=at("invert"),E=at("gap"),A=at("gradientColorStops"),D=at("gradientColorStopPositions"),C=at("inset"),x=at("margin"),q=at("opacity"),H=at("padding"),G=at("saturate"),J=at("scale"),ee=at("sepia"),ie=at("skew"),P=at("space"),S=at("translate"),k=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",De,e],M=()=>[De,e],R=()=>["",Xr,Bi],ae=()=>["auto",Ea,De],ke=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ae=()=>["solid","dashed","dotted","double","none"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>["start","end","center","between","around","evenly","stretch"],he=()=>["","0",De],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Ea,De];return{cacheSize:500,separator:":",theme:{colors:[iu],spacing:[Xr,Bi],blur:["none","",$i,De],brightness:U(),borderColor:[n],borderRadius:["none","","full",$i,De],borderSpacing:M(),borderWidth:R(),contrast:U(),grayscale:he(),hueRotate:U(),invert:he(),gap:M(),gradientColorStops:[n],gradientColorStopPositions:[_1,Bi],inset:V(),margin:V(),opacity:U(),padding:M(),saturate:U(),scale:U(),sepia:he(),skew:U(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[$i]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ke(),De]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ru,De]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:he()}],shrink:[{shrink:he()}],order:[{order:["first","last","none",ru,De]}],"grid-cols":[{"grid-cols":[iu]}],"col-start-end":[{col:["auto",{span:["full",ru,De]},De]}],"col-start":[{"col-start":ae()}],"col-end":[{"col-end":ae()}],"grid-rows":[{"grid-rows":[iu]}],"row-start-end":[{row:["auto",{span:[ru,De]},De]}],"row-start":[{"row-start":ae()}],"row-end":[{"row-end":ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...X()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...X(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...X(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[H]}],px:[{px:[H]}],py:[{py:[H]}],ps:[{ps:[H]}],pe:[{pe:[H]}],pt:[{pt:[H]}],pr:[{pr:[H]}],pb:[{pb:[H]}],pl:[{pl:[H]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,e]}],"min-w":[{"min-w":[De,e,"min","max","fit"]}],"max-w":[{"max-w":[De,e,"none","full","min","max","fit","prose",{screen:[$i]},$i]}],h:[{h:[De,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$i,Bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zp]}],"font-family":[{font:[iu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",Ea,Zp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xr,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[q]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xr,Bi]}],"underline-offset":[{"underline-offset":["auto",Xr,De]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[q]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ke(),E1]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",w1]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},I1]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[h]}],"border-w-x":[{"border-x":[h]}],"border-w-y":[{"border-y":[h]}],"border-w-s":[{"border-s":[h]}],"border-w-e":[{"border-e":[h]}],"border-w-t":[{"border-t":[h]}],"border-w-r":[{"border-r":[h]}],"border-w-b":[{"border-b":[h]}],"border-w-l":[{"border-l":[h]}],"border-opacity":[{"border-opacity":[q]}],"border-style":[{border:[...Ae(),"hidden"]}],"divide-x":[{"divide-x":[h]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[h]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[q]}],"divide-style":[{divide:Ae()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Ae()]}],"outline-offset":[{"outline-offset":[Xr,De]}],"outline-w":[{outline:[Xr,Bi]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[q]}],"ring-offset-w":[{"ring-offset":[Xr,Bi]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",$i,S1]}],"shadow-color":[{shadow:[iu]}],opacity:[{opacity:[q]}],"mix-blend":[{"mix-blend":[...Te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",$i,De]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[_]}],invert:[{invert:[v]}],saturate:[{saturate:[G]}],sepia:[{sepia:[ee]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[q]}],"backdrop-saturate":[{"backdrop-saturate":[G]}],"backdrop-sepia":[{"backdrop-sepia":[ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[J]}],"scale-x":[{"scale-x":[J]}],"scale-y":[{"scale-y":[J]}],rotate:[{rotate:[ru,De]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[ie]}],"skew-y":[{"skew-y":[ie]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Xr,Bi,Zp]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},x1=c1(C1);function hn(...n){return x1(AI(n))}const b1=Gx,VI=N.forwardRef(({className:n,...e},t)=>Q.jsx(_I,{ref:t,className:hn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));VI.displayName=_I.displayName;const k1=PI("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),OI=N.forwardRef(({className:n,variant:e,...t},r)=>Q.jsx(vI,{ref:r,className:hn(k1({variant:e}),n),...t}));OI.displayName=vI.displayName;const N1=N.forwardRef(({className:n,...e},t)=>Q.jsx(TI,{ref:t,className:hn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));N1.displayName=TI.displayName;const MI=N.forwardRef(({className:n,...e},t)=>Q.jsx(II,{ref:t,className:hn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:Q.jsx(Jx,{className:"h-4 w-4"})}));MI.displayName=II.displayName;const LI=N.forwardRef(({className:n,...e},t)=>Q.jsx(wI,{ref:t,className:hn("text-sm font-semibold",n),...e}));LI.displayName=wI.displayName;const FI=N.forwardRef(({className:n,...e},t)=>Q.jsx(EI,{ref:t,className:hn("text-sm opacity-90",n),...e}));FI.displayName=EI.displayName;function D1(){const{toasts:n}=tx();return Q.jsxs(b1,{children:[n.map(function({id:e,title:t,description:r,action:s,...a}){return Q.jsxs(OI,{...a,children:[Q.jsxs("div",{className:"grid gap-1",children:[t&&Q.jsx(LI,{children:t}),r&&Q.jsx(FI,{children:r})]}),s,Q.jsx(MI,{})]},e)}),Q.jsx(VI,{})]})}const V1=["top","right","bottom","left"],ls=Math.min,In=Math.max,id=Math.round,Rh=Math.floor,Pr=n=>({x:n,y:n}),O1={left:"right",right:"left",bottom:"top",top:"bottom"},M1={start:"end",end:"start"};function Sm(n,e,t){return In(n,ls(e,t))}function ri(n,e){return typeof n=="function"?n(e):n}function ii(n){return n.split("-")[0]}function Xa(n){return n.split("-")[1]}function wg(n){return n==="x"?"y":"x"}function Eg(n){return n==="y"?"height":"width"}function us(n){return["top","bottom"].includes(ii(n))?"y":"x"}function Tg(n){return wg(us(n))}function L1(n,e,t){t===void 0&&(t=!1);const r=Xa(n),s=Tg(n),a=Eg(s);let l=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=sd(l)),[l,sd(l)]}function F1(n){const e=sd(n);return[Am(n),e,Am(e)]}function Am(n){return n.replace(/start|end/g,e=>M1[e])}function U1(n,e,t){const r=["left","right"],s=["right","left"],a=["top","bottom"],l=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?a:l;default:return[]}}function j1(n,e,t,r){const s=Xa(n);let a=U1(ii(n),t==="start",r);return s&&(a=a.map(l=>l+"-"+s),e&&(a=a.concat(a.map(Am)))),a}function sd(n){return n.replace(/left|right|bottom|top/g,e=>O1[e])}function z1(n){return{top:0,right:0,bottom:0,left:0,...n}}function UI(n){return typeof n!="number"?z1(n):{top:n,right:n,bottom:n,left:n}}function od(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Iw(n,e,t){let{reference:r,floating:s}=n;const a=us(e),l=Tg(e),h=Eg(l),f=ii(e),p=a==="y",_=r.x+r.width/2-s.width/2,v=r.y+r.height/2-s.height/2,E=r[h]/2-s[h]/2;let A;switch(f){case"top":A={x:_,y:r.y-s.height};break;case"bottom":A={x:_,y:r.y+r.height};break;case"right":A={x:r.x+r.width,y:v};break;case"left":A={x:r.x-s.width,y:v};break;default:A={x:r.x,y:r.y}}switch(Xa(e)){case"start":A[l]-=E*(t&&p?-1:1);break;case"end":A[l]+=E*(t&&p?-1:1);break}return A}const B1=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:l}=t,h=a.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:_,y:v}=Iw(p,r,f),E=r,A={},D=0;for(let C=0;C<h.length;C++){const{name:x,fn:q}=h[C],{x:H,y:G,data:J,reset:ee}=await q({x:_,y:v,initialPlacement:r,placement:E,strategy:s,middlewareData:A,rects:p,platform:l,elements:{reference:n,floating:e}});_=H??_,v=G??v,A={...A,[x]:{...A[x],...J}},ee&&D<=50&&(D++,typeof ee=="object"&&(ee.placement&&(E=ee.placement),ee.rects&&(p=ee.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):ee.rects),{x:_,y:v}=Iw(p,E,f)),C=-1)}return{x:_,y:v,placement:E,strategy:s,middlewareData:A}};async function xu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:l,elements:h,strategy:f}=n,{boundary:p="clippingAncestors",rootBoundary:_="viewport",elementContext:v="floating",altBoundary:E=!1,padding:A=0}=ri(e,n),D=UI(A),x=h[E?v==="floating"?"reference":"floating":v],q=od(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(x)))==null||t?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(h.floating)),boundary:p,rootBoundary:_,strategy:f})),H=v==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,G=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h.floating)),J=await(a.isElement==null?void 0:a.isElement(G))?await(a.getScale==null?void 0:a.getScale(G))||{x:1,y:1}:{x:1,y:1},ee=od(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:H,offsetParent:G,strategy:f}):H);return{top:(q.top-ee.top+D.top)/J.y,bottom:(ee.bottom-q.bottom+D.bottom)/J.y,left:(q.left-ee.left+D.left)/J.x,right:(ee.right-q.right+D.right)/J.x}}const $1=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:a,platform:l,elements:h,middlewareData:f}=e,{element:p,padding:_=0}=ri(n,e)||{};if(p==null)return{};const v=UI(_),E={x:t,y:r},A=Tg(s),D=Eg(A),C=await l.getDimensions(p),x=A==="y",q=x?"top":"left",H=x?"bottom":"right",G=x?"clientHeight":"clientWidth",J=a.reference[D]+a.reference[A]-E[A]-a.floating[D],ee=E[A]-a.reference[A],ie=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let P=ie?ie[G]:0;(!P||!await(l.isElement==null?void 0:l.isElement(ie)))&&(P=h.floating[G]||a.floating[D]);const S=J/2-ee/2,k=P/2-C[D]/2-1,O=ls(v[q],k),V=ls(v[H],k),M=O,R=P-C[D]-V,ae=P/2-C[D]/2+S,ke=Sm(M,ae,R),Ae=!f.arrow&&Xa(s)!=null&&ae!==ke&&a.reference[D]/2-(ae<M?O:V)-C[D]/2<0,Te=Ae?ae<M?ae-M:ae-R:0;return{[A]:E[A]+Te,data:{[A]:ke,centerOffset:ae-ke-Te,...Ae&&{alignmentOffset:Te}},reset:Ae}}}),q1=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:a,rects:l,initialPlacement:h,platform:f,elements:p}=e,{mainAxis:_=!0,crossAxis:v=!0,fallbackPlacements:E,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:D="none",flipAlignment:C=!0,...x}=ri(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const q=ii(s),H=us(h),G=ii(h)===h,J=await(f.isRTL==null?void 0:f.isRTL(p.floating)),ee=E||(G||!C?[sd(h)]:F1(h)),ie=D!=="none";!E&&ie&&ee.push(...j1(h,C,D,J));const P=[h,...ee],S=await xu(e,x),k=[];let O=((r=a.flip)==null?void 0:r.overflows)||[];if(_&&k.push(S[q]),v){const ae=L1(s,l,J);k.push(S[ae[0]],S[ae[1]])}if(O=[...O,{placement:s,overflows:k}],!k.every(ae=>ae<=0)){var V,M;const ae=(((V=a.flip)==null?void 0:V.index)||0)+1,ke=P[ae];if(ke)return{data:{index:ae,overflows:O},reset:{placement:ke}};let Ae=(M=O.filter(Te=>Te.overflows[0]<=0).sort((Te,X)=>Te.overflows[1]-X.overflows[1])[0])==null?void 0:M.placement;if(!Ae)switch(A){case"bestFit":{var R;const Te=(R=O.filter(X=>{if(ie){const he=us(X.placement);return he===H||he==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(he=>he>0).reduce((he,ue)=>he+ue,0)]).sort((X,he)=>X[1]-he[1])[0])==null?void 0:R[0];Te&&(Ae=Te);break}case"initialPlacement":Ae=h;break}if(s!==Ae)return{reset:{placement:Ae}}}return{}}}};function Sw(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Aw(n){return V1.some(e=>n[e]>=0)}const H1=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=ri(n,e);switch(r){case"referenceHidden":{const a=await xu(e,{...s,elementContext:"reference"}),l=Sw(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Aw(l)}}}case"escaped":{const a=await xu(e,{...s,altBoundary:!0}),l=Sw(a,t.floating);return{data:{escapedOffsets:l,escaped:Aw(l)}}}default:return{}}}}};async function G1(n,e){const{placement:t,platform:r,elements:s}=n,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=ii(t),h=Xa(t),f=us(t)==="y",p=["left","top"].includes(l)?-1:1,_=a&&f?-1:1,v=ri(e,n);let{mainAxis:E,crossAxis:A,alignmentAxis:D}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return h&&typeof D=="number"&&(A=h==="end"?D*-1:D),f?{x:A*_,y:E*p}:{x:E*p,y:A*_}}const K1=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:a,placement:l,middlewareData:h}=e,f=await G1(e,n);return l===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:a+f.y,data:{...f,placement:l}}}}},W1=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:h={fn:x=>{let{x:q,y:H}=x;return{x:q,y:H}}},...f}=ri(n,e),p={x:t,y:r},_=await xu(e,f),v=us(ii(s)),E=wg(v);let A=p[E],D=p[v];if(a){const x=E==="y"?"top":"left",q=E==="y"?"bottom":"right",H=A+_[x],G=A-_[q];A=Sm(H,A,G)}if(l){const x=v==="y"?"top":"left",q=v==="y"?"bottom":"right",H=D+_[x],G=D-_[q];D=Sm(H,D,G)}const C=h.fn({...e,[E]:A,[v]:D});return{...C,data:{x:C.x-t,y:C.y-r,enabled:{[E]:a,[v]:l}}}}}},Q1=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:a,middlewareData:l}=e,{offset:h=0,mainAxis:f=!0,crossAxis:p=!0}=ri(n,e),_={x:t,y:r},v=us(s),E=wg(v);let A=_[E],D=_[v];const C=ri(h,e),x=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(f){const G=E==="y"?"height":"width",J=a.reference[E]-a.floating[G]+x.mainAxis,ee=a.reference[E]+a.reference[G]-x.mainAxis;A<J?A=J:A>ee&&(A=ee)}if(p){var q,H;const G=E==="y"?"width":"height",J=["top","left"].includes(ii(s)),ee=a.reference[v]-a.floating[G]+(J&&((q=l.offset)==null?void 0:q[v])||0)+(J?0:x.crossAxis),ie=a.reference[v]+a.reference[G]+(J?0:((H=l.offset)==null?void 0:H[v])||0)-(J?x.crossAxis:0);D<ee?D=ee:D>ie&&(D=ie)}return{[E]:A,[v]:D}}}},Y1=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:a,platform:l,elements:h}=e,{apply:f=()=>{},...p}=ri(n,e),_=await xu(e,p),v=ii(s),E=Xa(s),A=us(s)==="y",{width:D,height:C}=a.floating;let x,q;v==="top"||v==="bottom"?(x=v,q=E===(await(l.isRTL==null?void 0:l.isRTL(h.floating))?"start":"end")?"left":"right"):(q=v,x=E==="end"?"top":"bottom");const H=C-_.top-_.bottom,G=D-_.left-_.right,J=ls(C-_[x],H),ee=ls(D-_[q],G),ie=!e.middlewareData.shift;let P=J,S=ee;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(S=G),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=H),ie&&!E){const O=In(_.left,0),V=In(_.right,0),M=In(_.top,0),R=In(_.bottom,0);A?S=D-2*(O!==0||V!==0?O+V:In(_.left,_.right)):P=C-2*(M!==0||R!==0?M+R:In(_.top,_.bottom))}await f({...e,availableWidth:S,availableHeight:P});const k=await l.getDimensions(h.floating);return D!==k.width||C!==k.height?{reset:{rects:!0}}:{}}}};function $d(){return typeof window<"u"}function Za(n){return jI(n)?(n.nodeName||"").toLowerCase():"#document"}function Pn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Dr(n){var e;return(e=(jI(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function jI(n){return $d()?n instanceof Node||n instanceof Pn(n).Node:!1}function nr(n){return $d()?n instanceof Element||n instanceof Pn(n).Element:!1}function kr(n){return $d()?n instanceof HTMLElement||n instanceof Pn(n).HTMLElement:!1}function Pw(n){return!$d()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Pn(n).ShadowRoot}function Wu(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=rr(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function J1(n){return["table","td","th"].includes(Za(n))}function qd(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Ig(n){const e=Sg(),t=nr(n)?rr(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function X1(n){let e=cs(n);for(;kr(e)&&!ba(e);){if(Ig(e))return e;if(qd(e))return null;e=cs(e)}return null}function Sg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ba(n){return["html","body","#document"].includes(Za(n))}function rr(n){return Pn(n).getComputedStyle(n)}function Hd(n){return nr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function cs(n){if(Za(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Pw(n)&&n.host||Dr(n);return Pw(e)?e.host:e}function zI(n){const e=cs(n);return ba(e)?n.ownerDocument?n.ownerDocument.body:n.body:kr(e)&&Wu(e)?e:zI(e)}function bu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=zI(n),a=s===((r=n.ownerDocument)==null?void 0:r.body),l=Pn(s);if(a){const h=Pm(l);return e.concat(l,l.visualViewport||[],Wu(s)?s:[],h&&t?bu(h):[])}return e.concat(s,bu(s,[],t))}function Pm(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function BI(n){const e=rr(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=kr(n),a=s?n.offsetWidth:t,l=s?n.offsetHeight:r,h=id(t)!==a||id(r)!==l;return h&&(t=a,r=l),{width:t,height:r,$:h}}function Ag(n){return nr(n)?n:n.contextElement}function Ta(n){const e=Ag(n);if(!kr(e))return Pr(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:a}=BI(e);let l=(a?id(t.width):t.width)/r,h=(a?id(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!h||!Number.isFinite(h))&&(h=1),{x:l,y:h}}const Z1=Pr(0);function $I(n){const e=Pn(n);return!Sg()||!e.visualViewport?Z1:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eb(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Pn(n)?!1:e}function lo(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=Ag(n);let l=Pr(1);e&&(r?nr(r)&&(l=Ta(r)):l=Ta(n));const h=eb(a,t,r)?$I(a):Pr(0);let f=(s.left+h.x)/l.x,p=(s.top+h.y)/l.y,_=s.width/l.x,v=s.height/l.y;if(a){const E=Pn(a),A=r&&nr(r)?Pn(r):r;let D=E,C=Pm(D);for(;C&&r&&A!==D;){const x=Ta(C),q=C.getBoundingClientRect(),H=rr(C),G=q.left+(C.clientLeft+parseFloat(H.paddingLeft))*x.x,J=q.top+(C.clientTop+parseFloat(H.paddingTop))*x.y;f*=x.x,p*=x.y,_*=x.x,v*=x.y,f+=G,p+=J,D=Pn(C),C=Pm(D)}}return od({width:_,height:v,x:f,y:p})}function Pg(n,e){const t=Hd(n).scrollLeft;return e?e.left+t:lo(Dr(n)).left+t}function qI(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:Pg(n,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function tb(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const a=s==="fixed",l=Dr(r),h=e?qd(e.floating):!1;if(r===l||h&&a)return t;let f={scrollLeft:0,scrollTop:0},p=Pr(1);const _=Pr(0),v=kr(r);if((v||!v&&!a)&&((Za(r)!=="body"||Wu(l))&&(f=Hd(r)),kr(r))){const A=lo(r);p=Ta(r),_.x=A.x+r.clientLeft,_.y=A.y+r.clientTop}const E=l&&!v&&!a?qI(l,f,!0):Pr(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-f.scrollLeft*p.x+_.x+E.x,y:t.y*p.y-f.scrollTop*p.y+_.y+E.y}}function nb(n){return Array.from(n.getClientRects())}function rb(n){const e=Dr(n),t=Hd(n),r=n.ownerDocument.body,s=In(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=In(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-t.scrollLeft+Pg(n);const h=-t.scrollTop;return rr(r).direction==="rtl"&&(l+=In(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:l,y:h}}function ib(n,e){const t=Pn(n),r=Dr(n),s=t.visualViewport;let a=r.clientWidth,l=r.clientHeight,h=0,f=0;if(s){a=s.width,l=s.height;const p=Sg();(!p||p&&e==="fixed")&&(h=s.offsetLeft,f=s.offsetTop)}return{width:a,height:l,x:h,y:f}}function sb(n,e){const t=lo(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,a=kr(n)?Ta(n):Pr(1),l=n.clientWidth*a.x,h=n.clientHeight*a.y,f=s*a.x,p=r*a.y;return{width:l,height:h,x:f,y:p}}function Rw(n,e,t){let r;if(e==="viewport")r=ib(n,t);else if(e==="document")r=rb(Dr(n));else if(nr(e))r=sb(e,t);else{const s=$I(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return od(r)}function HI(n,e){const t=cs(n);return t===e||!nr(t)||ba(t)?!1:rr(t).position==="fixed"||HI(t,e)}function ob(n,e){const t=e.get(n);if(t)return t;let r=bu(n,[],!1).filter(h=>nr(h)&&Za(h)!=="body"),s=null;const a=rr(n).position==="fixed";let l=a?cs(n):n;for(;nr(l)&&!ba(l);){const h=rr(l),f=Ig(l);!f&&h.position==="fixed"&&(s=null),(a?!f&&!s:!f&&h.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Wu(l)&&!f&&HI(n,l))?r=r.filter(_=>_!==l):s=h,l=cs(l)}return e.set(n,r),r}function ab(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const l=[...t==="clippingAncestors"?qd(e)?[]:ob(e,this._c):[].concat(t),r],h=l[0],f=l.reduce((p,_)=>{const v=Rw(e,_,s);return p.top=In(v.top,p.top),p.right=ls(v.right,p.right),p.bottom=ls(v.bottom,p.bottom),p.left=In(v.left,p.left),p},Rw(e,h,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function lb(n){const{width:e,height:t}=BI(n);return{width:e,height:t}}function ub(n,e,t){const r=kr(e),s=Dr(e),a=t==="fixed",l=lo(n,!0,a,e);let h={scrollLeft:0,scrollTop:0};const f=Pr(0);if(r||!r&&!a)if((Za(e)!=="body"||Wu(s))&&(h=Hd(e)),r){const E=lo(e,!0,a,e);f.x=E.x+e.clientLeft,f.y=E.y+e.clientTop}else s&&(f.x=Pg(s));const p=s&&!r&&!a?qI(s,h):Pr(0),_=l.left+h.scrollLeft-f.x-p.x,v=l.top+h.scrollTop-f.y-p.y;return{x:_,y:v,width:l.width,height:l.height}}function em(n){return rr(n).position==="static"}function Cw(n,e){if(!kr(n)||rr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Dr(n)===t&&(t=t.ownerDocument.body),t}function GI(n,e){const t=Pn(n);if(qd(n))return t;if(!kr(n)){let s=cs(n);for(;s&&!ba(s);){if(nr(s)&&!em(s))return s;s=cs(s)}return t}let r=Cw(n,e);for(;r&&J1(r)&&em(r);)r=Cw(r,e);return r&&ba(r)&&em(r)&&!Ig(r)?t:r||X1(n)||t}const cb=async function(n){const e=this.getOffsetParent||GI,t=this.getDimensions,r=await t(n.floating);return{reference:ub(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hb(n){return rr(n).direction==="rtl"}const db={convertOffsetParentRelativeRectToViewportRelativeRect:tb,getDocumentElement:Dr,getClippingRect:ab,getOffsetParent:GI,getElementRects:cb,getClientRects:nb,getDimensions:lb,getScale:Ta,isElement:nr,isRTL:hb};function KI(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function fb(n,e){let t=null,r;const s=Dr(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function l(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),a();const p=n.getBoundingClientRect(),{left:_,top:v,width:E,height:A}=p;if(h||e(),!E||!A)return;const D=Rh(v),C=Rh(s.clientWidth-(_+E)),x=Rh(s.clientHeight-(v+A)),q=Rh(_),G={rootMargin:-D+"px "+-C+"px "+-x+"px "+-q+"px",threshold:In(0,ls(1,f))||1};let J=!0;function ee(ie){const P=ie[0].intersectionRatio;if(P!==f){if(!J)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!KI(p,n.getBoundingClientRect())&&l(),J=!1}try{t=new IntersectionObserver(ee,{...G,root:s.ownerDocument})}catch{t=new IntersectionObserver(ee,G)}t.observe(n)}return l(!0),a}function pb(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,p=Ag(n),_=s||a?[...p?bu(p):[],...bu(e)]:[];_.forEach(q=>{s&&q.addEventListener("scroll",t,{passive:!0}),a&&q.addEventListener("resize",t)});const v=p&&h?fb(p,t):null;let E=-1,A=null;l&&(A=new ResizeObserver(q=>{let[H]=q;H&&H.target===p&&A&&(A.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var G;(G=A)==null||G.observe(e)})),t()}),p&&!f&&A.observe(p),A.observe(e));let D,C=f?lo(n):null;f&&x();function x(){const q=lo(n);C&&!KI(C,q)&&t(),C=q,D=requestAnimationFrame(x)}return t(),()=>{var q;_.forEach(H=>{s&&H.removeEventListener("scroll",t),a&&H.removeEventListener("resize",t)}),v?.(),(q=A)==null||q.disconnect(),A=null,f&&cancelAnimationFrame(D)}}const mb=K1,gb=W1,yb=q1,_b=Y1,vb=H1,xw=$1,wb=Q1,Eb=(n,e,t)=>{const r=new Map,s={platform:db,...t},a={...s.platform,_c:r};return B1(n,e,{...s,platform:a})};var Uh=typeof document<"u"?N.useLayoutEffect:N.useEffect;function ad(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!ad(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const a=s[r];if(!(a==="_owner"&&n.$$typeof)&&!ad(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function WI(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function bw(n,e){const t=WI(n);return Math.round(e*t)/t}function tm(n){const e=N.useRef(n);return Uh(()=>{e.current=n}),e}function Tb(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:l}={},transform:h=!0,whileElementsMounted:f,open:p}=n,[_,v]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[E,A]=N.useState(r);ad(E,r)||A(r);const[D,C]=N.useState(null),[x,q]=N.useState(null),H=N.useCallback(X=>{X!==ie.current&&(ie.current=X,C(X))},[]),G=N.useCallback(X=>{X!==P.current&&(P.current=X,q(X))},[]),J=a||D,ee=l||x,ie=N.useRef(null),P=N.useRef(null),S=N.useRef(_),k=f!=null,O=tm(f),V=tm(s),M=tm(p),R=N.useCallback(()=>{if(!ie.current||!P.current)return;const X={placement:e,strategy:t,middleware:E};V.current&&(X.platform=V.current),Eb(ie.current,P.current,X).then(he=>{const ue={...he,isPositioned:M.current!==!1};ae.current&&!ad(S.current,ue)&&(S.current=ue,Fd.flushSync(()=>{v(ue)}))})},[E,e,t,V,M]);Uh(()=>{p===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,v(X=>({...X,isPositioned:!1})))},[p]);const ae=N.useRef(!1);Uh(()=>(ae.current=!0,()=>{ae.current=!1}),[]),Uh(()=>{if(J&&(ie.current=J),ee&&(P.current=ee),J&&ee){if(O.current)return O.current(J,ee,R);R()}},[J,ee,R,O,k]);const ke=N.useMemo(()=>({reference:ie,floating:P,setReference:H,setFloating:G}),[H,G]),Ae=N.useMemo(()=>({reference:J,floating:ee}),[J,ee]),Te=N.useMemo(()=>{const X={position:t,left:0,top:0};if(!Ae.floating)return X;const he=bw(Ae.floating,_.x),ue=bw(Ae.floating,_.y);return h?{...X,transform:"translate("+he+"px, "+ue+"px)",...WI(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:he,top:ue}},[t,h,Ae.floating,_.x,_.y]);return N.useMemo(()=>({..._,update:R,refs:ke,elements:Ae,floatingStyles:Te}),[_,R,ke,Ae,Te])}const Ib=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?xw({element:r.current,padding:s}).fn(t):{}:r?xw({element:r,padding:s}).fn(t):{}}}},Sb=(n,e)=>({...mb(n),options:[n,e]}),Ab=(n,e)=>({...gb(n),options:[n,e]}),Pb=(n,e)=>({...wb(n),options:[n,e]}),Rb=(n,e)=>({...yb(n),options:[n,e]}),Cb=(n,e)=>({..._b(n),options:[n,e]}),xb=(n,e)=>({...vb(n),options:[n,e]}),bb=(n,e)=>({...Ib(n),options:[n,e]});var kb="Arrow",QI=N.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...a}=n;return Q.jsx(cn.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:Q.jsx("polygon",{points:"0,0 30,0 15,10"})})});QI.displayName=kb;var Nb=QI;function Db(n){const[e,t]=N.useState(void 0);return ao(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let l,h;if("borderBoxSize"in a){const f=a.borderBoxSize,p=Array.isArray(f)?f[0]:f;l=p.inlineSize,h=p.blockSize}else l=n.offsetWidth,h=n.offsetHeight;t({width:l,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var YI="Popper",[JI,XI]=Ud(YI),[bF,ZI]=JI(YI),e0="PopperAnchor",t0=N.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,a=ZI(e0,t),l=N.useRef(null),h=tr(e,l);return N.useEffect(()=>{a.onAnchorChange(r?.current||l.current)}),r?null:Q.jsx(cn.div,{...s,ref:h})});t0.displayName=e0;var Rg="PopperContent",[Vb,Ob]=JI(Rg),n0=N.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:l=0,arrowPadding:h=0,avoidCollisions:f=!0,collisionBoundary:p=[],collisionPadding:_=0,sticky:v="partial",hideWhenDetached:E=!1,updatePositionStrategy:A="optimized",onPlaced:D,...C}=n,x=ZI(Rg,t),[q,H]=N.useState(null),G=tr(e,Fe=>H(Fe)),[J,ee]=N.useState(null),ie=Db(J),P=ie?.width??0,S=ie?.height??0,k=r+(a!=="center"?"-"+a:""),O=typeof _=="number"?_:{top:0,right:0,bottom:0,left:0,..._},V=Array.isArray(p)?p:[p],M=V.length>0,R={padding:O,boundary:V.filter(Lb),altBoundary:M},{refs:ae,floatingStyles:ke,placement:Ae,isPositioned:Te,middlewareData:X}=Tb({strategy:"fixed",placement:k,whileElementsMounted:(...Fe)=>pb(...Fe,{animationFrame:A==="always"}),elements:{reference:x.anchor},middleware:[Sb({mainAxis:s+S,alignmentAxis:l}),f&&Ab({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Pb():void 0,...R}),f&&Rb({...R}),Cb({...R,apply:({elements:Fe,rects:Ue,availableWidth:We,availableHeight:Mt})=>{const{width:di,height:Es}=Ue.reference,dn=Fe.floating.style;dn.setProperty("--radix-popper-available-width",`${We}px`),dn.setProperty("--radix-popper-available-height",`${Mt}px`),dn.setProperty("--radix-popper-anchor-width",`${di}px`),dn.setProperty("--radix-popper-anchor-height",`${Es}px`)}}),J&&bb({element:J,padding:h}),Fb({arrowWidth:P,arrowHeight:S}),E&&xb({strategy:"referenceHidden",...R})]}),[he,ue]=s0(Ae),U=br(D);ao(()=>{Te&&U?.()},[Te,U]);const Z=X.arrow?.x,Pe=X.arrow?.y,Re=X.arrow?.centerOffset!==0,[Oe,Me]=N.useState();return ao(()=>{q&&Me(window.getComputedStyle(q).zIndex)},[q]),Q.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...ke,transform:Te?ke.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[X.transformOrigin?.x,X.transformOrigin?.y].join(" "),...X.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:Q.jsx(Vb,{scope:t,placedSide:he,onArrowChange:ee,arrowX:Z,arrowY:Pe,shouldHideArrow:Re,children:Q.jsx(cn.div,{"data-side":he,"data-align":ue,...C,ref:G,style:{...C.style,animation:Te?void 0:"none"}})})})});n0.displayName=Rg;var r0="PopperArrow",Mb={top:"bottom",right:"left",bottom:"top",left:"right"},i0=N.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,a=Ob(r0,r),l=Mb[a.placedSide];return Q.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:Q.jsx(Nb,{...s,ref:t,style:{...s.style,display:"block"}})})});i0.displayName=r0;function Lb(n){return n!==null}var Fb=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,l=s.arrow?.centerOffset!==0,h=l?0:n.arrowWidth,f=l?0:n.arrowHeight,[p,_]=s0(t),v={start:"0%",center:"50%",end:"100%"}[_],E=(s.arrow?.x??0)+h/2,A=(s.arrow?.y??0)+f/2;let D="",C="";return p==="bottom"?(D=l?v:`${E}px`,C=`${-f}px`):p==="top"?(D=l?v:`${E}px`,C=`${r.floating.height+f}px`):p==="right"?(D=`${-f}px`,C=l?v:`${A}px`):p==="left"&&(D=`${r.floating.width+f}px`,C=l?v:`${A}px`),{data:{x:D,y:C}}}});function s0(n){const[e,t="center"]=n.split("-");return[e,t]}var Ub=t0,jb=n0,zb=i0,[Gd]=Ud("Tooltip",[XI]),Cg=XI(),o0="TooltipProvider",Bb=700,kw="tooltip.open",[$b,a0]=Gd(o0),l0=n=>{const{__scopeTooltip:e,delayDuration:t=Bb,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=n,l=N.useRef(!0),h=N.useRef(!1),f=N.useRef(0);return N.useEffect(()=>{const p=f.current;return()=>window.clearTimeout(p)},[]),Q.jsx($b,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:N.useCallback(()=>{window.clearTimeout(f.current),l.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:h,onPointerInTransitChange:N.useCallback(p=>{h.current=p},[]),disableHoverableContent:s,children:a})};l0.displayName=o0;var u0="Tooltip",[kF,Kd]=Gd(u0),Rm="TooltipTrigger",qb=N.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Kd(Rm,t),a=a0(Rm,t),l=Cg(t),h=N.useRef(null),f=tr(e,h,s.onTriggerChange),p=N.useRef(!1),_=N.useRef(!1),v=N.useCallback(()=>p.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),Q.jsx(Ub,{asChild:!0,...l,children:Q.jsx(cn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:f,onPointerMove:Ct(n.onPointerMove,E=>{E.pointerType!=="touch"&&!_.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),_.current=!0)}),onPointerLeave:Ct(n.onPointerLeave,()=>{s.onTriggerLeave(),_.current=!1}),onPointerDown:Ct(n.onPointerDown,()=>{s.open&&s.onClose(),p.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:Ct(n.onFocus,()=>{p.current||s.onOpen()}),onBlur:Ct(n.onBlur,s.onClose),onClick:Ct(n.onClick,s.onClose)})})});qb.displayName=Rm;var Hb="TooltipPortal",[NF,Gb]=Gd(Hb,{forceMount:void 0}),ka="TooltipContent",c0=N.forwardRef((n,e)=>{const t=Gb(ka,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...a}=n,l=Kd(ka,n.__scopeTooltip);return Q.jsx(pg,{present:r||l.open,children:l.disableHoverableContent?Q.jsx(h0,{side:s,...a,ref:e}):Q.jsx(Kb,{side:s,...a,ref:e})})}),Kb=N.forwardRef((n,e)=>{const t=Kd(ka,n.__scopeTooltip),r=a0(ka,n.__scopeTooltip),s=N.useRef(null),a=tr(e,s),[l,h]=N.useState(null),{trigger:f,onClose:p}=t,_=s.current,{onPointerInTransitChange:v}=r,E=N.useCallback(()=>{h(null),v(!1)},[v]),A=N.useCallback((D,C)=>{const x=D.currentTarget,q={x:D.clientX,y:D.clientY},H=Xb(q,x.getBoundingClientRect()),G=Zb(q,H),J=ek(C.getBoundingClientRect()),ee=nk([...G,...J]);h(ee),v(!0)},[v]);return N.useEffect(()=>()=>E(),[E]),N.useEffect(()=>{if(f&&_){const D=x=>A(x,_),C=x=>A(x,f);return f.addEventListener("pointerleave",D),_.addEventListener("pointerleave",C),()=>{f.removeEventListener("pointerleave",D),_.removeEventListener("pointerleave",C)}}},[f,_,A,E]),N.useEffect(()=>{if(l){const D=C=>{const x=C.target,q={x:C.clientX,y:C.clientY},H=f?.contains(x)||_?.contains(x),G=!tk(q,l);H?E():G&&(E(),p())};return document.addEventListener("pointermove",D),()=>document.removeEventListener("pointermove",D)}},[f,_,l,p,E]),Q.jsx(h0,{...n,ref:a})}),[Wb,Qb]=Gd(u0,{isInside:!1}),Yb=ox("TooltipContent"),h0=N.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:l,...h}=n,f=Kd(ka,t),p=Cg(t),{onClose:_}=f;return N.useEffect(()=>(document.addEventListener(kw,_),()=>document.removeEventListener(kw,_)),[_]),N.useEffect(()=>{if(f.trigger){const v=E=>{E.target?.contains(f.trigger)&&_()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,_]),Q.jsx(fg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:_,children:Q.jsxs(jb,{"data-state":f.stateAttribute,...p,...h,ref:e,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Q.jsx(Yb,{children:r}),Q.jsx(Wb,{scope:t,isInside:!0,children:Q.jsx(Cx,{id:f.contentId,role:"tooltip",children:s||r})})]})})});c0.displayName=ka;var d0="TooltipArrow",Jb=N.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Cg(t);return Qb(d0,t).isInside?null:Q.jsx(zb,{...s,...r,ref:e})});Jb.displayName=d0;function Xb(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,r,s,a)){case a:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Zb(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function ek(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function tk(n,e){const{x:t,y:r}=n;let s=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const h=e[a].x,f=e[a].y,p=e[l].x,_=e[l].y;f>r!=_>r&&t<(p-h)*(r-f)/(_-f)+h&&(s=!s)}return s}function nk(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),rk(e)}function rk(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ik=l0,f0=c0;const sk=ik,ok=N.forwardRef(({className:n,sideOffset:e=4,...t},r)=>Q.jsx(f0,{ref:r,sideOffset:e,className:hn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));ok.displayName=f0.displayName;const p0=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",n),...e}));p0.displayName="Card";const ak=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("flex flex-col space-y-1.5 p-6",n),...e}));ak.displayName="CardHeader";const lk=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("text-2xl font-semibold leading-none tracking-tight",n),...e}));lk.displayName="CardTitle";const uk=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("text-sm text-muted-foreground",n),...e}));uk.displayName="CardDescription";const m0=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("p-6 pt-0",n),...e}));m0.displayName="CardContent";const ck=N.forwardRef(({className:n,...e},t)=>Q.jsx("div",{ref:t,className:hn("flex items-center p-6 pt-0",n),...e}));ck.displayName="CardFooter";const hk=PI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),g0=N.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},a)=>{const l=r?ix:"button";return Q.jsx(l,{className:hn(hk({variant:e,size:t,className:n})),ref:a,...s})});g0.displayName="Button";function dk(){const n="/kids/".replace(/\/$/,"");return Q.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-[hsl(var(--macaron-pink)/0.3)] to-[hsl(var(--macaron-blue)/0.3)]",children:Q.jsx(p0,{className:"w-full max-w-md mx-4 border-4 border-white rounded-3xl shadow-xl",children:Q.jsxs(m0,{className:"pt-6 text-center",children:[Q.jsxs("div",{className:"flex flex-col items-center gap-4 mb-6",children:[Q.jsx(Yx,{className:"h-16 w-16 text-[hsl(var(--macaron-pink-dark))]"}),Q.jsx("h1",{className:"text-3xl font-display font-bold text-foreground",children:""})]}),Q.jsx("p",{className:"text-muted-foreground mb-6",children:"..."}),Q.jsx(TC,{href:n+"/",children:Q.jsx(g0,{className:"btn-macaron btn-purple w-full py-6 text-lg rounded-xl",children:""})})]})})})}const fk=()=>{};var Nw={};const y0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},pk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},_0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,_=a>>2,v=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,A=p&63;f||(A=64,l||(E=64)),r.push(t[_],t[v],t[E],t[A])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(y0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||v==null)throw new mk;const E=a<<2|h>>4;if(r.push(E),p!==64){const A=h<<4&240|p>>2;if(r.push(A),v!==64){const D=p<<6&192|v;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gk=function(n){const e=y0(n);return _0.encodeByteArray(e,!0)},v0=function(n){return gk(n).replace(/\./g,"")},w0=function(n){try{return _0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function E0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yk=()=>E0().__FIREBASE_DEFAULTS__,_k=()=>{if(typeof process>"u"||typeof Nw>"u")return;const n=Nw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&w0(n[1]);return e&&JSON.parse(e)},Wd=()=>{try{return fk()||yk()||_k()||vk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wk=n=>Wd()?.emulatorHosts?.[n],T0=()=>Wd()?.config,I0=n=>Wd()?.[`_${n}`];class Ek{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function el(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function S0(n){return(await fetch(n,{credentials:"include"})).ok}const gu={};function Tk(){const n={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?n.emulator.push(e):n.prod.push(e);return n}function Ik(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Dw=!1;function Sk(n,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||gu[n]===e||gu[n]||Dw)return;gu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=Tk().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Dw=!0,l()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=Ik(r),A=t("text"),D=document.getElementById(A)||document.createElement("span"),C=t("learnmore"),x=document.getElementById(C)||document.createElement("a"),q=t("preprendIcon"),H=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;h(G),_(x,C);const J=p();f(H,q),G.append(H,D,x,J),document.body.appendChild(G)}a?(D.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function A0(){const n=Wd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ck(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xk(){const n=xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function P0(){return!A0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R0(){return!A0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function C0(){try{return typeof indexedDB=="object"}catch{return!1}}function bk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const kk="FirebaseError";class ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kk,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?Nk(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ci(s,h,r)}}function Nk(n,e){return n.replace(Dk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Dk=/\{\$([^}]+)}/g;function Vk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(Vw(a)&&Vw(l)){if(!uo(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Vw(n){return n!==null&&typeof n=="object"}function Yu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ok(n,e){const t=new Mk(n,e);return t.subscribe.bind(t)}class Mk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Lk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=nm),s.error===void 0&&(s.error=nm),s.complete===void 0&&(s.complete=nm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function nm(){}function Cn(n){return n&&n._delegate?n._delegate:n}class co{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ys="[DEFAULT]";class Fk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ek;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jk(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uk(n){return n===Ys?void 0:n}function jk(n){return n.instantiationMode==="EAGER"}class zk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const Bk={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},$k=je.INFO,qk={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Hk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=qk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xg{constructor(e){this.name=e,this._logLevel=$k,this._logHandler=Hk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const Gk=(n,e)=>e.some(t=>n instanceof t);let Ow,Mw;function Kk(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wk(){return Mw||(Mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x0=new WeakMap,Cm=new WeakMap,b0=new WeakMap,rm=new WeakMap,bg=new WeakMap;function Qk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ts(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&x0.set(t,n)}).catch(()=>{}),bg.set(e,n),e}function Yk(n){if(Cm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Cm.set(n,e)}let xm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||b0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Jk(n){xm=n(xm)}function Xk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(im(this),e,...t);return b0.set(r,e.sort?e.sort():[e]),ts(r)}:Wk().includes(n)?function(...e){return n.apply(im(this),e),ts(x0.get(this))}:function(...e){return ts(n.apply(im(this),e))}}function Zk(n){return typeof n=="function"?Xk(n):(n instanceof IDBTransaction&&Yk(n),Gk(n,Kk())?new Proxy(n,xm):n)}function ts(n){if(n instanceof IDBRequest)return Qk(n);if(rm.has(n))return rm.get(n);const e=Zk(n);return e!==n&&(rm.set(n,e),bg.set(e,n)),e}const im=n=>bg.get(n);function eN(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=ts(l);return r&&l.addEventListener("upgradeneeded",f=>{r(ts(l.result),f.oldVersion,f.newVersion,ts(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const tN=["get","getKey","getAll","getAllKeys","count"],nN=["put","add","delete","clear"],sm=new Map;function Lw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=nN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tN.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return sm.set(e,a),a}Jk(n=>({...n,get:(e,t,r)=>Lw(e,t)||n.get(e,t,r),has:(e,t)=>!!Lw(e,t)||n.has(e,t)}));class rN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function iN(n){return n.getComponent()?.type==="VERSION"}const bm="@firebase/app",Fw="0.14.7";const si=new xg("@firebase/app"),sN="@firebase/app-compat",oN="@firebase/analytics-compat",aN="@firebase/analytics",lN="@firebase/app-check-compat",uN="@firebase/app-check",cN="@firebase/auth",hN="@firebase/auth-compat",dN="@firebase/database",fN="@firebase/data-connect",pN="@firebase/database-compat",mN="@firebase/functions",gN="@firebase/functions-compat",yN="@firebase/installations",_N="@firebase/installations-compat",vN="@firebase/messaging",wN="@firebase/messaging-compat",EN="@firebase/performance",TN="@firebase/performance-compat",IN="@firebase/remote-config",SN="@firebase/remote-config-compat",AN="@firebase/storage",PN="@firebase/storage-compat",RN="@firebase/firestore",CN="@firebase/ai",xN="@firebase/firestore-compat",bN="firebase",kN="12.8.0";const km="[DEFAULT]",NN={[bm]:"fire-core",[sN]:"fire-core-compat",[aN]:"fire-analytics",[oN]:"fire-analytics-compat",[uN]:"fire-app-check",[lN]:"fire-app-check-compat",[cN]:"fire-auth",[hN]:"fire-auth-compat",[dN]:"fire-rtdb",[fN]:"fire-data-connect",[pN]:"fire-rtdb-compat",[mN]:"fire-fn",[gN]:"fire-fn-compat",[yN]:"fire-iid",[_N]:"fire-iid-compat",[vN]:"fire-fcm",[wN]:"fire-fcm-compat",[EN]:"fire-perf",[TN]:"fire-perf-compat",[IN]:"fire-rc",[SN]:"fire-rc-compat",[AN]:"fire-gcs",[PN]:"fire-gcs-compat",[RN]:"fire-fst",[xN]:"fire-fst-compat",[CN]:"fire-vertex","fire-js":"fire-js",[bN]:"fire-js-all"};const ld=new Map,DN=new Map,Nm=new Map;function Uw(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Na(n){const e=n.name;if(Nm.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,n);for(const t of ld.values())Uw(t,n);for(const t of DN.values())Uw(t,n);return!0}function kg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}const VN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new Qu("app","Firebase",VN);class ON{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}const tl=kN;function k0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:km,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ns.create("bad-app-name",{appName:String(s)});if(t||(t=T0()),!t)throw ns.create("no-options");const a=ld.get(s);if(a){if(uo(t,a.options)&&uo(r,a.config))return a;throw ns.create("duplicate-app",{appName:s})}const l=new zk(s);for(const f of Nm.values())l.addComponent(f);const h=new ON(t,r,l);return ld.set(s,h),h}function MN(n=km){const e=ld.get(n);if(!e&&n===km&&T0())return k0();if(!e)throw ns.create("no-app",{appName:n});return e}function rs(n,e,t){let r=NN[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(l.join(" "));return}Na(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const LN="firebase-heartbeat-database",FN=1,ku="firebase-heartbeat-store";let om=null;function N0(){return om||(om=eN(LN,FN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw ns.create("idb-open",{originalErrorMessage:n.message})})),om}async function UN(n){try{const t=(await N0()).transaction(ku),r=await t.objectStore(ku).get(D0(n));return await t.done,r}catch(e){if(e instanceof ci)si.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}}async function jw(n,e){try{const r=(await N0()).transaction(ku,"readwrite");await r.objectStore(ku).put(e,D0(n)),await r.done}catch(t){if(t instanceof ci)si.warn(t.message);else{const r=ns.create("idb-set",{originalErrorMessage:t?.message});si.warn(r.message)}}}function D0(n){return`${n.name}!${n.options.appId}`}const jN=1024,zN=30;class BN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>zN){const s=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zw(),{heartbeatsToSend:t,unsentEntries:r}=$N(this._heartbeatsCache.heartbeats),s=v0(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return si.warn(e),""}}}function zw(){return new Date().toISOString().substring(0,10)}function $N(n,e=jN){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),Bw(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Bw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class qN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C0()?bk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bw(n){return v0(JSON.stringify({version:2,heartbeats:n})).length}function HN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GN(n){Na(new co("platform-logger",e=>new rN(e),"PRIVATE")),Na(new co("heartbeat",e=>new BN(e),"PRIVATE")),rs(bm,Fw,n),rs(bm,Fw,"esm2020"),rs("fire-js","")}GN("");var KN="firebase",WN="12.8.0";rs(KN,WN,"app");function V0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QN=V0,O0=new Qu("auth","Firebase",V0());const ud=new xg("@firebase/auth");function YN(n,...e){ud.logLevel<=je.WARN&&ud.warn(`Auth (${tl}): ${n}`,...e)}function jh(n,...e){ud.logLevel<=je.ERROR&&ud.error(`Auth (${tl}): ${n}`,...e)}function oi(n,...e){throw Ng(n,...e)}function Rr(n,...e){return Ng(n,...e)}function M0(n,e,t){const r={...QN(),[e]:t};return new Qu("auth","Firebase",r).create(e,{appName:n.name})}function is(n){return M0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ng(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return O0.create(n,...e)}function xe(n,e,...t){if(!n)throw Ng(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw jh(e),new Error(e)}function ai(n,e){n||Zr(e)}function Dm(){return typeof self<"u"&&self.location?.href||""}function JN(){return $w()==="http:"||$w()==="https:"}function $w(){return typeof self<"u"&&self.location?.protocol||null}function XN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JN()||Rk()||"connection"in navigator)?navigator.onLine:!0}function ZN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Ju{constructor(e,t){this.shortDelay=e,this.longDelay=t,ai(t>e,"Short delay should be less than long delay!"),this.isMobile=Ak()||Ck()}get(){return XN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Dg(n,e){ai(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class L0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const eD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const tD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nD=new Ju(3e4,6e4);function Qd(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function nl(n,e,t,r,s={}){return F0(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Yu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...a};return Pk()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&el(n.emulatorConfig.host)&&(p.credentials="include"),L0.fetch()(await j0(n,n.config.apiHost,t,h),p)})}async function F0(n,e,t){n._canInitEmulator=!1;const r={...eD,...e};try{const s=new rD(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ch(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ch(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Ch(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Ch(n,"user-disabled",l);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw M0(n,_,p);oi(n,_)}}catch(s){if(s instanceof ci)throw s;oi(n,"network-request-failed",{message:String(s)})}}async function U0(n,e,t,r,s={}){const a=await nl(n,e,t,r,s);return"mfaPendingCredential"in a&&oi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function j0(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Dg(n.config,s):`${n.config.apiScheme}://${s}`;return tD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class rD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Rr(this.auth,"network-request-failed")),nD.get())})}}function Ch(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Rr(n,e,r);return s.customData._tokenResponse=t,s}async function iD(n,e){return nl(n,"POST","/v1/accounts:delete",e)}async function cd(n,e){return nl(n,"POST","/v1/accounts:lookup",e)}function yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sD(n,e=!1){const t=Cn(n),r=await t.getIdToken(e),s=Vg(r);xe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:yu(am(s.auth_time)),issuedAtTime:yu(am(s.iat)),expirationTime:yu(am(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function am(n){return Number(n)*1e3}function Vg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const s=w0(t);return s?JSON.parse(s):(jh("Failed to decode base64 JWT payload"),null)}catch(s){return jh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function qw(n){const e=Vg(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Nu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ci&&oD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class aD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hd(n){const e=n.auth,t=await n.getIdToken(),r=await Nu(n,cd(e,{idToken:t}));xe(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?z0(s.providerUserInfo):[],l=uD(n.providerData,a),h=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!l?.length,p=h?f:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function lD(n){const e=Cn(n);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uD(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function z0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function cD(n,e){const t=await F0(n,{},async()=>{const r=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await j0(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&el(n.emulatorConfig.host)&&(f.credentials="include"),L0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hD(n,e){return nl(n,"POST","/v2/accounts:revokeToken",Qd(n,e))}class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=qw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await cD(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Ia;return r&&(xe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(xe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function qi(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new aD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Nu(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sD(this,e)}reload(){return lD(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await Nu(this,iD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:A,providerData:D,stsTokenManager:C}=t;xe(v&&C,e,"internal-error");const x=Ia.fromJSON(this.name,C);xe(typeof v=="string",e,"internal-error"),qi(r,e.name),qi(s,e.name),xe(typeof E=="boolean",e,"internal-error"),xe(typeof A=="boolean",e,"internal-error"),qi(a,e.name),qi(l,e.name),qi(h,e.name),qi(f,e.name),qi(p,e.name),qi(_,e.name);const q=new Zn({uid:v,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:A,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:x,createdAt:p,lastLoginAt:_});return D&&Array.isArray(D)&&(q.providerData=D.map(H=>({...H}))),f&&(q._redirectEventId=f),q}static async _fromIdTokenResponse(e,t,r=!1){const s=new Ia;s.updateFromServerResponse(t);const a=new Zn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hd(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];xe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?z0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,h=new Ia;h.updateFromIdToken(r);const f=new Zn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,p),f}}const Hw=new Map;function ei(n){ai(n instanceof Function,"Expected a class definition");let e=Hw.get(n);return e?(ai(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Hw.set(n,e),e)}class B0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}B0.type="NONE";const Gw=B0;function zh(n,e,t){return`firebase:${n}:${e}:${t}`}class Sa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=zh(this.userKey,s.apiKey,a),this.fullPersistenceKey=zh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cd(this.auth,{idToken:e}).catch(()=>{});return t?Zn._fromGetAccountInfoResponse(this.auth,t,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Sa(ei(Gw),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||ei(Gw);const l=zh(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(l);if(_){let v;if(typeof _=="string"){const E=await cd(e,{idToken:_}).catch(()=>{});if(!E)break;v=await Zn._fromGetAccountInfoResponse(e,E,_)}else v=Zn._fromJSON(e,_);p!==a&&(h=v),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Sa(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Sa(a,e,r))}}function Kw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W0(e))return"Blackberry";if(Q0(e))return"Webos";if(q0(e))return"Safari";if((e.includes("chrome/")||H0(e))&&!e.includes("edge/"))return"Chrome";if(K0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function $0(n=xt()){return/firefox\//i.test(n)}function q0(n=xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H0(n=xt()){return/crios\//i.test(n)}function G0(n=xt()){return/iemobile/i.test(n)}function K0(n=xt()){return/android/i.test(n)}function W0(n=xt()){return/blackberry/i.test(n)}function Q0(n=xt()){return/webos/i.test(n)}function Og(n=xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dD(n=xt()){return Og(n)&&!!window.navigator?.standalone}function fD(){return xk()&&document.documentMode===10}function Y0(n=xt()){return Og(n)||K0(n)||Q0(n)||W0(n)||/windows phone/i.test(n)||G0(n)}function J0(n,e=[]){let t;switch(n){case"Browser":t=Kw(xt());break;case"Worker":t=`${Kw(xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tl}/${r}`}class pD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function mD(n,e={}){return nl(n,"GET","/v2/passwordPolicy",Qd(n,e))}const gD=6;class yD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class _D{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ww(this),this.idTokenSubscription=new Ww(this),this.beforeStateQueue=new pD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ei(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Sa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cd(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(is(this));const t=e?Cn(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mD(this),t=new yD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ei(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Sa.create(this,[ei(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yd(n){return Cn(n)}class Ww{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vD(n){Mg=n}function wD(n){return Mg.loadJS(n)}function ED(){return Mg.gapiScript}function TD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ID(n,e){const t=kg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(uo(a,e??{}))return s;oi(s,"already-initialized")}return t.initialize({options:e})}function SD(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ei);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AD(n,e,t){const r=Yd(n);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=X0(e),{host:l,port:h}=PD(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},_=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(uo(p,r.config.emulator)&&uo(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,el(l)?(S0(`${a}//${l}${f}`),Sk("Auth",!0)):RD()}function X0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function PD(n){const e=X0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Qw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Qw(l)}}}function Qw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Z0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function Aa(n,e){return U0(n,"POST","/v1/accounts:signInWithIdp",Qd(n,e))}const CD="http://localhost";class ho extends Z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new ho(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Aa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Aa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Aa(e,t)}buildRequest(){const e={requestUri:CD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yu(t)}return e}}class eS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xu extends eS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qi extends Xu{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";class Yi extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Yi.credential(t,r)}catch{return null}}}Yi.GOOGLE_SIGN_IN_METHOD="google.com";Yi.PROVIDER_ID="google.com";class Ji extends Xu{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";class Xi extends Xu{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xi.credential(t,r)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";async function xD(n,e){return U0(n,"POST","/v1/accounts:signUp",Qd(n,e))}class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Zn._fromIdTokenResponse(e,r,s),l=Yw(r);return new hs({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Yw(r);return new hs({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function bD(n){if(Xn(n.app))return Promise.reject(is(n));const e=Yd(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new hs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await xD(e,{returnSecureToken:!0}),r=await hs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class dd extends ci{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new dd(e,t,r,s)}}function tS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dd._fromErrorAndOperation(n,a,e,r):a})}async function kD(n,e,t=!1){const r=await Nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hs._forOperation(n,"link",r)}async function ND(n,e,t=!1){const{auth:r}=n;if(Xn(r.app))return Promise.reject(is(r));const s="reauthenticate";try{const a=await Nu(n,tS(r,s,e,n),t);xe(a.idToken,r,"internal-error");const l=Vg(a.idToken);xe(l,r,"internal-error");const{sub:h}=l;return xe(n.uid===h,r,"user-mismatch"),hs._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&oi(r,"user-mismatch"),a}}async function DD(n,e,t=!1){if(Xn(n.app))return Promise.reject(is(n));const r="signIn",s=await tS(n,r,e),a=await hs._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function VD(n,e,t,r){return Cn(n).onIdTokenChanged(e,t,r)}function OD(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}function MD(n,e,t,r){return Cn(n).onAuthStateChanged(e,t,r)}const fd="__sak";class nS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LD=1e3,FD=10;class rS extends nS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);fD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FD):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rS.type="LOCAL";const UD=rS;class iS extends nS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iS.type="SESSION";const sS=iS;function jD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await jD(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];function Lg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=Lg("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Cr(){return window}function BD(n){Cr().location.href=n}function oS(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function $D(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qD(){return navigator?.serviceWorker?.controller||null}function HD(){return oS()?self:null}const aS="firebaseLocalStorageDb",GD=1,pd="firebaseLocalStorage",lS="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xd(n,e){return n.transaction([pd],e?"readwrite":"readonly").objectStore(pd)}function KD(){const n=indexedDB.deleteDatabase(aS);return new Zu(n).toPromise()}function Om(){const n=indexedDB.open(aS,GD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(pd,{keyPath:lS})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(pd)?e(r):(r.close(),await KD(),e(await Om()))})})}async function Jw(n,e,t){const r=Xd(n,!0).put({[lS]:e,value:t});return new Zu(r).toPromise()}async function WD(n,e){const t=Xd(n,!1).get(e),r=await new Zu(t).toPromise();return r===void 0?null:r.value}function Xw(n,e){const t=Xd(n,!0).delete(e);return new Zu(t).toPromise()}const QD=800,YD=3;class uS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Om(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>YD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(HD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $D(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await Jw(e,fd,"1"),await Xw(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>WD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Xd(s,!1).getAll();return new Zu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uS.type="LOCAL";const JD=uS;new Ju(3e4,6e4);function XD(n,e){return e?ei(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fg extends Z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Aa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Aa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZD(n){return DD(n.auth,new Fg(n),n.bypassAuthState)}function eV(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),ND(t,new Fg(n),n.bypassAuthState)}async function tV(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),kD(t,new Fg(n),n.bypassAuthState)}class cS{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZD;case"linkViaPopup":case"linkViaRedirect":return tV;case"reauthViaPopup":case"reauthViaRedirect":return eV;default:oi(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nV=new Ju(2e3,1e4);class wa extends cS{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Lg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nV.get())};e()}}wa.currentPopupAction=null;const rV="pendingRedirect",Bh=new Map;class iV extends cS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const r=await sV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sV(n,e){const t=lV(e),r=aV(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function oV(n,e){Bh.set(n._key(),e)}function aV(n){return ei(n._redirectPersistence)}function lV(n){return zh(rV,n.config.apiKey,n.name)}async function uV(n,e,t=!1){if(Xn(n.app))return Promise.reject(is(n));const r=Yd(n),s=XD(r,e),l=await new iV(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const cV=600*1e3;class hV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!hS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Rr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zw(e))}saveEventToCache(e){this.cachedEventUids.add(Zw(e)),this.lastProcessedEventTime=Date.now()}}function Zw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function dV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hS(n);default:return!1}}async function fV(n,e={}){return nl(n,"GET","/v1/projects",e)}const pV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mV=/^https?/;async function gV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fV(n);for(const t of e)try{if(yV(t))return}catch{}oi(n,"unauthorized-domain")}function yV(n){const e=Dm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!mV.test(t))return!1;if(pV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const _V=new Ju(3e4,6e4);function eE(){const n=Cr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vV(n){return new Promise((e,t)=>{function r(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),t(Rr(n,"network-request-failed"))},timeout:_V.get()})}if(Cr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Cr().gapi?.load)r();else{const s=TD("iframefcb");return Cr()[s]=()=>{gapi.load?r():t(Rr(n,"network-request-failed"))},wD(`${ED()}?onload=${s}`).catch(a=>t(a))}}).catch(e=>{throw $h=null,e})}let $h=null;function wV(n){return $h=$h||vV(n),$h}const EV=new Ju(5e3,15e3),TV="__/auth/iframe",IV="emulator/auth/iframe",SV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PV(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dg(e,IV):`https://${n.config.authDomain}/${TV}`,r={apiKey:e.apiKey,appName:n.name,v:tl},s=AV.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Yu(r).slice(1)}`}async function RV(n){const e=await wV(n),t=Cr().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:PV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SV,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=Rr(n,"network-request-failed"),h=Cr().setTimeout(()=>{a(l)},EV.get());function f(){Cr().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}const CV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xV=500,bV=600,kV="_blank",NV="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DV(n,e,t,r=xV,s=bV){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...CV,width:r.toString(),height:s.toString(),top:a,left:l},p=xt().toLowerCase();t&&(h=H0(p)?kV:t),$0(p)&&(e=e||NV,f.scrollbars="yes");const _=Object.entries(f).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(dD(p)&&h!=="_self")return VV(e||"",h),new tE(null);const v=window.open(e||"",h,_);xe(v,n,"popup-blocked");try{v.focus()}catch{}return new tE(v)}function VV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const OV="__/auth/handler",MV="emulator/auth/handler",LV=encodeURIComponent("fac");async function nE(n,e,t,r,s,a){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:tl,eventId:s};if(e instanceof eS){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Vk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))l[_]=v}if(e instanceof Xu){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),p=f?`#${LV}=${encodeURIComponent(f)}`:"";return`${FV(n)}?${Yu(h).slice(1)}${p}`}function FV({config:n}){return n.emulator?Dg(n,MV):`https://${n.authDomain}/${OV}`}const lm="webStorageSupport";class UV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sS,this._completeRedirectFn=uV,this._overrideRedirectResult=oV}async _openPopup(e,t,r,s){ai(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await nE(e,t,r,Dm(),s);return DV(e,a,Lg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await nE(e,t,r,Dm(),s);return BD(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ai(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await RV(e),r=new hV(e);return t.register("authEvent",s=>(xe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lm,{type:lm},s=>{const a=s?.[0]?.[lm];a!==void 0&&t(!!a),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Y0()||q0()||Og()}}const jV=UV;var rE="@firebase/auth",iE="1.12.0";class zV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $V(n){Na(new co("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;xe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J0(n)},p=new _D(r,s,a,f);return SD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Na(new co("auth-internal",e=>{const t=Yd(e.getProvider("auth").getImmediate());return(r=>new zV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(rE,iE,BV(n)),rs(rE,iE,"esm2020")}const qV=300,HV=I0("authIdTokenMaxAge")||qV;let sE=null;const GV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HV)return;const s=t?.token;sE!==s&&(sE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KV(n=MN()){const e=kg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ID(n,{popupRedirectResolver:jV,persistence:[JD,UD,sS]}),r=I0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=GV(a.toString());OD(t,l,()=>l(t.currentUser)),VD(t,h=>l(h))}}const s=wk("auth");return s&&AD(t,`http://${s}`),t}function WV(){return document.getElementsByTagName("head")?.[0]??document}vD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Rr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",WV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$V("Browser");var oE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ss,dS;(function(){var n;function e(P,S){function k(){}k.prototype=S.prototype,P.F=S.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(O,V,M){for(var R=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)R[ae-2]=arguments[ae];return S.prototype[V].apply(O,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,S,k){k||(k=0);const O=Array(16);if(typeof S=="string")for(var V=0;V<16;++V)O[V]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(V=0;V<16;++V)O[V]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=P.g[0],k=P.g[1],V=P.g[2];let M=P.g[3],R;R=S+(M^k&(V^M))+O[0]+3614090360&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(V^S&(k^V))+O[1]+3905402710&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(k^M&(S^k))+O[2]+606105819&4294967295,V=M+(R<<17&4294967295|R>>>15),R=k+(S^V&(M^S))+O[3]+3250441966&4294967295,k=V+(R<<22&4294967295|R>>>10),R=S+(M^k&(V^M))+O[4]+4118548399&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(V^S&(k^V))+O[5]+1200080426&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(k^M&(S^k))+O[6]+2821735955&4294967295,V=M+(R<<17&4294967295|R>>>15),R=k+(S^V&(M^S))+O[7]+4249261313&4294967295,k=V+(R<<22&4294967295|R>>>10),R=S+(M^k&(V^M))+O[8]+1770035416&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(V^S&(k^V))+O[9]+2336552879&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(k^M&(S^k))+O[10]+4294925233&4294967295,V=M+(R<<17&4294967295|R>>>15),R=k+(S^V&(M^S))+O[11]+2304563134&4294967295,k=V+(R<<22&4294967295|R>>>10),R=S+(M^k&(V^M))+O[12]+1804603682&4294967295,S=k+(R<<7&4294967295|R>>>25),R=M+(V^S&(k^V))+O[13]+4254626195&4294967295,M=S+(R<<12&4294967295|R>>>20),R=V+(k^M&(S^k))+O[14]+2792965006&4294967295,V=M+(R<<17&4294967295|R>>>15),R=k+(S^V&(M^S))+O[15]+1236535329&4294967295,k=V+(R<<22&4294967295|R>>>10),R=S+(V^M&(k^V))+O[1]+4129170786&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^V&(S^k))+O[6]+3225465664&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^k&(M^S))+O[11]+643717713&4294967295,V=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(V^M))+O[0]+3921069994&4294967295,k=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(k^V))+O[5]+3593408605&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^V&(S^k))+O[10]+38016083&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^k&(M^S))+O[15]+3634488961&4294967295,V=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(V^M))+O[4]+3889429448&4294967295,k=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(k^V))+O[9]+568446438&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^V&(S^k))+O[14]+3275163606&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^k&(M^S))+O[3]+4107603335&4294967295,V=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(V^M))+O[8]+1163531501&4294967295,k=V+(R<<20&4294967295|R>>>12),R=S+(V^M&(k^V))+O[13]+2850285829&4294967295,S=k+(R<<5&4294967295|R>>>27),R=M+(k^V&(S^k))+O[2]+4243563512&4294967295,M=S+(R<<9&4294967295|R>>>23),R=V+(S^k&(M^S))+O[7]+1735328473&4294967295,V=M+(R<<14&4294967295|R>>>18),R=k+(M^S&(V^M))+O[12]+2368359562&4294967295,k=V+(R<<20&4294967295|R>>>12),R=S+(k^V^M)+O[5]+4294588738&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^V)+O[8]+2272392833&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^k)+O[11]+1839030562&4294967295,V=M+(R<<16&4294967295|R>>>16),R=k+(V^M^S)+O[14]+4259657740&4294967295,k=V+(R<<23&4294967295|R>>>9),R=S+(k^V^M)+O[1]+2763975236&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^V)+O[4]+1272893353&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^k)+O[7]+4139469664&4294967295,V=M+(R<<16&4294967295|R>>>16),R=k+(V^M^S)+O[10]+3200236656&4294967295,k=V+(R<<23&4294967295|R>>>9),R=S+(k^V^M)+O[13]+681279174&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^V)+O[0]+3936430074&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^k)+O[3]+3572445317&4294967295,V=M+(R<<16&4294967295|R>>>16),R=k+(V^M^S)+O[6]+76029189&4294967295,k=V+(R<<23&4294967295|R>>>9),R=S+(k^V^M)+O[9]+3654602809&4294967295,S=k+(R<<4&4294967295|R>>>28),R=M+(S^k^V)+O[12]+3873151461&4294967295,M=S+(R<<11&4294967295|R>>>21),R=V+(M^S^k)+O[15]+530742520&4294967295,V=M+(R<<16&4294967295|R>>>16),R=k+(V^M^S)+O[2]+3299628645&4294967295,k=V+(R<<23&4294967295|R>>>9),R=S+(V^(k|~M))+O[0]+4096336452&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~V))+O[7]+1126891415&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~k))+O[14]+2878612391&4294967295,V=M+(R<<15&4294967295|R>>>17),R=k+(M^(V|~S))+O[5]+4237533241&4294967295,k=V+(R<<21&4294967295|R>>>11),R=S+(V^(k|~M))+O[12]+1700485571&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~V))+O[3]+2399980690&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~k))+O[10]+4293915773&4294967295,V=M+(R<<15&4294967295|R>>>17),R=k+(M^(V|~S))+O[1]+2240044497&4294967295,k=V+(R<<21&4294967295|R>>>11),R=S+(V^(k|~M))+O[8]+1873313359&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~V))+O[15]+4264355552&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~k))+O[6]+2734768916&4294967295,V=M+(R<<15&4294967295|R>>>17),R=k+(M^(V|~S))+O[13]+1309151649&4294967295,k=V+(R<<21&4294967295|R>>>11),R=S+(V^(k|~M))+O[4]+4149444226&4294967295,S=k+(R<<6&4294967295|R>>>26),R=M+(k^(S|~V))+O[11]+3174756917&4294967295,M=S+(R<<10&4294967295|R>>>22),R=V+(S^(M|~k))+O[2]+718787259&4294967295,V=M+(R<<15&4294967295|R>>>17),R=k+(M^(V|~S))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+M&4294967295}r.prototype.v=function(P,S){S===void 0&&(S=P.length);const k=S-this.blockSize,O=this.C;let V=this.h,M=0;for(;M<S;){if(V==0)for(;M<=k;)s(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<S;)if(O[V++]=P.charCodeAt(M++),V==this.blockSize){s(this,O),V=0;break}}else for(;M<S;)if(O[V++]=P[M++],V==this.blockSize){s(this,O),V=0;break}}this.h=V,this.o+=S},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;S=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=S&255,S/=256;for(this.v(P),P=Array(16),S=0,k=0;k<4;++k)for(let O=0;O<32;O+=8)P[S++]=this.g[k]>>>O&255;return P};function a(P,S){var k=h;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=S(P)}function l(P,S){this.h=S;const k=[];let O=!0;for(let V=P.length-1;V>=0;V--){const M=P[V]|0;O&&M==S||(k[V]=M,O=!1)}this.g=k}var h={};function f(P){return-128<=P&&P<128?a(P,function(S){return new l([S|0],S<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return v;if(P<0)return x(p(-P));const S=[];let k=1;for(let O=0;P>=k;O++)S[O]=P/k|0,k*=4294967296;return new l(S,0)}function _(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return x(_(P.substring(1),S));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=p(Math.pow(S,8));let O=v;for(let M=0;M<P.length;M+=8){var V=Math.min(8,P.length-M);const R=parseInt(P.substring(M,M+V),S);V<8?(V=p(Math.pow(S,V)),O=O.j(V).add(p(R))):(O=O.j(k),O=O.add(p(R)))}return O}var v=f(0),E=f(1),A=f(16777216);n=l.prototype,n.m=function(){if(C(this))return-x(this).m();let P=0,S=1;for(let k=0;k<this.g.length;k++){const O=this.i(k);P+=(O>=0?O:4294967296+O)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(C(this))return"-"+x(this).toString(P);const S=p(Math.pow(P,6));var k=this;let O="";for(;;){const V=J(k,S).g;k=q(k,V.j(S));let M=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=V,D(k))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(let S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function C(P){return P.h==-1}n.l=function(P){return P=q(this,P),C(P)?-1:D(P)?0:1};function x(P){const S=P.g.length,k=[];for(let O=0;O<S;O++)k[O]=~P.g[O];return new l(k,~P.h).add(E)}n.abs=function(){return C(this)?x(this):this},n.add=function(P){const S=Math.max(this.g.length,P.g.length),k=[];let O=0;for(let V=0;V<=S;V++){let M=O+(this.i(V)&65535)+(P.i(V)&65535),R=(M>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);O=R>>>16,M&=65535,R&=65535,k[V]=R<<16|M}return new l(k,k[k.length-1]&-2147483648?-1:0)};function q(P,S){return P.add(x(S))}n.j=function(P){if(D(this)||D(P))return v;if(C(this))return C(P)?x(this).j(x(P)):x(x(this).j(P));if(C(P))return x(this.j(x(P)));if(this.l(A)<0&&P.l(A)<0)return p(this.m()*P.m());const S=this.g.length+P.g.length,k=[];for(var O=0;O<2*S;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<P.g.length;V++){const M=this.i(O)>>>16,R=this.i(O)&65535,ae=P.i(V)>>>16,ke=P.i(V)&65535;k[2*O+2*V]+=R*ke,H(k,2*O+2*V),k[2*O+2*V+1]+=M*ke,H(k,2*O+2*V+1),k[2*O+2*V+1]+=R*ae,H(k,2*O+2*V+1),k[2*O+2*V+2]+=M*ae,H(k,2*O+2*V+2)}for(P=0;P<S;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=S;P<2*S;P++)k[P]=0;return new l(k,0)};function H(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function G(P,S){this.g=P,this.h=S}function J(P,S){if(D(S))throw Error("division by zero");if(D(P))return new G(v,v);if(C(P))return S=J(x(P),S),new G(x(S.g),x(S.h));if(C(S))return S=J(P,x(S)),new G(x(S.g),S.h);if(P.g.length>30){if(C(P)||C(S))throw Error("slowDivide_ only works with positive integers.");for(var k=E,O=S;O.l(P)<=0;)k=ee(k),O=ee(O);var V=ie(k,1),M=ie(O,1);for(O=ie(O,2),k=ie(k,2);!D(O);){var R=M.add(O);R.l(P)<=0&&(V=V.add(k),M=R),O=ie(O,1),k=ie(k,1)}return S=q(P,V.j(S)),new G(V,S)}for(V=v;P.l(S)>=0;){for(k=Math.max(1,Math.floor(P.m()/S.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=p(k),R=M.j(S);C(R)||R.l(P)>0;)k-=O,M=p(k),R=M.j(S);D(M)&&(M=E),V=V.add(M),P=q(P,R)}return new G(V,P)}n.B=function(P){return J(this,P).h},n.and=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)&P.i(O);return new l(k,this.h&P.h)},n.or=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)|P.i(O);return new l(k,this.h|P.h)},n.xor=function(P){const S=Math.max(this.g.length,P.g.length),k=[];for(let O=0;O<S;O++)k[O]=this.i(O)^P.i(O);return new l(k,this.h^P.h)};function ee(P){const S=P.g.length+1,k=[];for(let O=0;O<S;O++)k[O]=P.i(O)<<1|P.i(O-1)>>>31;return new l(k,P.h)}function ie(P,S){const k=S>>5;S%=32;const O=P.g.length-k,V=[];for(let M=0;M<O;M++)V[M]=S>0?P.i(M+k)>>>S|P.i(M+k+1)<<32-S:P.i(M+k);return new l(V,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=_,ss=l}).apply(typeof oE<"u"?oE:typeof self<"u"?self:typeof window<"u"?window:{});var xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fS,hu,pS,qh,Mm,mS,gS,yS;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof xh=="object"&&xh];for(var y=0;y<c.length;++y){var w=c[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,y){if(y)e:{var w=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var B=c[I];if(!(B in w))break e;w=w[B]}c=c[c.length-1],I=w[c],y=y(I),y!=I&&y!=null&&e(w,c,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(y){var w=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&w.push([I,y[I]]);return w}});var a=a||{},l=this||self;function h(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function f(c,y,w){return c.call.apply(c.bind,arguments)}function p(c,y,w){return p=f,p.apply(null,arguments)}function _(c,y){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function v(c,y){function w(){}w.prototype=y.prototype,c.Z=y.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(I,B,W){for(var ce=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ce[Ne-2]=arguments[Ne];return y.prototype[B].apply(I,ce)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function A(c){const y=c.length;if(y>0){const w=Array(y);for(let I=0;I<y;I++)w[I]=c[I];return w}return[]}function D(c,y){for(let I=1;I<arguments.length;I++){const B=arguments[I];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=c.length||0;const W=B.length||0;c.length=w+W;for(let ce=0;ce<W;ce++)c[w+ce]=B[ce]}else c.push(B)}}class C{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(c){l.setTimeout(()=>{throw c},0)}function q(){var c=P;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,w){const I=G.get();I.set(y,w),this.h?this.h.next=I:this.g=I,this.h=I}}var G=new C(()=>new J,c=>c.reset());class J{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ie=!1,P=new H,S=()=>{const c=Promise.resolve(void 0);ee=()=>{c.then(k)}};function k(){for(var c;c=q();){try{c.h.call(c.g)}catch(w){x(w)}var y=G;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ie=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};l.addEventListener("test",w,y),l.removeEventListener("test",w,y)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function ae(c,y){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}v(ae,V),ae.prototype.init=function(c,y){const w=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(w=="mouseover"?y=c.fromElement:w=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function Te(c,y,w,I,B){this.listener=c,this.proxy=null,this.src=y,this.type=w,this.capture=!!I,this.ha=B,this.key=++Ae,this.da=this.fa=!1}function X(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function he(c,y,w){for(const I in c)y.call(w,c[I],I,c)}function ue(c,y){for(const w in c)y.call(void 0,c[w],w,c)}function U(c){const y={};for(const w in c)y[w]=c[w];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(c,y){let w,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(w in I)c[w]=I[w];for(let W=0;W<Z.length;W++)w=Z[W],Object.prototype.hasOwnProperty.call(I,w)&&(c[w]=I[w])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,y,w,I,B){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const ce=Me(c,y,I,B);return ce>-1?(y=c[ce],w||(y.fa=!1)):(y=new Te(y,this.src,W,!!I,B),y.fa=w,c.push(y)),y};function Oe(c,y){const w=y.type;if(w in c.g){var I=c.g[w],B=Array.prototype.indexOf.call(I,y,void 0),W;(W=B>=0)&&Array.prototype.splice.call(I,B,1),W&&(X(y),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Me(c,y,w,I){for(let B=0;B<c.length;++B){const W=c[B];if(!W.da&&W.listener==y&&W.capture==!!w&&W.ha==I)return B}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ue={};function We(c,y,w,I,B){if(Array.isArray(y)){for(let W=0;W<y.length;W++)We(c,y[W],w,I,B);return null}return w=ul(w),c&&c[ke]?c.J(y,w,h(I)?!!I.capture:!1,B):Mt(c,y,w,!1,I,B)}function Mt(c,y,w,I,B,W){if(!y)throw Error("Invalid event type");const ce=h(B)?!!B.capture:!!B;let Ne=Io(c);if(Ne||(c[Fe]=Ne=new Re(c)),w=Ne.add(y,w,I,ce,W),w.proxy)return w;if(I=di(),w.proxy=I,I.src=c,I.listener=w,c.addEventListener)M||(B=ce),B===void 0&&(B=!1),c.addEventListener(y.toString(),I,B);else if(c.attachEvent)c.attachEvent(To(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function di(){function c(w){return y.call(c.src,c.listener,w)}const y=lc;return c}function Es(c,y,w,I,B){if(Array.isArray(y))for(var W=0;W<y.length;W++)Es(c,y[W],w,I,B);else I=h(I)?!!I.capture:!!I,w=ul(w),c&&c[ke]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],w=Me(y,w,I,B),w>-1&&(X(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=Io(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Me(y,w,I,B)),(w=c>-1?y[c]:null)&&dn(w))}function dn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ke])Oe(y.i,c);else{var w=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(w,I,c.capture):y.detachEvent?y.detachEvent(To(w),I):y.addListener&&y.removeListener&&y.removeListener(I),(w=Io(y))?(Oe(w,c),w.h==0&&(w.src=null,y[Fe]=null)):X(c)}}}function To(c){return c in Ue?Ue[c]:Ue[c]="on"+c}function lc(c,y){if(c.da)c=!0;else{y=new ae(y,this);const w=c.listener,I=c.ha||c.src;c.fa&&dn(c),c=w.call(I,y)}return c}function Io(c){return c=c[Fe],c instanceof Re?c:null}var Ts="__closure_events_fn_"+(Math.random()*1e9>>>0);function ul(c){return typeof c=="function"?c:(c[Ts]||(c[Ts]=function(y){return c.handleEvent(y)}),c[Ts])}function Et(){O.call(this),this.i=new Re(this),this.M=this,this.G=null}v(Et,O),Et.prototype[ke]=!0,Et.prototype.removeEventListener=function(c,y,w,I){Es(this,c,y,w,I)};function gt(c,y){var w,I=c.G;if(I)for(w=[];I;I=I.G)w.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new V(y,c);else if(y instanceof V)y.target=y.target||c;else{var B=y;y=new V(I,c),Pe(y,B)}B=!0;let W,ce;if(w)for(ce=w.length-1;ce>=0;ce--)W=y.g=w[ce],B=jn(W,I,!0,y)&&B;if(W=y.g=c,B=jn(W,I,!0,y)&&B,B=jn(W,I,!1,y)&&B,w)for(ce=0;ce<w.length;ce++)W=y.g=w[ce],B=jn(W,I,!1,y)&&B}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const w=c.g[y];for(let I=0;I<w.length;I++)X(w[I]);delete c.g[y],c.h--}}this.G=null},Et.prototype.J=function(c,y,w,I){return this.i.add(String(c),y,!1,w,I)},Et.prototype.K=function(c,y,w,I){return this.i.add(String(c),y,!0,w,I)};function jn(c,y,w,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let W=0;W<y.length;++W){const ce=y[W];if(ce&&!ce.da&&ce.capture==w){const Ne=ce.listener,yt=ce.ha||ce.src;ce.fa&&Oe(c.i,ce),B=Ne.call(yt,I)!==!1&&B}}return B&&!I.defaultPrevented}function cl(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(c,y||0)}function hl(c){c.g=cl(()=>{c.g=null,c.i&&(c.i=!1,hl(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class uc extends O{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:hl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(c){O.call(this),this.h=c,this.g={}}v(fi,O);var dl=[];function So(c){he(c.g,function(y,w){this.g.hasOwnProperty(w)&&dn(y)},c),c.g={}}fi.prototype.N=function(){fi.Z.N.call(this),So(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=l.JSON.stringify,cc=l.JSON.parse,Is=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function mi(){}function hc(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ao(){V.call(this,"d")}v(Ao,V);function fl(){V.call(this,"c")}v(fl,V);var zn={},Po=null;function yi(){return Po=Po||new Et}zn.Ia="serverreachability";function Ro(c){V.call(this,zn.Ia,c)}v(Ro,V);function Vr(c){const y=yi();gt(y,new Ro(y))}zn.STAT_EVENT="statevent";function Or(c,y){V.call(this,zn.STAT_EVENT,c),this.stat=y}v(Or,V);function ft(c){const y=yi();gt(y,new Or(y,c))}zn.Ja="timingevent";function pl(c,y){V.call(this,zn.Ja,c),this.size=y}v(pl,V);function _i(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},y)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function dc(c,y,w,I,B,W){c.info(function(){if(c.g)if(W){var ce="",Ne=W.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var yt=Ne[Qe].split("=");if(yt.length>1){const Tt=yt[0];yt=yt[1];const _n=Tt.split("_");ce=_n.length>=2&&_n[1]=="type"?ce+(Tt+"="+yt+"&"):ce+(Tt+"=redacted&")}}}else ce=null;else ce=W;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+y+`
`+w+`
`+ce})}function fc(c,y,w,I,B,W,ce){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+y+`
`+w+`
`+W+" "+ce})}function ir(c,y,w,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ss(c,w)+(I?" "+I:"")})}function pc(c,y){c.info(function(){return"TIMEOUT: "+y})}vi.prototype.info=function(){};function Ss(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var w=W[c];if(!(w.length<2)){var I=w[1];if(Array.isArray(I)&&!(I.length<1)){var B=I[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ce=1;ce<I.length;ce++)I[ce]=""}}}}return pi(W)}catch{return y}}var wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ei={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mc;function Mr(){}v(Mr,mi),Mr.prototype.g=function(){return new XMLHttpRequest},mc=new Mr;function sr(c){return encodeURIComponent(String(c))}function Co(c){var y=1;c=c.split(":");const w=[];for(;y>0&&c.length;)w.push(c.shift()),y--;return c.length&&w.push(c.join(":")),w}function bn(c,y,w,I){this.j=c,this.i=y,this.l=w,this.S=I||1,this.V=new fi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}var yc={},ml={};function Bn(c,y,w){c.M=1,c.A=Fr(kn(y)),c.u=w,c.R=!0,gl(c,null)}function gl(c,y){c.F=Date.now(),As(c),c.B=kn(c.A);var w=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Pl(w.i,"t",I),c.C=0,w=c.j.L,c.h=new gc,c.g=Rc(c.j,w?y:null,!c.u),c.P>0&&(c.O=new uc(p(c.Y,c,c.g),c.P)),y=c.V,w=c.g,I=c.ba;var B="readystatechange";Array.isArray(B)||(B&&(dl[0]=B.toString()),B=dl);for(let W=0;W<B.length;W++){const ce=We(w,B[W],I||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=c.J?U(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Vr(),dc(c.i,c.v,c.B,c.l,c.S,c.u)}bn.prototype.ba=function(c){c=c.target;const y=this.O;y&&dr(c)==3?y.j():this.Y(c)},bn.prototype.Y=function(c){try{if(c==this.g)e:{const Ne=dr(this.g),yt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Ac(this.g)))){this.K||Ne!=4||yt==7||(yt==8||Qe<=0?Vr(3):Vr(2)),xo(this);var y=this.g.ca();this.X=y;var w=_c(this);if(this.o=y==200,fc(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,B=this.g;if((I=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var W=I;break t}}W=null}if(c=W)ir(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,it(this,c);else{this.o=!1,this.m=3,ft(12),Lr(this),Ps(this);break e}}if(this.R){c=!0;let Tt;for(;!this.K&&this.C<w.length;)if(Tt=wc(this,w),Tt==ml){Ne==4&&(this.m=4,ft(14),c=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==yc){this.m=4,ft(15),ir(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else ir(this.i,this.l,Tt,null),it(this,Tt);if(vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||w.length!=0||this.h.h||(this.m=1,ft(16),c=!1),this.o=this.o&&c,!c)ir(this.i,this.l,w,"[Invalid Chunked Response]"),Lr(this),Ps(this);else if(w.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Os(ce),ce.P=!0,ft(11))}}else ir(this.i,this.l,w,null),it(this,w);Ne==4&&Lr(this),this.o&&!this.K&&(Ne==4?Uo(this.j,this):(this.o=!1,As(this)))}else Cl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,ft(12)):(this.m=0,ft(13)),Lr(this),Ps(this)}}}catch{}};function _c(c){if(!vc(c))return c.g.la();const y=Ac(c.g);if(y==="")return"";let w="";const I=y.length,B=dr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Lr(c),Ps(c),"";c.h.i=new l.TextDecoder}for(let W=0;W<I;W++)c.h.h=!0,w+=c.h.i.decode(y[W],{stream:!(B&&W==I-1)});return y.length=0,c.h.g+=w,c.C=0,c.h.g}function vc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function wc(c,y){var w=c.C,I=y.indexOf(`
`,w);return I==-1?ml:(w=Number(y.substring(w,I)),isNaN(w)?yc:(I+=1,I+w>y.length?ml:(y=y.slice(I,I+w),c.C=I+w,y)))}bn.prototype.cancel=function(){this.K=!0,Lr(this)};function As(c){c.T=Date.now()+c.H,yl(c,c.H)}function yl(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=_i(p(c.aa,c),y)}function xo(c){c.D&&(l.clearTimeout(c.D),c.D=null)}bn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(pc(this.i,this.B),this.M!=2&&(Vr(),ft(17)),Lr(this),this.m=2,Ps(this)):yl(this,this.T-c)};function Ps(c){c.j.I==0||c.K||Uo(c.j,c)}function Lr(c){xo(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,So(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function it(c,y){try{var w=c.j;if(w.I!=0&&(w.g==c||vl(w.h,c))){if(!c.L&&vl(w.h,c)&&w.I==3){try{var I=w.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Fo(w),gn(w);else break e;mr(w),ft(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=_i(p(w.Va,w),6e3));Rs(w.h)<=1&&w.ta&&(w.ta=void 0)}else yn(w,11)}else if((c.L||w.g==c)&&Fo(w),!R(y))for(B=w.Ba.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];const Tt=Qe[0];if(!(Tt<=w.K))if(w.K=Tt,Qe=Qe[1],w.I==2)if(Qe[0]=="c"){w.M=Qe[1],w.ba=Qe[2];const _n=Qe[3];_n!=null&&(w.ka=_n,w.j.info("VER="+w.ka));const $r=Qe[4];$r!=null&&(w.za=$r,w.j.info("SVER="+w.za));const gr=Qe[5];gr!=null&&typeof gr=="number"&&gr>0&&(I=1.5*gr,w.O=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const yr=c.g;if(yr){const Bo=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var W=I.h;W.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ko(W,W.h),W.h=null))}if(I.G){const kl=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(I.wa=kl,Ge(I.J,I.G,kl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),I=w;var ce=c;if(I.na=bl(I,I.L?I.ba:null,I.W),ce.L){Cs(I.h,ce);var Ne=ce,yt=I.O;yt&&(Ne.H=yt),Ne.D&&(xo(Ne),As(Ne)),I.g=ce}else Bt(I);w.i.length>0&&Br(w)}else Qe[0]!="stop"&&Qe[0]!="close"||yn(w,7);else w.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?yn(w,7):Mo(w):Qe[0]!="noop"&&w.l&&w.l.qa(Qe),w.A=0)}}Vr(4)}catch{}}var vf=class{constructor(c,y){this.g=c,this.map=y}};function bo(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _l(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rs(c){return c.h?1:c.g?c.g.size:0}function vl(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function ko(c,y){c.g?c.g.add(y):c.h=y}function Cs(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}bo.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const w of c.g.values())y=y.concat(w.G);return y}return A(c.i)}var Ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pn(c,y){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const I=c[w].indexOf("=");let B,W=null;I>=0?(B=c[w].substring(0,I),W=c[w].substring(I+1)):B=c[w],y(B,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function or(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof or?(this.l=c.l,xs(this,c.j),this.o=c.o,this.g=c.g,ar(this,c.u),this.h=c.h,Ti(this,Rl(c.i)),this.m=c.m):c&&(y=String(c).match(Ec))?(this.l=!1,xs(this,y[1]||"",!0),this.o=bs(y[2]||""),this.g=bs(y[3]||"",!0),ar(this,y[4]),this.h=bs(y[5]||"",!0),Ti(this,y[6]||"",!0),this.m=bs(y[7]||"")):(this.l=!1,this.i=new Be(null,this.l))}or.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ks(y,El,!0),":");var w=this.g;return(w||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ks(y,El,!0),"@"),c.push(sr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(ks(w,w.charAt(0)=="/"?Ns:Tl,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",ks(w,Il)),c.join("")},or.prototype.resolve=function(c){const y=kn(this);let w=!!c.j;w?xs(y,c.j):w=!!c.o,w?y.o=c.o:w=!!c.g,w?y.g=c.g:w=c.u!=null;var I=c.h;if(w)ar(y,c.u);else if(w=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var B=y.h.lastIndexOf("/");B!=-1&&(I=y.h.slice(0,B+1)+I)}if(B=I,B==".."||B==".")I="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){I=B.lastIndexOf("/",0)==0,B=B.split("/");const W=[];for(let ce=0;ce<B.length;){const Ne=B[ce++];Ne=="."?I&&ce==B.length&&W.push(""):Ne==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),I&&ce==B.length&&W.push("")):(W.push(Ne),I=!0)}I=W.join("/")}else I=B}return w?y.h=I:w=c.i.toString()!=="",w?Ti(y,Rl(c.i)):w=!!c.m,w&&(y.m=c.m),y};function kn(c){return new or(c)}function xs(c,y,w){c.j=w?bs(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ar(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Ti(c,y,w){y instanceof Be?(c.i=y,Do(c.i,c.l)):(w||(y=ks(y,wf)),c.i=new Be(y,c.l))}function Ge(c,y,w){c.i.set(y,w)}function Fr(c){return Ge(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bs(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ks(c,y,w){return typeof c=="string"?(c=encodeURI(c).replace(y,wl),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var El=/[#\/\?@]/g,Tl=/[#\?:]/g,Ns=/[#\?]/g,wf=/[#\?@]/g,Il=/#/g;function Be(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function lr(c){c.g||(c.g=new Map,c.h=0,c.i&&pn(c.i,function(y,w){c.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=Be.prototype,n.add=function(c,y){lr(this),this.i=null,c=ur(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(y),this.h+=1,this};function Sl(c,y){lr(c),y=ur(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function No(c,y){return lr(c),y=ur(c,y),c.g.has(y)}n.forEach=function(c,y){lr(this),this.g.forEach(function(w,I){w.forEach(function(B){c.call(y,B,I,this)},this)},this)};function Al(c,y){lr(c);let w=[];if(typeof y=="string")No(c,y)&&(w=w.concat(c.g.get(ur(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)w=w.concat(c[y]);return w}n.set=function(c,y){return lr(this),this.i=null,c=ur(this,c),No(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=Al(this,c),c.length>0?String(c[0]):y):y};function Pl(c,y,w){Sl(c,y),w.length>0&&(c.i=null,c.g.set(ur(c,y),A(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var w=y[I];const B=sr(w);w=Al(this,w);for(let W=0;W<w.length;W++){let ce=B;w[W]!==""&&(ce+="="+sr(w[W])),c.push(ce)}}return this.i=c.join("&")};function Rl(c){const y=new Be;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function ur(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Do(c,y){y&&!c.j&&(lr(c),c.i=null,c.g.forEach(function(w,I){const B=I.toLowerCase();I!=B&&(Sl(this,I),Pl(this,B,w))},c)),c.j=y}function cr(c,y){const w=new vi;if(l.Image){const I=new Image;I.onload=_(Lt,w,"TestLoadImage: loaded",!0,y,I),I.onerror=_(Lt,w,"TestLoadImage: error",!1,y,I),I.onabort=_(Lt,w,"TestLoadImage: abort",!1,y,I),I.ontimeout=_(Lt,w,"TestLoadImage: timeout",!1,y,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function hr(c,y){const w=new vi,I=new AbortController,B=setTimeout(()=>{I.abort(),Lt(w,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then(W=>{clearTimeout(B),W.ok?Lt(w,"TestPingServer: ok",!0,y):Lt(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Lt(w,"TestPingServer: error",!1,y)})}function Lt(c,y,w,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(w)}catch{}}function Ds(){this.g=new Is}function Ur(c){this.i=c.Sb||null,this.h=c.ab||!1}v(Ur,mi),Ur.prototype.g=function(){return new mn(this.i,this.h)};function mn(c,y){Et.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(mn,Et),n=mn.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,$n(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$n(this)),this.g&&(this.readyState=3,$n(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tc(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tc(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ii(this):$n(this),this.readyState==3&&Tc(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ii(this))},n.Na=function(c){this.g&&(this.response=c,Ii(this))},n.ga=function(){this.g&&Ii(this)};function Ii(c){c.readyState=4,c.l=null,c.j=null,c.B=null,$n(c)}n.setRequestHeader=function(c,y){this.A.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=y.next();return c.join(`\r
`)};function $n(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ic(c){let y="";return he(c,function(w,I){y+=I,y+=":",y+=w,y+=`\r
`}),y}function Vo(c,y,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Ic(w),typeof c=="string"?w!=null&&sr(w):Ge(c,y,w))}function Ze(c){Et.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ze,Et);var Sc=/^https?$/i,Ef=["POST","PUT"];n=Ze.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,y,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mc.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){Si(this,W);return}if(c=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)w.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())w.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(W=>W.toLowerCase()=="content-type"),B=l.FormData&&c instanceof l.FormData,!(Array.prototype.indexOf.call(Ef,y,void 0)>=0)||I||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ce]of w)this.g.setRequestHeader(W,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){Si(this,W)}};function Si(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Ai(c),zr(c)}function Ai(c){c.A||(c.A=!0,gt(c,"complete"),gt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,gt(this,"complete"),gt(this,"abort"),zr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zr(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?jr(this):this.Xa())},n.Xa=function(){jr(this)};function jr(c){if(c.h&&typeof a<"u"){if(c.v&&dr(c)==4)setTimeout(c.Ca.bind(c),0);else if(gt(c,"readystatechange"),dr(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var I;if(I=W===0){let ce=String(c.D).match(Ec)[1]||null;!ce&&l.self&&l.self.location&&(ce=l.self.location.protocol.slice(0,-1)),I=!Sc.test(ce?ce.toLowerCase():"")}w=I}if(w)gt(c,"complete"),gt(c,"success");else{c.o=6;try{var B=dr(c)>2?c.g.statusText:""}catch{B=""}c.l=B+" ["+c.ca()+"]",Ai(c)}}finally{zr(c)}}}}function zr(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,y||gt(c,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function dr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),cc(y)}};function Ac(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cl(c){const y={};c=(c.g&&dr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(R(c[I]))continue;var w=Co(c[I]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const W=y[B]||[];y[B]=W,W.push(w)}ue(y,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(c,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||y}function Oo(c){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fr("baseRetryDelayMs",5e3,c),this.Za=fr("retryDelaySeedMs",1e4,c),this.Ta=fr("forwardChannelMaxRetries",2,c),this.va=fr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new bo(c&&c.concurrentRequestLimit),this.Ba=new Ds,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Oo.prototype,n.ka=8,n.I=1,n.connect=function(c,y,w,I){ft(0),this.W=c,this.H=y||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.J=bl(this,null,this.W),Br(this)};function Mo(c){if(Lo(c),c.I==3){var y=c.V++,w=kn(c.J);if(Ge(w,"SID",c.M),Ge(w,"RID",y),Ge(w,"TYPE","terminate"),pr(c,w),y=new bn(c,c.j,y),y.M=2,y.A=Fr(kn(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=y.A,w=!0),w||(y.g=Rc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),As(y)}Ms(c)}function gn(c){c.g&&(Os(c),c.g.cancel(),c.g=null)}function Lo(c){gn(c),c.v&&(l.clearTimeout(c.v),c.v=null),Fo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&l.clearTimeout(c.m),c.m=null)}function Br(c){if(!_l(c.h)&&!c.m){c.m=!0;var y=c.Ea;ee||S(),ie||(ee(),ie=!0),P.add(y,c),c.D=0}}function Pc(c,y){return Rs(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=_i(p(c.Ea,c,y),jo(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const B=new bn(this,this.j,c);let W=this.o;if(this.U&&(W?(W=U(W),Pe(W,this.U)):W=this.U),this.u!==null||this.R||(B.J=W,W=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=xl(this,B,y),w=kn(this.J),Ge(w,"RID",c),Ge(w,"CVER",22),this.G&&Ge(w,"X-HTTP-Session-Id",this.G),pr(this,w),W&&(this.R?y="headers="+sr(Ic(W))+"&"+y:this.u&&Vo(w,this.u,W)),ko(this.h,B),this.Ra&&Ge(w,"TYPE","init"),this.S?(Ge(w,"$req",y),Ge(w,"SID","null"),B.U=!0,Bn(B,w,null)):Bn(B,w,y),this.I=2}}else this.I==3&&(c?Vs(this,c):this.i.length==0||_l(this.h)||Vs(this))};function Vs(c,y){var w;y?w=y.l:w=c.V++;const I=kn(c.J);Ge(I,"SID",c.M),Ge(I,"RID",w),Ge(I,"AID",c.K),pr(c,I),c.u&&c.o&&Vo(I,c.u,c.o),w=new bn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),y&&(c.i=y.G.concat(c.i)),y=xl(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ko(c.h,w),Bn(w,I,y)}function pr(c,y){c.H&&he(c.H,function(w,I){Ge(y,I,w)}),c.l&&he({},function(w,I){Ge(y,I,w)})}function xl(c,y,w){w=Math.min(c.i.length,w);const I=c.l?p(c.l.Ka,c.l,c):null;e:{var B=c.i;let Ne=-1;for(;;){const yt=["count="+w];Ne==-1?w>0?(Ne=B[0].g,yt.push("ofs="+Ne)):Ne=0:yt.push("ofs="+Ne);let Qe=!0;for(let Tt=0;Tt<w;Tt++){var W=B[Tt].g;const _n=B[Tt].map;if(W-=Ne,W<0)Ne=Math.max(0,B[Tt].g-100),Qe=!1;else try{W="req"+W+"_"||"";try{var ce=_n instanceof Map?_n:Object.entries(_n);for(const[$r,gr]of ce){let yr=gr;h(gr)&&(yr=pi(gr)),yt.push(W+$r+"="+encodeURIComponent(yr))}}catch($r){throw yt.push(W+"type="+encodeURIComponent("_badmap")),$r}}catch{I&&I(_n)}}if(Qe){ce=yt.join("&");break e}}ce=void 0}return c=c.i.splice(0,w),y.G=c,ce}function Bt(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ee||S(),ie||(ee(),ie=!0),P.add(y,c),c.A=0}}function mr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=_i(p(c.Da,c),jo(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Pi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=_i(p(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ft(10),gn(this),Pi(this))};function Os(c){c.B!=null&&(l.clearTimeout(c.B),c.B=null)}function Pi(c){c.g=new bn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=kn(c.na);Ge(y,"RID","rpc"),Ge(y,"SID",c.M),Ge(y,"AID",c.K),Ge(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ge(y,"TO",c.ia),Ge(y,"TYPE","xmlhttp"),pr(c,y),c.u&&c.o&&Vo(y,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=Fr(kn(y)),w.u=null,w.R=!0,gl(w,c)}n.Va=function(){this.C!=null&&(this.C=null,gn(this),mr(this),ft(19))};function Fo(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Uo(c,y){var w=null;if(c.g==y){Fo(c),Os(c),c.g=null;var I=2}else if(vl(c.h,y))w=y.G,Cs(c.h,y),I=1;else return;if(c.I!=0){if(y.o)if(I==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var B=c.D;I=yi(),gt(I,new pl(I,w)),Br(c)}else Bt(c);else if(B=y.m,B==3||B==0&&y.X>0||!(I==1&&Pc(c,y)||I==2&&mr(c)))switch(w&&w.length>0&&(y=c.h,y.i=y.i.concat(w)),B){case 1:yn(c,5);break;case 4:yn(c,10);break;case 3:yn(c,6);break;default:yn(c,2)}}}function jo(c,y){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*y}function yn(c,y){if(c.j.info("Error code "+y),y==2){var w=p(c.bb,c),I=c.Ua;const B=!I;I=new or(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||xs(I,"https"),Fr(I),B?cr(I.toString(),w):hr(I.toString(),w)}else ft(2);c.I=0,c.l&&c.l.pa(y),Ms(c),Lo(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Ms(c){if(c.I=0,c.ja=[],c.l){const y=fn(c.h);(y.length!=0||c.i.length!=0)&&(D(c.ja,y),D(c.ja,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.oa()}}function bl(c,y,w){var I=w instanceof or?kn(w):new or(w);if(I.g!="")y&&(I.g=y+"."+I.g),ar(I,I.u);else{var B=l.location;I=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const W=new or(null);I&&xs(W,I),y&&(W.g=y),B&&ar(W,B),w&&(W.h=w),I=W}return w=c.G,y=c.wa,w&&y&&Ge(I,w,y),Ge(I,"VER",c.ka),pr(c,I),I}function Rc(c,y,w){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Ze(new Ur({ab:w})):new Ze(c.ma),y.Fa(c.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}n=Cc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function zo(){}zo.prototype.g=function(c,y){return new Ft(c,y)};function Ft(c,y){Et.call(this),this.g=new Oo(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!R(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ri(this)}v(Ft,Et),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Mo(this.g)},Ft.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=pi(c),c=w);y.i.push(new vf(y.Ya++,c)),y.I==3&&Br(y)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,Ft.Z.N.call(this)};function xc(c){Ao.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const w in y){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}v(xc,Ao);function bc(){fl.call(this),this.status=1}v(bc,fl);function Ri(c){this.g=c}v(Ri,Cc),Ri.prototype.ra=function(){gt(this.g,"a")},Ri.prototype.qa=function(c){gt(this.g,new xc(c))},Ri.prototype.pa=function(c){gt(this.g,new bc)},Ri.prototype.oa=function(){gt(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,yS=function(){return new zo},gS=function(){return yi()},mS=zn,Mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,qh=wi,Ei.COMPLETE="complete",pS=Ei,hc.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",Et.prototype.listen=Et.prototype.J,hu=hc,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,fS=Ze}).apply(typeof xh<"u"?xh:typeof self<"u"?self:typeof window<"u"?window:{});class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");let rl="12.8.0";function QV(n){rl=n}const fo=new xg("@firebase/firestore");function ma(){return fo.logLevel}function ne(n,...e){if(fo.logLevel<=je.DEBUG){const t=e.map(Ug);fo.debug(`Firestore (${rl}): ${n}`,...t)}}function vt(n,...e){if(fo.logLevel<=je.ERROR){const t=e.map(Ug);fo.error(`Firestore (${rl}): ${n}`,...t)}}function Du(n,...e){if(fo.logLevel<=je.WARN){const t=e.map(Ug);fo.warn(`Firestore (${rl}): ${n}`,...t)}}function Ug(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_S(n,r,t)}function _S(n,e,t){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vt(r),new Error(r)}function we(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||_S(e,s,r)}function _e(n,e){return n}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ni{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class YV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class XV{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){we(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ni,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ni)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new YV(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class ZV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ZV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){we(this.o===void 0,3512);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(we(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nO(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Lm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return um(s)===um(a)?be(s,a):um(s)?1:-1}return be(n.length,e.length)}const rO=55296,iO=57343;function um(n){const e=n.charCodeAt(0);return e>=rO&&e<=iO}function Da(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function vS(n){return n+"\0"}const lE="__name__";class Tr{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Tr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return be(e.length,t.length)}static compareSegments(e,t){const r=Tr.isNumericId(e),s=Tr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Tr.extractNumericId(e).compare(Tr.extractNumericId(t)):Lm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ss.fromString(e.substring(4,e.length-2))}}class Ke extends Tr{construct(e,t,r){return new Ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ke(t)}static emptyPath(){return new Ke([])}}const sO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Tr{construct(e,t,r){return new dt(e,t,r)}static isValidIdentifier(e){return sO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lE}static keyField(){return new dt([lE])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new le(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new le(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new le(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}class de{constructor(e){this.path=e}static fromPath(e){return new de(Ke.fromString(e))}static fromName(e){return new de(Ke.fromString(e).popFirst(5))}static empty(){return new de(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Ke(e.slice()))}}function wS(n,e,t){if(!t)throw new le(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oO(n,e,t,r){if(e===!0&&r===!0)throw new le(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uE(n){if(!de.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cE(n){if(de.isDocumentKey(n))throw new le(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ES(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function Fm(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zd(n);throw new le(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function ec(n,e){if(!ES(n))throw new le(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new le(Y.INVALID_ARGUMENT,t);return!0}const hE=-62135596800,dE=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dE);return new Ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hE)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dE}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ec(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:At("string",Ye._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ye(0,0))}static max(){return new Ee(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Va=-1;class md{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Um(n){return n.fields.find((e=>e.kind===2))}function Js(n){return n.fields.filter((e=>e.kind!==2))}md.UNKNOWN_ID=-1;class Hh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vu(0,xn.min())}}function TS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new xn(s,de.empty(),e)}function IS(n){return new xn(n.readTime,n.key,Va)}class xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xn(Ee.min(),de.empty(),Va)}static max(){return new xn(Ee.max(),de.empty(),Va)}}function zg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}const SS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gs(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==SS)throw n;ne("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let s=0,a=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((s=>s?j.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((_=>{l[p]=_,++h,h===a&&r(l)}),(_=>s(_)))}}))}static doWhile(e,t){return new j(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}const Tn="SimpleDb";class ef{static open(e,t,r,s){try{return new ef(t,e.transaction(s,r))}catch(a){throw new _u(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ni,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new _u(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Bg(r.target.error);this.S.reject(new _u(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ne(Tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lO(t)}}class os{static delete(e){return ne(Tn,"Removing database:",e),Zs(E0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!C0())return!1;if(os.F())return!0;const e=xt(),t=os.M(e),r=0<t&&t<10,s=PS(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,os.M(xt())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ne(Tn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new _u(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new le(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new le(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new _u(e,l))},s.onupgradeneeded=a=>{ne(Tn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,s.transaction,a.oldVersion,this.version).next((()=>{ne(Tn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=ef.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((p=>(h.C(),p))).catch((p=>(h.abort(p),j.reject(p)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&l<3;if(ne(Tn,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function PS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class aO{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Zs(this.U.delete())}}class _u extends le{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ys(n){return n.name==="IndexedDbTransactionError"}class lO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ne(Tn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ne(Tn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zs(r)}add(e){return ne(Tn,"ADD",this.store.name,e,e),Zs(this.store.add(e))}get(e){return Zs(this.store.get(e)).next((t=>(t===void 0&&(t=null),ne(Tn,"GET",this.store.name,e,t),t)))}delete(e){return ne(Tn,"DELETE",this.store.name,e),Zs(this.store.delete(e))}count(){return ne(Tn,"COUNT",this.store.name),Zs(this.store.count())}H(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new j(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((h,f)=>{l.push(f)})).next((()=>l))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j(((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}X(e,t){ne(Tn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.J(s,((a,l,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}te(e){const t=this.cursor({});return new j(((r,s)=>{t.onerror=a=>{const l=Bg(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():r()})):r()}}))}J(e,t){const r=[];return new j(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const f=new aO(h),p=t(h.primaryKey,h.value,f);if(p instanceof j){const _=p.catch((v=>(f.done(),j.reject(v))));r.push(_)}f.isDone?s():f.G===null?h.continue():h.continue(f.G)}})).next((()=>j.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zs(n){return new j(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=Bg(r.target.error);t(s)}}))}let fE=!1;function Bg(n){const e=os.M(xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fE||(fE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const vu="IndexBackfiller";class uO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ne(vu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ne(vu,`Documents written: ${t}`)}catch(t){ys(t)?ne(vu,"Ignoring IndexedDB error during index backfill: ",t):await gs(t)}await this.re(6e4)}))}}class cO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,a=!0;return j.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ne(vu,`Processing collection: ${l}`),this.oe(e,l,s).next((h=>{s-=h,r.add(l)}));a=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,a))).next((h=>(ne(vu,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,a)=>{const l=IS(a);zg(l,r)>0&&(r=l)})),new xn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}un.ce=-1;const io=-1;function tf(n){return n==null}function Ou(n){return n===0&&1/n==-1/0}function RS(n){return typeof n=="number"&&Number.isInteger(n)&&!Ou(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const gd="";function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pE(e)),e=hO(n.get(t),e);return pE(e)}function hO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case gd:t+="";break;default:t+=a}}return t}function pE(n){return n+gd+""}function Sr(n){const e=n.length;if(we(e>=2,64408,{path:n}),e===2)return we(n.charAt(0)===gd&&n.charAt(1)==="",56145,{path:n}),Ke.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf(gd,a);switch((l<0||l>t)&&me(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:me(61167,{path:n})}a=l+2}return new Ke(r)}const Xs="remoteDocuments",tc="owner",ua="owner",Mu="mutationQueues",dO="userId",Jn="mutations",mE="batchId",ro="userMutationsIndex",gE=["userId","batchId"];function Gh(n,e){return[n,Yt(e)]}function CS(n,e,t){return[n,Yt(e),t]}const fO={},Oa="documentMutations",yd="remoteDocumentsV14",pO=["prefixPath","collectionGroup","readTime","documentId"],Kh="documentKeyIndex",mO=["prefixPath","collectionGroup","documentId"],xS="collectionGroupIndex",gO=["collectionGroup","readTime","prefixPath","documentId"],Lu="remoteDocumentGlobal",jm="remoteDocumentGlobalKey",Ma="targets",bS="queryTargetsIndex",yO=["canonicalId","targetId"],La="targetDocuments",_O=["targetId","path"],$g="documentTargetsIndex",vO=["path","targetId"],_d="targetGlobalKey",so="targetGlobal",Fu="collectionParents",wO=["collectionId","parent"],Fa="clientMetadata",EO="clientId",nf="bundles",TO="bundleId",rf="namedQueries",IO="name",qg="indexConfiguration",SO="indexId",zm="collectionGroupIndex",AO="collectionGroup",wu="indexState",PO=["indexId","uid"],kS="sequenceNumberIndex",RO=["uid","sequenceNumber"],Eu="indexEntries",CO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NS="documentKeyIndex",xO=["indexId","uid","orderedDocumentKey"],sf="documentOverlays",bO=["userId","collectionPath","documentId"],Bm="collectionPathOverlayIndex",kO=["userId","collectionPath","largestBatchId"],DS="collectionGroupOverlayIndex",NO=["userId","collectionGroup","largestBatchId"],Hg="globals",DO="name",VS=[Mu,Jn,Oa,Xs,Ma,tc,so,La,Fa,Lu,Fu,nf,rf],VO=[...VS,sf],OS=[Mu,Jn,Oa,yd,Ma,tc,so,La,Fa,Lu,Fu,nf,rf,sf],MS=OS,Gg=[...MS,qg,wu,Eu],OO=Gg,LS=[...Gg,Hg],MO=LS;class $m extends AS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function bt(n,e){const t=_e(n);return os.O(t.le,e)}function yE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??zt.RED,this.left=s??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new zt(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _E(this.data.getIterator())}getIteratorFrom(e){return new _E(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class _E{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ca(n){return n.hasNext()?n.getNext():void 0}class Un{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Un([])}unionWith(e){let t=new Xe(dt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class US extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new US("Invalid base64 string: "+a):a}})(e);return new wt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const LO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(n){if(we(!!n,39018),typeof n=="string"){let e=0;const t=LO.exec(n);if(we(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ui(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}const jS="server_timestamp",zS="__type__",BS="__previous_value__",$S="__local_write_time__";function Kg(n){return(n?.mapValue?.fields||{})[zS]?.stringValue===jS}function of(n){const e=n.mapValue.fields[BS];return Kg(e)?of(e):e}function Uu(n){const e=li(n.mapValue.fields[$S].timestampValue);return new Ye(e.seconds,e.nanos)}class FO{constructor(e,t,r,s,a,l,h,f,p,_,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=v}}const vd="(default)";class po{constructor(e,t){this.projectId=e,this.database=t||vd}static empty(){return new po("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}function UO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new le(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(n.options.projectId,e)}const Wg="__type__",qS="__max__",es={mapValue:{fields:{__type__:{stringValue:qS}}}},Qg="__vector__",Ua="value",Wh={nullValue:"NULL_VALUE"};function ds(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kg(n)?4:HS(n)?9007199254740991:af(n)?10:11:me(28295,{value:n})}function Nr(n,e){if(n===e)return!0;const t=ds(n);if(t!==ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uu(n).isEqual(Uu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=li(s.timestampValue),h=li(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return ui(s.bytesValue).isEqual(ui(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return ut(s.geoPointValue.latitude)===ut(a.geoPointValue.latitude)&&ut(s.geoPointValue.longitude)===ut(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ut(s.integerValue)===ut(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ut(s.doubleValue),h=ut(a.doubleValue);return l===h?Ou(l)===Ou(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return Da(n.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(yE(l)!==yE(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Nr(l[f],h[f])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function ju(n,e){return(n.values||[]).find((t=>Nr(t,e)))!==void 0}function fs(n,e){if(n===e)return 0;const t=ds(n),r=ds(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=ut(a.integerValue||a.doubleValue),f=ut(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return vE(n.timestampValue,e.timestampValue);case 4:return vE(Uu(n),Uu(e));case 5:return Lm(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=ui(a),f=ui(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const _=be(h[p],f[p]);if(_!==0)return _}return be(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=be(ut(a.latitude),ut(l.latitude));return h!==0?h:be(ut(a.longitude),ut(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wE(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},p=h[Ua]?.arrayValue,_=f[Ua]?.arrayValue,v=be(p?.values?.length||0,_?.values?.length||0);return v!==0?v:wE(p,_)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===es.mapValue&&l===es.mapValue)return 0;if(a===es.mapValue)return 1;if(l===es.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const E=Lm(f[v],_[v]);if(E!==0)return E;const A=fs(h[f[v]],p[_[v]]);if(A!==0)return A}return be(f.length,_.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function vE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=li(n),r=li(e),s=be(t.seconds,r.seconds);return s!==0?s:be(t.nanos,r.nanos)}function wE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=fs(t[s],r[s]);if(a)return a}return be(t.length,r.length)}function ja(n){return qm(n)}function qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=li(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ui(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return de.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=qm(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${qm(t.fields[l])}`;return s+"}"})(n.mapValue):me(61005,{value:n})}function Qh(n){switch(ds(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(n);return e?16+Qh(e):16;case 5:return 2*n.stringValue.length;case 6:return ui(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Qh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return wo(r.fields,((a,l)=>{s+=a.length+Qh(l)})),s})(n.mapValue);default:throw me(13486,{value:n})}}function zu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hm(n){return!!n&&"integerValue"in n}function Bu(n){return!!n&&"arrayValue"in n}function EE(n){return!!n&&"nullValue"in n}function TE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yh(n){return!!n&&"mapValue"in n}function af(n){return(n?.mapValue?.fields||{})[Wg]?.stringValue===Qg}function Tu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Tu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tu(n.arrayValue.values[t]);return e}return{...n}}function HS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qS}const GS={mapValue:{fields:{[Wg]:{stringValue:Qg},[Ua]:{arrayValue:{}}}}};function jO(n){return"nullValue"in n?Wh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zu(po.empty(),de.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?af(n)?GS:{mapValue:{}}:me(35942,{value:n})}function zO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zu(po.empty(),de.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?GS:"mapValue"in n?af(n)?{mapValue:{}}:es:me(61959,{value:n})}function IE(n,e){const t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function SE(n,e){const t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}setAll(e){let t=dt.emptyPath(),r={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=Tu(l):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Yh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){wo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new ln(Tu(this.value))}}function KS(n){const e=[];return wo(n.fields,((t,r)=>{const s=new dt([t]);if(Yh(r)){const a=KS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Un(e)}class mt{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new mt(e,0,Ee.min(),Ee.min(),Ee.min(),ln.empty(),0)}static newFoundDocument(e,t,r,s){return new mt(e,1,t,Ee.min(),r,s,0)}static newNoDocument(e,t){return new mt(e,2,t,Ee.min(),Ee.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new mt(e,3,t,Ee.min(),Ee.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,t){this.position=e,this.inclusive=t}}function AE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=de.comparator(de.fromName(l.referenceValue),t.key):r=fs(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function PE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nr(n.position[t],e.position[t]))return!1;return!0}class $u{constructor(e,t="asc"){this.field=e,this.dir=t}}function BO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class WS{}class ze extends WS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $O(e,t,r):t==="array-contains"?new GO(e,r):t==="in"?new eA(e,r):t==="not-in"?new KO(e,r):t==="array-contains-any"?new WO(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qO(e,r):new HO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fs(t,this.value)):t!==null&&ds(this.value)===ds(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends WS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Je(e,t)}matches(e){return Ba(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ba(n){return n.op==="and"}function Gm(n){return n.op==="or"}function Yg(n){return QS(n)&&Ba(n)}function QS(n){for(const e of n.filters)if(e instanceof Je)return!1;return!0}function Km(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+ja(n.value);if(Yg(n))return n.filters.map((e=>Km(e))).join(",");{const e=n.filters.map((t=>Km(t))).join(",");return`${n.op}(${e})`}}function YS(n,e){return n instanceof ze?(function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&Nr(r.value,s.value)})(n,e):n instanceof Je?(function(r,s){return s instanceof Je&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,h)=>a&&YS(l,s.filters[h])),!0):!1})(n,e):void me(19439)}function JS(n,e){const t=n.filters.concat(e);return Je.create(t,n.op)}function XS(n){return n instanceof ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${ja(t.value)}`})(n):n instanceof Je?(function(t){return t.op.toString()+" {"+t.getFilters().map(XS).join(" ,")+"}"})(n):"Filter"}class $O extends ze{constructor(e,t,r){super(e,t,r),this.key=de.fromName(r.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class qO extends ze{constructor(e,t){super(e,"in",t),this.keys=ZS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HO extends ze{constructor(e,t){super(e,"not-in",t),this.keys=ZS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZS(n,e){return(e.arrayValue?.values||[]).map((t=>de.fromName(t.referenceValue)))}class GO extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bu(t)&&ju(t.arrayValue,this.value)}}class eA extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ju(this.value.arrayValue,t)}}class KO extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ju(this.value.arrayValue,t)}}class WO extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ju(this.value.arrayValue,r)))}}class QO{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function Wm(n,e=null,t=[],r=[],s=null,a=null,l=null){return new QO(n,e,t,r,s,a,l)}function mo(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Km(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ja(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ja(r))).join(",")),e.Te=t}return e.Te}function nc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!PE(n.startAt,e.startAt)&&PE(n.endAt,e.endAt)}function wd(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ed(n,e){return n.filters.filter((t=>t instanceof ze&&t.field.isEqual(e)))}function RE(n,e,t){let r=Wh,s=!0;for(const a of Ed(n,e)){let l=Wh,h=!0;switch(a.op){case"<":case"<=":l=jO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Wh}IE({value:r,inclusive:s},{value:l,inclusive:h})<0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];IE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function CE(n,e,t){let r=es,s=!0;for(const a of Ed(n,e)){let l=es,h=!0;switch(a.op){case">=":case">":l=zO(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=es}SE({value:r,inclusive:s},{value:l,inclusive:h})>0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];SE({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}class il{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tA(n,e,t,r,s,a,l,h){return new il(n,e,t,r,s,a,l,h)}function Jg(n){return new il(n)}function xE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YO(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nA(n){return n.collectionGroup!==null}function Iu(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Xe(dt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new $u(a,r))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new $u(dt.keyField(),r))}return e.Ie}function Rn(n){const e=_e(n);return e.Ee||(e.Ee=JO(e,Iu(n))),e.Ee}function JO(n,e){if(n.limitType==="F")return Wm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new $u(s.field,a)}));const t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return Wm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qm(n,e){const t=n.filters.concat([e]);return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XO(n,e){const t=n.explicitOrderBy.concat([e]);return new il(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Td(n,e,t){return new il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lf(n,e){return nc(Rn(n),Rn(e))&&n.limitType===e.limitType}function rA(n){return`${mo(Rn(n))}|lt:${n.limitType}`}function ga(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>XS(s))).join(", ")}]`),tf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ja(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ja(s))).join(",")),`Target(${r})`})(Rn(n))}; limitType=${n.limitType})`}function rc(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):de.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of Iu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,h,f){const p=AE(l,h,f);return l.inclusive?p<=0:p<0})(r.startAt,Iu(r),s)||r.endAt&&!(function(l,h,f){const p=AE(l,h,f);return l.inclusive?p>=0:p>0})(r.endAt,Iu(r),s))})(n,e)}function iA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sA(n){return(e,t)=>{let r=!1;for(const s of Iu(n)){const a=ZO(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function ZO(n,e,t){const r=n.field.isKeyField()?de.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?fs(f,p):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}class hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return FS(this.inner)}size(){return this.innerSize}}const e2=new nt(de.comparator);function Sn(){return e2}const oA=new nt(de.comparator);function du(...n){let e=oA;for(const t of n)e=e.insert(t.key,t);return e}function aA(n){let e=oA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ar(){return Su()}function lA(){return Su()}function Su(){return new hi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const t2=new nt(de.comparator),n2=new Xe(de.comparator);function Ve(...n){let e=n2;for(const t of n)e=e.add(t);return e}const r2=new Xe(be);function Xg(){return r2}function Zg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function uA(n){return{integerValue:""+n}}function i2(n,e){return RS(e)?uA(e):Zg(n,e)}class uf{constructor(){this._=void 0}}function s2(n,e,t){return n instanceof $a?(function(s,a){const l={fields:{[zS]:{stringValue:jS},[$S]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Kg(a)&&(a=of(a)),a&&(l.fields[BS]=a),{mapValue:l}})(t,e):n instanceof qa?hA(n,e):n instanceof Ha?dA(n,e):(function(s,a){const l=cA(s,a),h=bE(l)+bE(s.Ae);return Hm(l)&&Hm(s.Ae)?uA(h):Zg(s.serializer,h)})(n,e)}function o2(n,e,t){return n instanceof qa?hA(n,e):n instanceof Ha?dA(n,e):t}function cA(n,e){return n instanceof qu?(function(r){return Hm(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class $a extends uf{}class qa extends uf{constructor(e){super(),this.elements=e}}function hA(n,e){const t=fA(e);for(const r of n.elements)t.some((s=>Nr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ha extends uf{constructor(e){super(),this.elements=e}}function dA(n,e){let t=fA(e);for(const r of n.elements)t=t.filter((s=>!Nr(s,r)));return{arrayValue:{values:t}}}class qu extends uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bE(n){return ut(n.integerValue||n.doubleValue)}function fA(n){return Bu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pA{constructor(e,t){this.field=e,this.transform=t}}function a2(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof qa&&s instanceof qa||r instanceof Ha&&s instanceof Ha?Da(r.elements,s.elements,Nr):r instanceof qu&&s instanceof qu?Nr(r.Ae,s.Ae):r instanceof $a&&s instanceof $a})(n.transform,e.transform)}class l2{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cf{}function mA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ey(n.key,An.none()):new sl(n.key,n.data,An.none());{const t=n.data,r=ln.empty();let s=new Xe(dt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new _s(n.key,r,new Un(s.toArray()),An.none())}}function u2(n,e,t){n instanceof sl?(function(s,a,l){const h=s.value.clone(),f=NE(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof _s?(function(s,a,l){if(!Jh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=NE(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(gA(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Au(n,e,t,r){return n instanceof sl?(function(a,l,h,f){if(!Jh(a.precondition,l))return h;const p=a.value.clone(),_=DE(a.fieldTransforms,f,l);return p.setAll(_),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof _s?(function(a,l,h,f){if(!Jh(a.precondition,l))return h;const p=DE(a.fieldTransforms,f,l),_=l.data;return _.setAll(gA(a)),_.setAll(p),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,l,h){return Jh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function c2(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=cA(r.transform,s||null);a!=null&&(t===null&&(t=ln.empty()),t.set(r.field,a))}return t||null}function kE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Da(r,s,((a,l)=>a2(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class sl extends cf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _s extends cf{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function gA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function NE(n,e,t){const r=new Map;we(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,o2(l,h,t[s]))}return r}function DE(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,s2(a,l,e))}return r}class ey extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ty{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&u2(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Au(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Au(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lA();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=mA(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,((t,r)=>kE(t,r)))&&Da(this.baseMutations,e.baseMutations,((t,r)=>kE(t,r)))}}class ny{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return t2})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new ny(e,t,r,s)}}class ry{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class h2{constructor(e,t){this.count=e,this.unchangedNames=t}}var St,$e;function d2(n){switch(n){case Y.OK:return me(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function _A(n){if(n===void 0)return vt("GRPC error has no .code"),Y.UNKNOWN;switch(n){case St.OK:return Y.OK;case St.CANCELLED:return Y.CANCELLED;case St.UNKNOWN:return Y.UNKNOWN;case St.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case St.INTERNAL:return Y.INTERNAL;case St.UNAVAILABLE:return Y.UNAVAILABLE;case St.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case St.NOT_FOUND:return Y.NOT_FOUND;case St.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case St.ABORTED:return Y.ABORTED;case St.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case St.DATA_LOSS:return Y.DATA_LOSS;default:return me(39323,{code:n})}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function f2(){return new TextEncoder}const p2=new ss([4294967295,4294967295],0);function VE(n){const e=f2().encode(n),t=new dS;return t.update(e),new Uint8Array(t.digest())}function OE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ss([t,r],0),new ss([s,a],0)]}class iy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fu(`Invalid padding: ${t}`);if(r<0)throw new fu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ss.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(ss.fromNumber(r)));return s.compare(p2)===1&&(s=new ss([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VE(e),[r,s]=OE(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new iy(a,s,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=VE(e),[r,s]=OE(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ic{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,sc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ic(Ee.min(),s,new nt(be),Sn(),Ve())}}class sc{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sc(r,t,Ve(),Ve(),Ve())}}class Xh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class vA{constructor(e,t){this.targetId=e,this.Ce=t}}class wA{constructor(e,t,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ME{constructor(){this.ve=0,this.Fe=LE(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),r=Ve();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:a})}})),new sc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=LE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class m2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.He=kh(),this.Je=kh(),this.Ze=new nt(be)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(wd(a))if(r===0){const l=new de(a.path);this.et(t,l,mt.newNoDocument(l,Ee.min()))}else we(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=ui(r).toUint8Array()}catch(f){if(f instanceof US)return Du("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new iy(l,s,a)}catch(f){return Du(f instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&wd(h.target)){const f=new de(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,mt.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Ve();this.Je.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new ic(e,t,this.Ze,this.je,r);return this.je=Sn(),this.He=kh(),this.Je=kh(),this.Ze=new nt(be),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ME,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Xe(be),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Xe(be),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ME),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kh(){return new nt(de.comparator)}function LE(){return new nt(de.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_2={and:"AND",or:"OR"};class v2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ym(n,e){return n.useProto3Json||tf(e)?e:{value:e}}function Ga(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w2(n,e){return Ga(n,e.toTimestamp())}function en(n){return we(!!n,49232),Ee.fromTimestamp((function(t){const r=li(t);return new Ye(r.seconds,r.nanos)})(n))}function sy(n,e){return Jm(n,e).canonicalString()}function Jm(n,e){const t=(function(s){return new Ke(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function TA(n){const e=Ke.fromString(n);return we(kA(e),10190,{key:e.toString()}),e}function Id(n,e){return sy(n.databaseId,e.path)}function oo(n,e){const t=TA(e);if(t.get(1)!==n.databaseId.projectId)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(AA(t))}function IA(n,e){return sy(n.databaseId,e)}function SA(n){const e=TA(n);return e.length===4?Ke.emptyPath():AA(e)}function Xm(n){return new Ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AA(n){return we(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FE(n,e,t){return{name:Id(n,e),fields:t.value.mapValue.fields}}function E2(n,e,t){const r=oo(n,e.name),s=en(e.updateTime),a=e.createTime?en(e.createTime):Ee.min(),l=new ln({mapValue:{fields:e.fields}}),h=mt.newFoundDocument(r,s,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function T2(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(we(_===void 0||typeof _=="string",58123),wt.fromBase64String(_||"")):(we(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),wt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(p){const _=p.code===void 0?Y.UNKNOWN:_A(p.code);return new le(_,p.message||"")})(l);t=new wA(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=oo(n,r.document.name),a=en(r.document.updateTime),l=r.document.createTime?en(r.document.createTime):Ee.min(),h=new ln({mapValue:{fields:r.document.fields}}),f=mt.newFoundDocument(s,a,l,h),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Xh(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=oo(n,r.document),a=r.readTime?en(r.readTime):Ee.min(),l=mt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new Xh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=oo(n,r.document),a=r.removedTargetIds||[];t=new Xh([],a,s,null)}else{if(!("filter"in e))return me(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new h2(s,a),h=r.targetId;t=new vA(h,l)}}return t}function Sd(n,e){let t;if(e instanceof sl)t={update:FE(n,e.key,e.value)};else if(e instanceof ey)t={delete:Id(n,e.key)};else if(e instanceof _s)t={update:FE(n,e.key,e.data),updateMask:C2(e.fieldMask)};else{if(!(e instanceof yA))return me(16599,{dt:e.type});t={verify:Id(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof $a)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof qa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ha)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof qu)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw me(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:w2(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:me(27497)})(n,e.precondition)),t}function Zm(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?An.updateTime(en(a.updateTime)):a.exists!==void 0?An.exists(a.exists):An.none()})(e.currentDocument):An.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let f=null;if("setToServerValue"in h)we(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new $a;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new qa(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new Ha(_)}else"increment"in h?f=new qu(l,h.increment):me(16584,{proto:h});const p=dt.fromServerFormat(h.fieldPath);return new pA(p,f)})(n,s))):[];if(e.update){e.update.name;const s=oo(n,e.update.name),a=new ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new Un(p.map((_=>dt.fromServerFormat(_))))})(e.updateMask);return new _s(s,a,l,t,r)}return new sl(s,a,t,r)}if(e.delete){const s=oo(n,e.delete);return new ey(s,t)}if(e.verify){const s=oo(n,e.verify);return new yA(s,t)}return me(1463,{proto:e})}function I2(n,e){return n&&n.length>0?(we(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?en(s.updateTime):en(a);return l.isEqual(Ee.min())&&(l=en(a)),new l2(l,s.transformResults||[])})(t,e)))):[]}function PA(n,e){return{documents:[IA(n,e.path)]}}function RA(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IA(n,s);const a=(function(p){if(p.length!==0)return bA(Je.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((_=>(function(E){return{field:ya(E.field),direction:A2(E.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=Ym(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function CA(n){let e=SA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){we(r===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(v){const E=xA(v);return E instanceof Je&&Yg(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((E=>(function(D){return new $u(_a(D.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let E;return E=typeof v=="object"?v.value:v,tf(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(v){const E=!!v.before,A=v.values||[];return new za(A,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const E=!v.before,A=v.values||[];return new za(A,E)})(t.endAt)),tA(e,s,l,a,h,"F",f,p)}function S2(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=_a(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_a(t.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=_a(t.unaryFilter.field);return ze.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=_a(t.unaryFilter.field);return ze.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ze.create(_a(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Je.create(t.compositeFilter.filters.map((r=>xA(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function A2(n){return g2[n]}function P2(n){return y2[n]}function R2(n){return _2[n]}function ya(n){return{fieldPath:n.canonicalString()}}function _a(n){return dt.fromServerFormat(n.fieldPath)}function bA(n){return n instanceof ze?(function(t){if(t.op==="=="){if(TE(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NAN"}};if(EE(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TE(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NAN"}};if(EE(t.value))return{unaryFilter:{field:ya(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(t.field),op:P2(t.op),value:t.value}}})(n):n instanceof Je?(function(t){const r=t.getFilters().map((s=>bA(s)));return r.length===1?r[0]:{compositeFilter:{op:R2(t.op),filters:r}}})(n):me(54877,{filter:n})}function C2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function kA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function NA(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class ti{constructor(e,t,r,s,a=Ee.min(),l=Ee.min(),h=wt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class DA{constructor(e){this.yt=e}}function x2(n,e){let t;if(e.document)t=E2(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=de.fromSegments(e.noDocument.path),s=yo(e.noDocument.readTime);t=mt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const r=de.fromSegments(e.unknownDocument.path),s=yo(e.unknownDocument.version);t=mt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Ye(s[0],s[1]);return Ee.fromTimestamp(a)})(e.readTime)),t}function UE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ad(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Id(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Ga(a,l.version.toTimestamp()),createTime:Ga(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:go(e.version)}}return r}function Ad(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function go(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yo(n){const e=new Ye(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function eo(n,e){const t=(e.baseMutations||[]).map((a=>Zm(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Zm(n.yt,a))),s=Ye.fromMillis(e.localWriteTimeMs);return new ty(e.batchId,s,t,r)}function pu(n){const e=yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?yo(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return we(l===1,1966,{count:l}),Rn(Jg(SA(a.documents[0])))})(n.query):(function(a){return Rn(CA(a))})(n.query),new ti(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wt.fromBase64String(n.resumeToken))}function VA(n,e){const t=go(e.snapshotVersion),r=go(e.lastLimboFreeSnapshotVersion);let s;s=wd(e.target)?PA(n.yt,e.target):RA(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function OA(n){const e=CA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Td(e,e.limit,"L"):e}function cm(n,e){return new ry(e.largestBatchId,Zm(n.yt,e.overlayMutation))}function jE(n,e){const t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function zE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:go(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}class b2{getBundleMetadata(e,t){return BE(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:yo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return BE(e).put((function(s){return{bundleId:s.id,createTime:go(en(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return $E(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:OA(a.bundledQuery),readTime:yo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return $E(e).put((function(s){return{name:s.name,readTime:go(en(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function BE(n){return bt(n,nf)}function $E(n){return bt(n,rf)}class hf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new hf(e,r)}getOverlay(e,t){return su(e).get(jE(this.userId,t)).next((r=>r?cm(this.serializer,r):null))}getOverlays(e,t){const r=Ar();return j.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,l)=>{const h=new ry(t,l);s.push(this.bt(e,h))})),j.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(Yt(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(su(e).X(Bm,h))})),j.waitFor(a)}getOverlaysForCollection(e,t,r){const s=Ar(),a=Yt(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return su(e).H(Bm,l).next((h=>{for(const f of h){const p=cm(this.serializer,f);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=Ar();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return su(e).ee({index:DS,range:h},((f,p,_)=>{const v=cm(this.serializer,p);a.size()<s||v.largestBatchId===l?(a.set(v.getKey(),v),l=v.largestBatchId):_.done()})).next((()=>a))}bt(e,t){return su(e).put((function(s,a,l){const[h,f,p]=jE(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Sd(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function su(n){return bt(n,sf)}class k2{St(e){return bt(e,Hg)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t?.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class to{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ou(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=li(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ui(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?HS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):af(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):me(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=Ua,a=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ut(a)),this.Ot(s,t),this.Ct(r[s],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),de.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}to.Wt=new to;const ha=255;function N2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function qE(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const l=N2(255&r[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class D2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=t.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const t=this.en(e),r=qE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=qE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(ha),this.sn(255)}_n(){this.an(ha),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ha?(this.sn(ha),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ha?(this.an(ha),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class V2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class O2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ou{constructor(){this.cn=new D2,this.ascending=new V2(this.cn),this.descending=new O2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class no{constructor(e,t,r,s){this.hn=e,this.Pn=t,this.Tn=r,this.In=s}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new no(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Zh(this.Tn),directionalValue:Zh(this.In),orderedDocumentKey:Zh(t),documentKey:r.path.toArray()}}An(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Hi(n,e){let t=n.hn-e.hn;return t!==0?t:(t=HE(n.Tn,e.Tn),t!==0?t:(t=HE(n.In,e.In),t!==0?t:de.comparator(n.Pn,e.Pn)))}function HE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Zh(n){return R0()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function GE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class KE{constructor(e){this.Vn=new Xe(((t,r)=>dt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(we(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Um(e);if(t!==void 0&&!this.pn(t))return!1;const r=Js(e);let s=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const h=this.Vn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.yn(h,f)||!this.wn(this.dn[l++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],h))return!1}return!0}bn(){if(this.fn)return null;let e=new Xe(dt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Hh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hh(r.field,r.dir==="asc"?0:1)));return new md(md.UNKNOWN_ID,this.collectionId,t,Vu.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function MA(n){if(we(n instanceof ze||n instanceof Je,20012),n instanceof ze){if(n instanceof eA){const t=n.value.arrayValue?.values?.map((r=>ze.create(n.field,"==",r)))||[];return Je.create(t,"or")}return n}const e=n.filters.map((t=>MA(t)));return Je.create(e,n.op)}function M2(n){if(n.getFilters().length===0)return[];const e=ng(MA(n));return we(LA(e),7391),eg(e)||tg(e)?[e]:e.getFilters()}function eg(n){return n instanceof ze}function tg(n){return n instanceof Je&&Yg(n)}function LA(n){return eg(n)||tg(n)||(function(t){if(t instanceof Je&&Gm(t)){for(const r of t.getFilters())if(!eg(r)&&!tg(r))return!1;return!0}return!1})(n)}function ng(n){if(we(n instanceof ze||n instanceof Je,34018),n instanceof ze)return n;if(n.filters.length===1)return ng(n.filters[0]);const e=n.filters.map((r=>ng(r)));let t=Je.create(e,n.op);return t=Pd(t),LA(t)?t:(we(t instanceof Je,64498),we(Ba(t),40251),we(t.filters.length>1,57927),t.filters.reduce(((r,s)=>oy(r,s))))}function oy(n,e){let t;return we(n instanceof ze||n instanceof Je,38388),we(e instanceof ze||e instanceof Je,25473),t=n instanceof ze?e instanceof ze?(function(s,a){return Je.create([s,a],"and")})(n,e):WE(n,e):e instanceof ze?WE(e,n):(function(s,a){if(we(s.filters.length>0&&a.filters.length>0,48005),Ba(s)&&Ba(a))return JS(s,a.getFilters());const l=Gm(s)?s:a,h=Gm(s)?a:s,f=l.filters.map((p=>oy(p,h)));return Je.create(f,"or")})(n,e),Pd(t)}function WE(n,e){if(Ba(e))return JS(e,n.getFilters());{const t=e.filters.map((r=>oy(n,r)));return Je.create(t,"or")}}function Pd(n){if(we(n instanceof ze||n instanceof Je,11850),n instanceof ze)return n;const e=n.getFilters();if(e.length===1)return Pd(e[0]);if(QS(n))return n;const t=e.map((s=>Pd(s))),r=[];return t.forEach((s=>{s instanceof ze?r.push(s):s instanceof Je&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Je.create(r,n.op)}class L2{constructor(){this.Sn=new ay}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(xn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(xn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class ay{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Xe(Ke.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ke.comparator)).toArray()}}const QE="IndexedDbIndexManager",Nh=new Uint8Array(0);class F2{constructor(e,t){this.databaseId=t,this.Dn=new ay,this.Cn=new hi((r=>mo(r)),((r,s)=>nc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:r,parent:Yt(s)};return YE(e).put(a)}return j.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[vS(t),""],!1,!0);return YE(e).H(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Sr(l.parent))}return r}))}addFieldIndex(e,t){const r=au(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=fa(e);return a.next((h=>{l.put(zE(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=au(e),s=fa(e),a=da(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=au(e),r=da(e),s=fa(e);return t.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,t){return j.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new KE(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=da(e);let s=!0;const a=new Map;return j.forEach(this.vn(t),(l=>this.Fn(e,l).next((h=>{s&&(s=!!h),a.set(l,h)})))).next((()=>{if(s){let l=Ve();const h=[];return j.forEach(a,((f,p)=>{ne(QE,`Using index ${(function(G){return`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(f)} to execute ${mo(t)}`);const _=(function(G,J){const ee=Um(J);if(ee===void 0)return null;for(const ie of Ed(G,ee.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null})(p,f),v=(function(G,J){const ee=new Map;for(const ie of Js(J))for(const P of Ed(G,ie.fieldPath))switch(P.op){case"==":case"in":ee.set(ie.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return ee.set(ie.fieldPath.canonicalString(),P.value),Array.from(ee.values())}return null})(p,f),E=(function(G,J){const ee=[];let ie=!0;for(const P of Js(J)){const S=P.kind===0?RE(G,P.fieldPath,G.startAt):CE(G,P.fieldPath,G.startAt);ee.push(S.value),ie&&(ie=S.inclusive)}return new za(ee,ie)})(p,f),A=(function(G,J){const ee=[];let ie=!0;for(const P of Js(J)){const S=P.kind===0?CE(G,P.fieldPath,G.endAt):RE(G,P.fieldPath,G.endAt);ee.push(S.value),ie&&(ie=S.inclusive)}return new za(ee,ie)})(p,f),D=this.Mn(f,p,E),C=this.Mn(f,p,A),x=this.xn(f,p,v),q=this.On(f.indexId,_,D,E.inclusive,C,A.inclusive,x);return j.forEach(q,(H=>r.Z(H,t.limit).next((G=>{G.forEach((J=>{const ee=de.fromSegments(J.documentKey);l.has(ee)||(l=l.add(ee),h.push(ee))}))}))))})).next((()=>h))}return j.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=M2(Je.create(e.filters,"and")).map((r=>Wm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,s,a,l,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),p=f/(t!=null?t.length:1),_=[];for(let v=0;v<f;++v){const E=t?this.Nn(t[v/p]):Nh,A=this.Bn(e,E,r[v%p],s),D=this.Ln(e,E,a[v%p],l),C=h.map((x=>this.Bn(e,E,x,!0)));_.push(...this.createRange(A,D,C))}return _}Bn(e,t,r,s){const a=new no(e,de.empty(),t,r);return s?a:a.En()}Ln(e,t,r,s){const a=new no(e,de.empty(),t,r);return s?a.En():a}Fn(e,t){const r=new KE(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const h of a)r.gn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let r=2;const s=this.vn(t);return j.forEach(s,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new Xe(dt.comparator),_=!1;for(const v of f.filters)for(const E of v.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?_=!0:p=p.add(E.field));for(const v of f.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(_?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}kn(e,t){const r=new ou;for(const s of Js(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.ln(s.kind);to.Wt.Dt(a,l)}return r.un()}Nn(e){const t=new ou;return to.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new ou;return to.Wt.Dt(zu(this.databaseId,t),r.ln((function(a){const l=Js(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let s=[];s.push(new ou);let a=0;for(const l of Js(e)){const h=r[a++];for(const f of s)if(this.qn(t,l.fieldPath)&&Bu(h))s=this.Un(s,l,h);else{const p=f.ln(l.kind);to.Wt.Dt(h,p)}}return this.$n(s)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of s){const f=new ou;f.seed(h.un()),to.Wt.Dt(l,f.ln(t.kind)),a.push(f)}return a}qn(e,t){return!!e.filters.find((r=>r instanceof ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=au(e),s=fa(e);return(t?r.H(zm,IDBKeyRange.bound(t,t)):r.H()).next((a=>{const l=[];return j.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{l.push((function(_,v){const E=v?new Vu(v.sequenceNumber,new xn(yo(v.readTime),new de(Sr(v.documentKey)),v.largestBatchId)):Vu.empty(),A=_.fields.map((([D,C])=>new Hh(dt.fromServerFormat(D),C)));return new md(_.indexId,_.collectionGroup,A,E)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:be(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=au(e),a=fa(e);return this.Wn(e).next((l=>s.H(zm,IDBKeyRange.bound(t,t)).next((h=>j.forEach(h,(f=>a.put(zE(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,((s,a)=>{const l=r.get(s.collectionGroup);return(l?j.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),j.forEach(h,(f=>this.Qn(e,s,f).next((p=>{const _=this.Gn(a,f);return p.isEqual(_)?j.resolve():this.zn(e,a,f,p,_)})))))))}))}jn(e,t,r,s){return da(e).put(s.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,s){return da(e).delete(s.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const s=da(e);let a=new Xe(Hi);return s.ee({index:NS,range:IDBKeyRange.only([r.indexId,this.uid,Zh(this.Kn(r,t))])},((l,h)=>{a=a.add(new no(r.indexId,t,GE(h.arrayValue),GE(h.directionalValue)))})).next((()=>a))}Gn(e,t){let r=new Xe(Hi);const s=this.kn(t,e);if(s==null)return r;const a=Um(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Bu(l))for(const h of l.arrayValue.values||[])r=r.add(new no(t.indexId,e.key,this.Nn(h),s))}else r=r.add(new no(t.indexId,e.key,Nh,s));return r}zn(e,t,r,s,a){ne(QE,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,_,v,E){const A=f.getIterator(),D=p.getIterator();let C=ca(A),x=ca(D);for(;C||x;){let q=!1,H=!1;if(C&&x){const G=_(C,x);G<0?H=!0:G>0&&(q=!0)}else C!=null?H=!0:q=!0;q?(v(x),x=ca(D)):H?(E(C),C=ca(A)):(C=ca(A),x=ca(D))}})(s,a,Hi,(h=>{l.push(this.jn(e,t,r,h))}),(h=>{l.push(this.Hn(e,t,r,h))})),j.waitFor(l)}Wn(e){let t=1;return fa(e).ee({index:kS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,h)=>Hi(l,h))).filter(((l,h,f)=>!h||Hi(l,f[h-1])!==0));const s=[];s.push(e);for(const l of r){const h=Hi(l,e),f=Hi(l,t);if(h===0)s[0]=e.En();else if(h>0&&f<0)s.push(l),s.push(l.En());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Jn(s[l],s[l+1]))return[];const h=s[l].An(this.uid,Nh,de.empty()),f=s[l+1].An(this.uid,Nh,de.empty());a.push(IDBKeyRange.bound(h,f))}return a}Jn(e,t){return Hi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(JE)}getMinOffset(e,t){return j.mapArray(this.vn(t),(r=>this.Fn(e,r).next((s=>s||me(44426))))).next(JE)}}function YE(n){return bt(n,Fu)}function da(n){return bt(n,Eu)}function au(n){return bt(n,qg)}function fa(n){return bt(n,wu)}function JE(n){we(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;zg(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new xn(e.readTime,e.documentKey,t)}const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FA=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function UA(n,e,t){const r=n.store(Jn),s=n.store(Oa),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=r.ee({range:l},((_,v,E)=>(h++,E.delete())));a.push(f.next((()=>{we(h===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const v=CS(e,_.key.path,t.batchId);a.push(s.delete(v)),p.push(_.key)}return j.waitFor(a).next((()=>p))}function Rd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw me(14731);e=n.noDocument}return JSON.stringify(e).length}Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(FA,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);class df{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,t,r,s){we(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new df(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).ee({index:ro,range:r},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=va(e),l=Gi(e);return l.add({}).next((h=>{we(typeof h=="number",49019);const f=new ty(h,t,r,s),p=(function(A,D,C){const x=C.baseMutations.map((H=>Sd(A.yt,H))),q=C.mutations.map((H=>Sd(A.yt,H)));return{userId:D,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:x,mutations:q}})(this.serializer,this.userId,f),_=[];let v=new Xe(((E,A)=>be(E.canonicalString(),A.canonicalString())));for(const E of s){const A=CS(this.userId,E.key.path,h);v=v.add(E.key.path.popLast()),_.push(l.put(p)),_.push(a.put(A,fO))}return v.forEach((E=>{_.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[h]=f.keys()})),j.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return Gi(e).get(t).next((r=>r?(we(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),eo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?j.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Gi(e).ee({index:ro,range:s},((l,h,f)=>{h.userId===this.userId&&(we(h.batchId>=r,47524,{Yn:r}),a=eo(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=io;return Gi(e).ee({index:ro,range:t,reverse:!0},((s,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,io],[this.userId,Number.POSITIVE_INFINITY]);return Gi(e).H(ro,t).next((r=>r.map((s=>eo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return va(e).ee({range:s},((l,h,f)=>{const[p,_,v]=l,E=Sr(_);if(p===this.userId&&t.path.isEqual(E))return Gi(e).get(v).next((A=>{if(!A)throw me(61480,{er:l,batchId:v});we(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:v}),a.push(eo(this.serializer,A))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(be);const s=[];return t.forEach((a=>{const l=Gh(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=va(e).ee({range:h},((p,_,v)=>{const[E,A,D]=p,C=Sr(A);E===this.userId&&a.path.isEqual(C)?r=r.add(D):v.done()}));s.push(f)})),j.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Gh(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Xe(be);return va(e).ee({range:l},((f,p,_)=>{const[v,E,A]=f,D=Sr(E);v===this.userId&&r.isPrefixOf(D)?D.length===s&&(h=h.add(A)):_.done()})).next((()=>this.tr(e,h)))}tr(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Gi(e).get(a).next((l=>{if(l===null)throw me(35274,{batchId:a});we(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(eo(this.serializer,l))})))})),j.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return UA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),j.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return va(e).ee({range:r},((a,l,h)=>{if(a[0]===this.userId){const f=Sr(a[1]);s.push(f)}else h.done()})).next((()=>{we(s.length===0,56720,{rr:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return jA(e,this.userId,t)}ir(e){return zA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:io,lastStreamToken:""}))}}function jA(n,e,t){const r=Gh(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return va(n).ee({range:a,Y:!0},((h,f,p)=>{const[_,v,E]=h;_===e&&v===s&&(l=!0),p.done()})).next((()=>l))}function Gi(n){return bt(n,Jn)}function va(n){return bt(n,Oa)}function zA(n){return bt(n,Mu)}class _o{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _o(0)}static ar(){return new _o(-1)}}class U2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new _o(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ee.fromTimestamp(new Ye(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.cr(e,s))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>pa(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(we(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return pa(e).ee(((l,h)=>{const f=pu(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>j.waitFor(a))).next((()=>s))}forEachTarget(e,t){return pa(e).ee(((r,s)=>{const a=pu(s);t(a)}))}ur(e){return ZE(e).get(_d).next((t=>(we(t!==null,2888),t)))}cr(e,t){return ZE(e).put(_d,t)}lr(e,t){return pa(e).put(VA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=mo(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return pa(e).ee({range:s,index:bS},((l,h,f)=>{const p=pu(h);nc(t,p.target)&&(a=p,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=Zi(e);return t.forEach((l=>{const h=Yt(l.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,l))})),j.waitFor(s)}removeMatchingKeys(e,t,r){const s=Zi(e);return j.forEach(t,(a=>{const l=Yt(a.path);return j.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Zi(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Zi(e);let a=Ve();return s.ee({range:r,Y:!0},((l,h,f)=>{const p=Sr(l[1]),_=new de(p);a=a.add(_)})).next((()=>a))}containsKey(e,t){const r=Yt(t.path),s=IDBKeyRange.bound([r],[vS(r)],!1,!0);let a=0;return Zi(e).ee({index:$g,Y:!0,range:s},(([l,h],f,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,t){return pa(e).get(t).next((r=>r?pu(r):null))}}function pa(n){return bt(n,Ma)}function ZE(n){return bt(n,so)}function Zi(n){return bt(n,La)}const eT="LruGarbageCollector",BA=1048576;function tT([n,e],[t,r]){const s=be(n,t);return s===0?be(e,r):s}class j2{constructor(e){this.Pr=e,this.buffer=new Xe(tT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $A{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ne(eT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ys(t)?ne(eT,"Ignoring IndexedDB error during garbage collection: ",t):await gs(t)}await this.Ar(3e5)}))}}class z2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(un.ce);const r=new j2(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(XE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,l,h,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,h=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(p=Date.now(),ma()<=je.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v}))))}}function qA(n,e){return new z2(n,e)}class B2{constructor(e,t){this.db=e,this.garbageCollector=qA(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,s)=>t(s)))}addReference(e,t,r){return Dh(e,r)}removeReference(e,t,r){return Dh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Dh(e,t)}wr(e,t){return(function(s,a){let l=!1;return zA(s).te((h=>jA(s,h,a).next((f=>(f&&(l=!0),j.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.yr(e,((l,h)=>{if(h<=t){const f=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Ee.min()),Zi(e).delete((function(v){return[0,Yt(v.path)]})(l)))))}));s.push(f)}})).next((()=>j.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Dh(e,t)}yr(e,t){const r=Zi(e);let s,a=un.ce;return r.ee({index:$g},(([l,h],{path:f,sequenceNumber:p})=>{l===0?(a!==un.ce&&t(new de(Sr(s)),a),a=p,s=f):a=un.ce})).next((()=>{a!==un.ce&&t(new de(Sr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dh(n,e){return Zi(n).put((function(r,s){return{targetId:0,path:Yt(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class HA{constructor(){this.changes=new hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Qs(e).put(r)}removeEntry(e,t,r){return Qs(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Ad(l),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=mt.newInvalidDocument(t);return Qs(e).ee({index:Kh,range:IDBKeyRange.only(lu(t))},((s,a)=>{r=this.Sr(t,a)})).next((()=>r))}Dr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return Qs(e).ee({index:Kh,range:IDBKeyRange.only(lu(t))},((s,a)=>{r={document:this.Sr(t,a),size:Rd(a)}})).next((()=>r))}getEntries(e,t){let r=Sn();return this.Cr(e,t,((s,a)=>{const l=this.Sr(s,a);r=r.insert(s,l)})).next((()=>r))}vr(e,t){let r=Sn(),s=new nt(de.comparator);return this.Cr(e,t,((a,l)=>{const h=this.Sr(a,l);r=r.insert(a,h),s=s.insert(a,Rd(l))})).next((()=>({documents:r,Fr:s})))}Cr(e,t,r){if(t.isEmpty())return j.resolve();let s=new Xe(iT);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(lu(s.first()),lu(s.last())),l=s.getIterator();let h=l.getNext();return Qs(e).ee({index:Kh,range:a},((f,p,_)=>{const v=de.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&iT(h,v)<0;)r(h,null),h=l.getNext();h&&h.isEqual(v)&&(r(h,p),h=l.hasNext()?l.getNext():null),h?_.j(lu(h)):_.done()})).next((()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Ad(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Qs(e).H(IDBKeyRange.bound(h,f,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let _=Sn();for(const v of p){const E=this.Sr(de.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);E.isFoundDocument()&&(rc(t,E)||s.has(E.key))&&(_=_.insert(E.key,E))}return _}))}getAllFromCollectionGroup(e,t,r,s){let a=Sn();const l=rT(t,r),h=rT(t,xn.max());return Qs(e).ee({index:xS,range:IDBKeyRange.bound(l,h,!0)},((f,p,_)=>{const v=this.Sr(de.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(v.key,v),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new q2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return nT(e).get(jm).next((t=>(we(!!t,20021),t)))}br(e,t){return nT(e).put(jm,t)}Sr(e,t){if(t){const r=x2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return mt.newInvalidDocument(e)}}function GA(n){return new $2(n)}class q2 extends HA{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new hi((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Xe(((a,l)=>be(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=UE(this.Mr.serializer,l);s=s.add(a.path.popLast());const p=Rd(f);r+=p-h.size,t.push(this.Mr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=UE(this.Mr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Mr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:s})=>(s.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function nT(n){return bt(n,Lu)}function Qs(n){return bt(n,yd)}function lu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rT(n,e){const t=e.documentKey.path.toArray();return[n,Ad(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iT(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=be(t[a],r[a]),s)return s;return s=be(t.length,r.length),s||(s=be(t[t.length-2],r[r.length-2]),s||be(t[t.length-1],r[r.length-1]))}class H2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KA{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Au(r.mutation,s,Un.empty(),Ye.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const s=Ar();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=du();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Ar();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,s){let a=Sn();const l=Su(),h=(function(){return Su()})();return t.forEach(((f,p)=>{const _=r.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof _s)?a=a.insert(p.key,p):_!==void 0?(l.set(p.key,_.mutation.getFieldMask()),Au(_.mutation,p,_.mutation.getFieldMask(),Ye.now())):l.set(p.key,Un.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,_)=>l.set(p,_))),t.forEach(((p,_)=>h.set(p,new H2(_,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Su();let s=new nt(((l,h)=>l-h)),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let _=r.get(f)||Un.empty();_=h.applyToLocalView(p,_),r.set(f,_);const v=(s.get(h.batchId)||Ve()).add(f);s=s.insert(h.batchId,v)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,_=f.value,v=lA();_.forEach((E=>{if(!a.has(E)){const A=mA(t.get(E),r.get(E));A!==null&&v.set(E,A),a=a.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return j.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return YO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):j.resolve(Ar());let h=Va,f=a;return l.next((p=>j.forEach(p,((_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),a.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next((E=>{f=f.insert(_,E)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Ve()))).next((_=>({batchId:h,changes:aA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next((r=>{let s=du();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=du();return this.indexManager.getCollectionParents(e,a).next((h=>j.forEach(h,(f=>{const p=(function(v,E){return new il(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((_=>{_.forEach(((v,E)=>{l=l.insert(v,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const _=p.getKey();l.get(_)===null&&(l=l.insert(_,mt.newInvalidDocument(_)))}));let h=du();return l.forEach(((f,p)=>{const _=a.get(f);_!==void 0&&Au(_.mutation,p,Un.empty(),Ye.now()),rc(t,p)&&(h=h.insert(f,p))})),h}))}}class G2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:en(s.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:OA(s.bundledQuery),readTime:en(s.readTime)}})(t)),j.resolve()}}class K2{constructor(){this.overlays=new nt(de.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ar();return j.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const s=Ar(),a=t.length+1,l=new de(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return j.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new nt(((p,_)=>p-_));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=a.get(p.largestBatchId);_===null&&(_=Ar(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Ar(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=s)););return j.resolve(h)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ry(t,r));let a=this.Lr.get(t);a===void 0&&(a=Ve(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}class W2{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class ly{constructor(){this.kr=new Xe(Vt.Kr),this.qr=new Xe(Vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new de(new Ke([])),r=new Vt(t,e),s=new Vt(t,e+1),a=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new de(new Ke([])),r=new Vt(t,e),s=new Vt(t,e+1);let a=Ve();return this.qr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Vt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return de.comparator(e.key,t.key)||be(e.Hr,t.Hr)}static Ur(e,t){return be(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}class Q2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Xe(Vt.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new ty(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.Jr=this.Jr.add(new Vt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return j.resolve(l)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return j.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?io:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),s=new Vt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(l=>{const h=this.Zr(l.Hr);a.push(h)})),j.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(be);return t.forEach((s=>{const a=new Vt(s,0),l=new Vt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(h=>{r=r.add(h.Hr)}))})),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;de.isDocumentKey(a)||(a=a.child(""));const l=new Vt(new de(a),0);let h=new Xe(be);return this.Jr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Hr)),!0)}),l),j.resolve(this.Yr(h))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){we(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,(s=>{const a=new Vt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Vt(t,0),s=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Y2{constructor(e){this.ti=e,this.docs=(function(){return new nt(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=Sn();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():mt.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Sn();const l=t.path,h=new de(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||zg(IS(_),r)<=0||(s.has(_.key)||rc(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return j.resolve(a)}getAllFromCollectionGroup(e,t,r,s){me(9500)}ni(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new J2(this)}getSize(e){return j.resolve(this.size)}}class J2 extends HA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class X2{constructor(e){this.persistence=e,this.ri=new hi((t=>mo(t)),nc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.ii=0,this.si=new ly,this.targetCount=0,this.oi=_o._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),j.waitFor(a).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),j.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}}class uy{constructor(e,t){this._i={},this.overlays={},this.ai=new un(0),this.ui=!1,this.ui=!0,this.ci=new W2,this.referenceDelegate=e(this),this.li=new X2(this),this.indexManager=new L2,this.remoteDocumentCache=(function(s){return new Y2(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new DA(t),this.Pi=new G2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new Q2(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const s=new Z2(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return j.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class Z2 extends AS{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Ri=new ly,this.Ai=null}static Vi(e){return new ff(e)}get di(){if(this.Ai)return this.Ai;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,(r=>{const s=de.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Ee.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cd{constructor(e,t){this.persistence=e,this.fi=new hi((r=>Yt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=qA(this,t)}static Vi(e,t){return new Cd(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return j.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?j.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((h=>{h||(r++,a.removeEntry(l,Ee.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class eM{constructor(e){this.serializer=e}k(e,t,r,s){const a=new ef("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore(tc)})(e),(function(f){f.createObjectStore(Mu,{keyPath:dO}),f.createObjectStore(Jn,{keyPath:mE,autoIncrement:!0}).createIndex(ro,gE,{unique:!0}),f.createObjectStore(Oa)})(e),sT(e),(function(f){f.createObjectStore(Xs)})(e));let l=j.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore(La),f.deleteObjectStore(Ma),f.deleteObjectStore(so)})(e),sT(e)),l=l.next((()=>(function(f){const p=f.store(so),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(_d,_)})(a)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(Jn).H().next((v=>{f.deleteObjectStore(Jn),f.createObjectStore(Jn,{keyPath:mE,autoIncrement:!0}).createIndex(ro,gE,{unique:!0});const E=p.store(Jn),A=v.map((D=>E.put(D)));return j.waitFor(A)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Fa,{keyPath:EO})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.gi(a)))),r<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Lu)})(e),this.pi(a))))),r<7&&s>=7&&(l=l.next((()=>this.yi(a)))),r<8&&s>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.bi(a)))),r<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(nf,{keyPath:TO})})(e),(function(f){f.createObjectStore(rf,{keyPath:IO})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(sf,{keyPath:bO});p.createIndex(Bm,kO,{unique:!1}),p.createIndex(DS,NO,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(yd,{keyPath:pO});p.createIndex(Kh,mO),p.createIndex(xS,gO)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Xs)))),r<14&&s>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore(qg,{keyPath:SO,autoIncrement:!0}).createIndex(zm,AO,{unique:!1}),f.createObjectStore(wu,{keyPath:PO}).createIndex(kS,RO,{unique:!1}),f.createObjectStore(Eu,{keyPath:CO}).createIndex(NS,xO,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore(wu).clear()})).next((()=>{t.objectStore(Eu).clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(Hg,{keyPath:DO})})(e)}))),r<18&&s>=18&&R0()&&(l=l.next((()=>{t.objectStore(wu).clear()})).next((()=>{t.objectStore(Eu).clear()}))),l}pi(e){let t=0;return e.store(Xs).ee(((r,s)=>{t+=Rd(s)})).next((()=>{const r={byteSize:t};return e.store(Lu).put(jm,r)}))}gi(e){const t=e.store(Mu),r=e.store(Jn);return t.H().next((s=>j.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,io],[a.userId,a.lastAcknowledgedBatchId]);return r.H(ro,l).next((h=>j.forEach(h,(f=>{we(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=eo(this.serializer,f);return UA(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(La),r=e.store(Xs);return e.store(so).get(_d).next((s=>{const a=[];return r.ee(((l,h)=>{const f=new Ke(l),p=(function(v){return[0,Yt(v)]})(f);a.push(t.get(p).next((_=>_?j.resolve():(v=>t.put({targetId:0,path:Yt(v),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>j.waitFor(a)))}))}wi(e,t){e.createObjectStore(Fu,{keyPath:wO});const r=t.store(Fu),s=new ay,a=l=>{if(s.add(l)){const h=l.lastSegment(),f=l.popLast();return r.put({collectionId:h,parent:Yt(f)})}};return t.store(Xs).ee({Y:!0},((l,h)=>{const f=new Ke(l);return a(f.popLast())})).next((()=>t.store(Oa).ee({Y:!0},(([l,h,f],p)=>{const _=Sr(h);return a(_.popLast())}))))}bi(e){const t=e.store(Ma);return t.ee(((r,s)=>{const a=pu(s),l=VA(this.serializer,a);return t.put(l)}))}Si(e,t){const r=t.store(Xs),s=[];return r.ee(((a,l)=>{const h=t.store(yd),f=(function(v){return v.document?new de(Ke.fromString(v.document.name).popFirst(5)):v.noDocument?de.fromSegments(v.noDocument.path):v.unknownDocument?de.fromSegments(v.unknownDocument.path):me(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(p))})).next((()=>j.waitFor(s)))}Di(e,t){const r=t.store(Jn),s=GA(this.serializer),a=new uy(ff.Vi,this.serializer.yt);return r.H().next((l=>{const h=new Map;return l.forEach((f=>{let p=h.get(f.userId)??Ve();eo(this.serializer,f).keys().forEach((_=>p=p.add(_))),h.set(f.userId,p)})),j.forEach(h,((f,p)=>{const _=new Wt(p),v=hf.wt(this.serializer,_),E=a.getIndexManager(_),A=df.wt(_,this.serializer,E,a.referenceDelegate);return new KA(s,A,v,E).recalculateAndSaveOverlaysForDocumentKeys(new $m(t,un.ce),f).next()}))}))}}function sT(n){n.createObjectStore(La,{keyPath:_O}).createIndex($g,vO,{unique:!0}),n.createObjectStore(Ma,{keyPath:"targetId"}).createIndex(bS,yO,{unique:!0}),n.createObjectStore(so)}const Ki="IndexedDbPersistence",hm=18e5,dm=5e3,fm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tM="main";class cy{constructor(e,t,r,s,a,l,h,f,p,_,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=a,this.window=l,this.document=h,this.Fi=p,this.Mi=_,this.xi=v,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!cy.v())throw new le(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new B2(this,s),this.Ki=t+tM,this.serializer=new DA(f),this.qi=new os(this.Ki,this.xi,new eM(this.serializer)),this.ci=new k2,this.li=new U2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GA(this.serializer),this.Pi=new b2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&vt(Ki,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,fm);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new un(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Vh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ys(e))return ne(Ki,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ne(Ki,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return uu(e).get(ua).next((t=>j.resolve(this.Xi(t))))}Yi(e){return Vh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,hm)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=bt(t,Fa);return r.H().next((s=>{const a=this.ns(s,hm),l=s.filter((h=>a.indexOf(h)===-1));return j.forEach(l,(h=>r.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?j.resolve(!0):uu(e).get(ua).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,dm)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new le(Y.FAILED_PRECONDITION,fm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vh(e).H().next((r=>this.ns(r,dm).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ne(Ki,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[tc,Fa],(e=>{const t=new $m(e,un.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Vh(e).H().next((t=>this.ns(t,hm).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return df.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return hf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ne(Ki,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?MO:f===17?LS:f===16?OO:f===15?Gg:f===14?MS:f===13?OS:f===12?VO:f===11?VS:void me(60245)})(this.xi);let l;return this.qi.runTransaction(e,s,a,(h=>(l=new $m(h,this.ai?this.ai.next():un.ce),t==="readwrite-primary"?this.ji(l).next((f=>!!f||this.Hi(l))).next((f=>{if(!f)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new le(Y.FAILED_PRECONDITION,SS);return r(l)})).next((f=>this.Zi(l).next((()=>f)))):this.Ps(l).next((()=>r(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Ps(e){return uu(e).get(ua).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,dm)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(Y.FAILED_PRECONDITION,fm)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uu(e).put(ua,t)}static v(){return os.v()}Ji(e){const t=uu(e);return t.get(ua).next((r=>this.Xi(r)?(ne(Ki,"Releasing primary lease."),t.delete(ua)):j.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){typeof this.window?.addEventListener=="function"&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;P0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{const t=this.Ui?.getItem(this.rs(e))!==null;return ne(Ki,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return vt(Ki,"Failed to get zombied client id.",t),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function uu(n){return bt(n,tc)}function Vh(n){return bt(n,Fa)}function WA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Ve(),s=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new hy(e,t.fromCache,r,s)}}class nM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return P0()?8:PS(xt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new nM;return this.ys(e,t,l).next((h=>{if(a.result=h,this.As)return this.ws(e,t,l,h.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(ma()<=je.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(ma()<=je.DEBUG&&ne("QueryEngine","Query:",ga(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ma()<=je.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(t))):j.resolve())}gs(e,t){if(xE(t))return j.resolve(null);let r=Rn(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Td(t,null,"F"),r=Rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ve(...a);return this.fs.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.bs(t,h);return this.Ss(t,p,l,f.readTime)?this.gs(e,Td(t,null,"F")):this.Ds(e,p,t,f)}))))})))))}ps(e,t,r,s){return xE(t)||s.isEqual(Ee.min())?j.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,s)?j.resolve(null):(ma()<=je.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ga(t)),this.Ds(e,l,t,TS(s,Va)).next((h=>h)))}))}bs(e,t){let r=new Xe(sA(e));return t.forEach(((s,a)=>{rc(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return ma()<=je.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",ga(t)),this.fs.getDocumentsMatchingQuery(e,t,xn.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const dy="LocalStore",rM=3e8;class iM{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new nt(be),this.Fs=new hi((a=>mo(a)),nc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function YA(n,e,t,r){return new iM(n,e,t,r)}async function JA(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=Ve();for(const p of s){l.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function sM(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,_){const v=p.batch,E=v.keys();let A=j.resolve();return E.forEach((D=>{A=A.next((()=>_.getEntry(f,D))).next((C=>{const x=p.docVersions.get(D);we(x!==null,48541),C.version.compareTo(x)<0&&(v.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),_.addEntry(C)))}))})),A.next((()=>h.mutationQueue.removeMutationBatch(f,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function XA(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function oM(n,e){const t=_e(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const h=[];e.targetChanges.forEach(((_,v)=>{const E=s.get(v);if(!E)return;h.push(t.li.removeMatchingKeys(a,_.removedDocuments,v).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,v))));let A=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(wt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,r)),s=s.insert(v,A),(function(C,x,q){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=rM?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(E,A,_)&&h.push(t.li.updateTargetData(a,A))}));let f=Sn(),p=Ve();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(aM(a,l,e.documentUpdates).next((_=>{f=_.Bs,p=_.Ls}))),!r.isEqual(Ee.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((v=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return j.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.vs=s,a)))}function aM(n,e,t){let r=Ve(),s=Ve();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Sn();return t.forEach(((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):ne(dy,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{Bs:l,Ls:s}}))}function lM(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=io),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function xd(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,j.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new ti(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Ka(n,e,t){const r=_e(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ys(l))throw l;ne(dy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function rg(n,e,t){const r=_e(n);let s=Ee.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,_){const v=_e(f),E=v.Fs.get(_);return E!==void 0?j.resolve(v.vs.get(E)):v.li.getTargetData(p,_)})(r,l,Rn(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ee.min(),t?a:Ve()))).next((h=>(tP(r,iA(e),h),{documents:h,ks:a})))))}function ZA(n,e){const t=_e(n),r=_e(t.li),s=t.vs.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function eP(n,e){const t=_e(n),r=t.Ms.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.xs.getAllFromCollectionGroup(s,e,TS(r,Va),Number.MAX_SAFE_INTEGER))).then((s=>(tP(t,e,s),s)))}function tP(n,e,t){let r=n.Ms.get(e)||Ee.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}const nP="firestore_clients";function oT(n,e){return`${nP}_${n}_${e}`}const rP="firestore_mutations";function aT(n,e,t){let r=`${rP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const iP="firestore_targets";function pm(n,e){return`${iP}_${n}_${e}`}const Ir="SharedClientState";class bd{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static $s(e,t,r){const s=JSON.parse(r);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new le(s.error.code,s.error.message))),l?new bd(e,t,s.state,a):(vt(Ir,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new le(r.error.code,r.error.message))),a?new Pu(e,r.state,s):(vt(Ir,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kd{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=Xg();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=RS(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return s?new kd(e,a):(vt(Ir,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fy{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fy(t.clientId,t.onlineState):(vt(Ir,`Failed to parse online state: ${e}`),null)}}class ig{constructor(){this.activeTargetIds=Xg()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mm{constructor(e,t,r,s,a){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new nt(be),this.started=!1,this.Zs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=oT(this.persistenceKey,this.zs),this.Ys=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new ig),this.eo=new RegExp(`^${nP}_${l}_([^_]*)$`),this.no=new RegExp(`^${rP}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${iP}_${l}_(\\d+)$`),this.io=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this.so=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const r of e){if(r===this.zs)continue;const s=this.getItem(oT(this.persistenceKey,r));if(s){const a=kd.$s(r,s);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const t=this.storage.getItem(this.io);if(t){const r=this._o(t);r&&this.ao(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(pm(this.persistenceKey,e));if(s){const a=Pu.$s(e,s);a&&(r=a.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.lo(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ne(Ir,"READ",e,t),t}setItem(e,t){ne(Ir,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ne(Ir,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ne(Ir,"EVENT",t.key,t.newValue),t.key===this.Xs)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const r=this.Eo(t.key);return this.Ro(r,null)}{const r=this.Ao(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.no.test(t.key)){if(t.newValue!==null){const r=this.Vo(t.key,t.newValue);if(r)return this.mo(r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(t.key===this.io){if(t.newValue!==null){const r=this._o(t.newValue);if(r)return this.ao(r)}}else if(t.key===this.Ys){const r=(function(a){let l=un.ce;if(a!=null)try{const h=JSON.parse(a);we(typeof h=="number",30636,{yo:a}),l=h}catch(h){vt(Ir,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);r!==un.ce&&this.sequenceNumberHandler(r)}else if(t.key===this.so){const r=this.wo(t.newValue);await Promise.all(r.map((s=>this.syncEngine.bo(s))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){const s=new bd(this.currentUser,e,t,r),a=aT(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Ws())}lo(e){const t=aT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){const s=pm(this.persistenceKey,e),a=new Pu(e,t,r);this.setItem(s,a.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const r=this.Eo(e);return kd.$s(r,t)}Vo(e,t){const r=this.no.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return bd.$s(new Wt(a),s,t)}fo(e,t){const r=this.ro.exec(e),s=Number(r[1]);return Pu.$s(s,t)}_o(e){return fy.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);ne(Ir,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Js.insert(e,t):this.Js.remove(e),s=this.uo(this.Js),a=this.uo(r),l=[],h=[];return a.forEach((f=>{s.has(f)||l.push(f)})),s.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.Co(l,h).then((()=>{this.Js=r}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=Xg();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class sP{constructor(){this.vo=new ig,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ig,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uM{Mo(e){}shutdown(){}}const lT="ConnectivityMonitor";class uT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ne(lT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ne(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Oh=null;function sg(){return Oh===null?Oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oh++,"0x"+Oh.toString(16)}const gm="RestConnection",cM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class hM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===vd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=sg(),h=this.Qo(e,t.toUriEncodedString());ne(gm,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,s,a);const{host:p}=new URL(h),_=el(p);return this.zo(e,h,f,r,_).then((v=>(ne(gm,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Du(gm,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v}))}jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=cM[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class dM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Kt="WebChannelConnection",cu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Pa extends hM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Pa.c_){const e=gS();cu(e,mS.STAT_EVENT,(t=>{t.stat===Mm.PROXY?ne(Kt,"STAT_EVENT: detected buffering proxy"):t.stat===Mm.NOPROXY&&ne(Kt,"STAT_EVENT: detected no buffering proxy")})),Pa.c_=!0}}zo(e,t,r,s,a){const l=sg();return new Promise(((h,f)=>{const p=new fS;p.setWithCredentials(!0),p.listenOnce(pS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case qh.NO_ERROR:const v=p.getResponseJson();ne(Kt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case qh.TIMEOUT:ne(Kt,`RPC '${e}' ${l} timed out`),f(new le(Y.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const E=p.getStatus();if(ne(Kt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const C=(function(q){const H=q.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(H)>=0?H:Y.UNKNOWN})(D.status);f(new le(C,D.message))}else f(new le(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new le(Y.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ne(Kt,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(s);ne(Kt,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",_,r,15)}))}T_(e,t,r){const s=sg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Go(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=a.join("");ne(Kt,`Creating RPC '${e}' stream ${s}: ${p}`,h);const _=l.createWebChannel(p,h);this.I_(_);let v=!1,E=!1;const A=new dM({Ho:D=>{E?ne(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(v||(ne(Kt,`Opening RPC '${e}' stream ${s} transport.`),_.open(),v=!0),ne(Kt,`RPC '${e}' stream ${s} sending:`,D),_.send(D))},Jo:()=>_.close()});return cu(_,hu.EventType.OPEN,(()=>{E||(ne(Kt,`RPC '${e}' stream ${s} transport opened.`),A.i_())})),cu(_,hu.EventType.CLOSE,(()=>{E||(E=!0,ne(Kt,`RPC '${e}' stream ${s} transport closed`),A.o_(),this.E_(_))})),cu(_,hu.EventType.ERROR,(D=>{E||(E=!0,Du(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),A.o_(new le(Y.UNAVAILABLE,"The operation could not be completed")))})),cu(_,hu.EventType.MESSAGE,(D=>{if(!E){const C=D.data[0];we(!!C,16349);const x=C,q=x?.error||x[0]?.error;if(q){ne(Kt,`RPC '${e}' stream ${s} received error:`,q);const H=q.status;let G=(function(ie){const P=St[ie];if(P!==void 0)return _A(P)})(H),J=q.message;G===void 0&&(G=Y.INTERNAL,J="Unknown error status: "+H+" with message "+q.message),E=!0,A.o_(new le(G,J)),_.close()}else ne(Kt,`RPC '${e}' stream ${s} received:`,C),A.__(C)}})),Pa.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return yS()}}function fM(n){return new Pa(n)}function oP(){return typeof window<"u"?window:null}function ed(){return typeof document<"u"?document:null}function pf(n){return new v2(n,!0)}Pa.c_=!1;class aP{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const cT="PersistentStream";class lP{constructor(e,t,r,s,a,l,h,f){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new le(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(cT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ne(cT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pM extends lP{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T2(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ee.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?en(l.readTime):Ee.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Xm(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=wd(f)?{documents:PA(a,f)}:{query:RA(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=EA(a,l.resumeToken);const p=Ym(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Ga(a,l.snapshotVersion.toTimestamp());const p=Ym(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=S2(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Xm(this.serializer),t.removeTarget=e,this.K_(t)}}class mM extends lP{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=I2(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Xm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Sd(this.serializer,r)))};this.K_(t)}}class gM{}class yM extends gM{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,Jm(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Y.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.jo(e,Jm(t,r),s,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(Y.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _M(n,e,t,r){return new yM(n,e,t,r)}class vM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vt(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class wM{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Eo(this)&&(ne(vo,"Restarting streams for network reachability change."),await(async function(f){const p=_e(f);p.Ea.add(4),await oc(p),p.Va.set("Unknown"),p.Ea.delete(4),await mf(p)})(this))}))})),this.Va=new vM(r,s)}}async function mf(n){if(Eo(n))for(const e of n.Ra)await e(!0)}async function oc(n){for(const e of n.Ra)await e(!1)}function gf(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gy(t)?my(t):al(t).O_()&&py(t,e))}function Wa(n,e){const t=_e(n),r=al(t);t.Ia.delete(e),r.O_()&&uP(t,e),t.Ia.size===0&&(r.O_()?r.L_():Eo(t)&&t.Va.set("Unknown"))}function py(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}al(n).Z_(e)}function uP(n,e){n.da.$e(e),al(n).X_(e)}function my(n){n.da=new m2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),al(n).start(),n.Va.ua()}function gy(n){return Eo(n)&&!al(n).x_()&&n.Ia.size>0}function Eo(n){return _e(n).Ea.size===0}function cP(n){n.da=void 0}async function EM(n){n.Va.set("Online")}async function TM(n){n.Ia.forEach(((e,t)=>{py(n,e)}))}async function IM(n,e){cP(n),gy(n)?(n.Va.ha(e),my(n)):n.Va.set("Unknown")}async function SM(n,e,t){if(n.Va.set("Online"),e instanceof wA&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const h of a.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.da.removeTarget(h))})(n,e)}catch(r){ne(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nd(n,r)}else if(e instanceof Xh?n.da.Xe(e):e instanceof vA?n.da.st(e):n.da.tt(e),!t.isEqual(Ee.min()))try{const r=await XA(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.da.Tt(l);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ia.get(p);_&&a.Ia.set(p,_.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,p)=>{const _=a.Ia.get(f);if(!_)return;a.Ia.set(f,_.withResumeToken(wt.EMPTY_BYTE_STRING,_.snapshotVersion)),uP(a,f);const v=new ti(_.target,f,p,_.sequenceNumber);py(a,v)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){ne(vo,"Failed to raise snapshot:",r),await Nd(n,r)}}async function Nd(n,e,t){if(!ys(e))throw e;n.Ea.add(1),await oc(n),n.Va.set("Offline"),t||(t=()=>XA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(vo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await mf(n)}))}function hP(n,e){return e().catch((t=>Nd(n,t,e)))}async function ol(n){const e=_e(n),t=ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:io;for(;AM(e);)try{const s=await lM(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,PM(e,s)}catch(s){await Nd(e,s)}dP(e)&&fP(e)}function AM(n){return Eo(n)&&n.Ta.length<10}function PM(n,e){n.Ta.push(e);const t=ps(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function dP(n){return Eo(n)&&!ps(n).x_()&&n.Ta.length>0}function fP(n){ps(n).start()}async function RM(n){ps(n).ra()}async function CM(n){const e=ps(n);for(const t of n.Ta)e.ea(t.mutations)}async function xM(n,e,t){const r=n.Ta.shift(),s=ny.from(r,e,t);await hP(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await ol(n)}async function bM(n,e){e&&ps(n).Y_&&await(async function(r,s){if((function(l){return d2(l)&&l!==Y.ABORTED})(s.code)){const a=r.Ta.shift();ps(r).B_(),await hP(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await ol(r)}})(n,e),dP(n)&&fP(n)}async function hT(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ne(vo,"RemoteStore received new credentials");const r=Eo(t);t.Ea.add(3),await oc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await mf(t)}async function og(n,e){const t=_e(n);e?(t.Ea.delete(2),await mf(t)):e||(t.Ea.add(2),await oc(t),t.Va.set("Unknown"))}function al(n){return n.ma||(n.ma=(function(t,r,s){const a=_e(t);return a.sa(),new pM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:EM.bind(null,n),Yo:TM.bind(null,n),t_:IM.bind(null,n),J_:SM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),gy(n)?my(n):n.Va.set("Unknown")):(await n.ma.stop(),cP(n))}))),n.ma}function ps(n){return n.fa||(n.fa=(function(t,r,s){const a=_e(t);return a.sa(),new mM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RM.bind(null,n),t_:bM.bind(null,n),ta:CM.bind(null,n),na:xM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ol(n)):(await n.fa.stop(),n.Ta.length>0&&(ne(vo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class yy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new yy(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(n,e){if(vt("AsyncQueue",`${e}: ${n}`),ys(n))return new le(Y.UNAVAILABLE,`${e}: ${n}`);throw n}class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||de.comparator(t.key,r.key):(t,r)=>de.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dT{constructor(){this.ga=new nt(de.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Qa{constructor(e,t,r,s,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new Qa(e,t,Ra.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class kM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class NM{constructor(){this.queries=fT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=_e(t),a=s.queries;s.queries=fT(),a.forEach(((l,h)=>{for(const f of h.ba)f.onError(r)}))})(this,new le(Y.ABORTED,"Firestore shutting down"))}}function fT(){return new hi((n=>rA(n)),lf)}async function DM(n,e){const t=_e(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new kM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=_y(l,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&vy(t)}async function VM(n,e){const t=_e(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function OM(n,e){const t=_e(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.ba)h.Fa(s)&&(r=!0);l.wa=s}}r&&vy(t)}function MM(n,e,t){const r=_e(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function vy(n){n.Ca.forEach((e=>{e.next()}))}var ag,pT;(pT=ag||(ag={})).Ma="default",pT.Cache="cache";class LM{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ag.Cache}}class pP{constructor(e){this.key=e}}class mP{constructor(e){this.key=e}}class FM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ve(),this.mutatedKeys=Ve(),this.eu=sA(e),this.tu=new Ra(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new dT,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,v)=>{const E=s.get(_),A=rc(this.query,v)?v:null,D=!!E&&this.mutatedKeys.has(E.key),C=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;E&&A?E.data.isEqual(A.data)?D!==C&&(r.track({type:3,doc:A}),x=!0):this.su(E,A)||(r.track({type:2,doc:A}),x=!0,(f&&this.eu(A,f)>0||p&&this.eu(A,p)<0)&&(h=!0)):!E&&A?(r.track({type:0,doc:A}),x=!0):E&&!A&&(r.track({type:1,doc:E}),x=!0,(f||p)&&(h=!0)),x&&(A?(l=l.add(A),a=C?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{tu:l,iu:r,Ss:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((_,v)=>(function(A,D){const C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Vt:x})}};return C(A)-C(D)})(_.type,v.type)||this.eu(_.doc,v.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],f=this.Ya.size===0&&this.current&&!s?1:0,p=f!==this.Xa;return this.Xa=f,l.length!==0||p?{snapshot:new Qa(this.query,e.tu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new mP(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new pP(r))})),t}cu(e){this.Za=e.ks,this.Ya=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ll="SyncEngine";class UM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jM{constructor(e){this.key=e,this.hu=!1}}class zM{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new hi((h=>rA(h)),lf),this.Iu=new Map,this.Eu=new Set,this.Ru=new nt(de.comparator),this.Au=new Map,this.Vu=new ly,this.du={},this.mu=new Map,this.fu=_o.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BM(n,e,t=!0){const r=yf(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await gP(r,e,t,!0),s}async function $M(n,e){const t=yf(n);await gP(t,e,!0,!1)}async function gP(n,e,t,r){const s=await xd(n.localStore,Rn(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await wy(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&gf(n.remoteStore,s),h}async function wy(n,e,t,r,s){n.pu=(v,E,A)=>(async function(C,x,q,H){let G=x.view.ru(q);G.Ss&&(G=await rg(C.localStore,x.query,!1).then((({documents:P})=>x.view.ru(P,G))));const J=H&&H.targetChanges.get(x.targetId),ee=H&&H.targetMismatches.get(x.targetId)!=null,ie=x.view.applyChanges(G,C.isPrimaryClient,J,ee);return lg(C,x.targetId,ie.au),ie.snapshot})(n,v,E,A);const a=await rg(n.localStore,e,!0),l=new FM(e,a.ks),h=l.ru(a.documents),f=sc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(h,n.isPrimaryClient,f);lg(n,t,p.au);const _=new UM(e,t,l);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function qM(n,e,t){const r=_e(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!lf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ka(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Wa(r.remoteStore,s.targetId),Ya(r,s.targetId)})).catch(gs)):(Ya(r,s.targetId),await Ka(r.localStore,s.targetId,!0))}async function HM(n,e){const t=_e(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wa(t.remoteStore,r.targetId))}async function GM(n,e,t){const r=Sy(n);try{const s=await(function(l,h){const f=_e(l),p=Ye.now(),_=h.reduce(((A,D)=>A.add(D.key)),Ve());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=Sn(),C=Ve();return f.xs.getEntries(A,_).next((x=>{D=x,D.forEach(((q,H)=>{H.isValidDocument()||(C=C.add(q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,D))).next((x=>{v=x;const q=[];for(const H of h){const G=c2(H,v.get(H.key).overlayedDocument);G!=null&&q.push(new _s(H.key,G,KS(G.value.mapValue),An.exists(!0)))}return f.mutationQueue.addMutationBatch(A,p,q,h)})).next((x=>{E=x;const q=x.applyToLocalDocumentSet(v,C);return f.documentOverlayCache.saveOverlays(A,x.batchId,q)}))})).then((()=>({batchId:E.batchId,changes:aA(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,h,f){let p=l.du[l.currentUser.toKey()];p||(p=new nt(be)),p=p.insert(h,f),l.du[l.currentUser.toKey()]=p})(r,s.batchId,t),await vs(r,s.changes),await ol(r.remoteStore)}catch(s){const a=_y(s,"Failed to persist write");t.reject(a)}}async function yP(n,e){const t=_e(n);try{const r=await oM(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?we(l.hu,14607):s.removedDocuments.size>0&&(we(l.hu,42227),l.hu=!1))})),await vs(t,r,e)}catch(r){await gs(r)}}function mT(n,e,t){const r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const f=_e(l);f.onlineState=h;let p=!1;f.queries.forEach(((_,v)=>{for(const E of v.ba)E.va(h)&&(p=!0)})),p&&vy(f)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KM(n,e,t){const r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new nt(de.comparator);l=l.insert(a,mt.newNoDocument(a,Ee.min()));const h=Ve().add(a),f=new ic(Ee.min(),new Map,new nt(be),l,h);await yP(r,f),r.Ru=r.Ru.remove(a),r.Au.delete(e),Iy(r)}else await Ka(r.localStore,e,!1).then((()=>Ya(r,e,t))).catch(gs)}async function WM(n,e){const t=_e(n),r=e.batch.batchId;try{const s=await sM(t.localStore,e);Ty(t,r,null),Ey(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vs(t,s)}catch(s){await gs(s)}}async function QM(n,e,t){const r=_e(n);try{const s=await(function(l,h){const f=_e(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return f.mutationQueue.lookupMutationBatch(p,h).next((v=>(we(v!==null,37113),_=v.keys(),f.mutationQueue.removeMutationBatch(p,v)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>f.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);Ty(r,e,t),Ey(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vs(r,s)}catch(s){await gs(s)}}function Ey(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ty(n,e,t){const r=_e(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Ya(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||_P(n,r)}))}function _P(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Wa(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Iy(n))}function lg(n,e,t){for(const r of t)r instanceof pP?(n.Vu.addReference(r.key,e),YM(n,r)):r instanceof mP?(ne(ll,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||_P(n,r.key)):me(19791,{wu:r})}function YM(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ne(ll,"New document in limbo: "+t),n.Eu.add(r),Iy(n))}function Iy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new de(Ke.fromString(e)),r=n.fu.next();n.Au.set(r,new jM(t)),n.Ru=n.Ru.insert(t,r),gf(n.remoteStore,new ti(Rn(Jg(t.path)),r,"TargetPurposeLimboResolution",un.ce))}}async function vs(n,e,t){const r=_e(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{l.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(p){s.push(p);const _=hy.Es(f.targetId,p);a.push(_)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(f,p){const _=_e(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>j.forEach(p,(E=>j.forEach(E.Ts,(A=>_.persistence.referenceDelegate.addReference(v,E.targetId,A))).next((()=>j.forEach(E.Is,(A=>_.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))))))}catch(v){if(!ys(v))throw v;ne(dy,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const A=_.vs.get(E),D=A.snapshotVersion,C=A.withLastLimboFreeSnapshotVersion(D);_.vs=_.vs.insert(E,C)}}})(r.localStore,a))}async function JM(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ne(ll,"User change. New user:",e.toKey());const r=await JA(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new le(Y.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vs(t,r.Ns)}}function XM(n,e){const t=_e(n),r=t.Au.get(e);if(r&&r.hu)return Ve().add(r.key);{let s=Ve();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}async function ZM(n,e){const t=_e(n),r=await rg(t.localStore,e.query,!0),s=e.view.cu(r);return t.isPrimaryClient&&lg(t,e.targetId,s.au),s}async function eL(n,e){const t=_e(n);return eP(t.localStore,e).then((r=>vs(t,r)))}async function tL(n,e,t,r){const s=_e(n),a=await(function(h,f){const p=_e(h),_=_e(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(v=>_.Xn(v,f).next((E=>E?p.localDocuments.getDocuments(v,E):j.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await ol(s.remoteStore):t==="acknowledged"||t==="rejected"?(Ty(s,e,r||null),Ey(s,e),(function(h,f){_e(_e(h).mutationQueue).nr(f)})(s.localStore,e)):me(6720,"Unknown batchState",{bu:t}),await vs(s,a)):ne(ll,"Cannot apply mutation batch with id: "+e)}async function nL(n,e){const t=_e(n);if(yf(t),Sy(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await gT(t,r.toArray());t.gu=!0,await og(t.remoteStore,!0);for(const a of s)gf(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const r=[];let s=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then((()=>(Ya(t,l),Ka(t.localStore,l,!0)))),Wa(t.remoteStore,l)})),await s,await gT(t,r),(function(l){const h=_e(l);h.Au.forEach(((f,p)=>{Wa(h.remoteStore,p)})),h.Vu.zr(),h.Au=new Map,h.Ru=new nt(de.comparator)})(t),t.gu=!1,await og(t.remoteStore,!1)}}async function gT(n,e,t){const r=_e(n),s=[],a=[];for(const l of e){let h;const f=r.Iu.get(l);if(f&&f.length!==0){h=await xd(r.localStore,Rn(f[0]));for(const p of f){const _=r.Tu.get(p),v=await ZM(r,_);v.snapshot&&a.push(v.snapshot)}}else{const p=await ZA(r.localStore,l);h=await xd(r.localStore,p),await wy(r,vP(p),l,!1,h.resumeToken)}s.push(h)}return r.Pu.J_(a),s}function vP(n){return tA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function rL(n){return(function(t){return _e(_e(t).persistence).hs()})(_e(n).localStore)}async function iL(n,e,t,r){const s=_e(n);if(s.gu)return void ne(ll,"Ignoring unexpected query state notification.");const a=s.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await eP(s.localStore,iA(a[0])),h=ic.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wt.EMPTY_BYTE_STRING);await vs(s,l,h);break}case"rejected":await Ka(s.localStore,e,!0),Ya(s,e,r);break;default:me(64155,t)}}async function sL(n,e,t){const r=yf(n);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){ne(ll,"Adding an already active target "+s);continue}const a=await ZA(r.localStore,s),l=await xd(r.localStore,a);await wy(r,vP(a),l.targetId,!1,l.resumeToken),gf(r.remoteStore,l)}for(const s of t)r.Iu.has(s)&&await Ka(r.localStore,s,!1).then((()=>{Wa(r.remoteStore,s),Ya(r,s)})).catch(gs)}}function yf(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KM.bind(null,e),e.Pu.J_=OM.bind(null,e.eventManager),e.Pu.yu=MM.bind(null,e.eventManager),e}function Sy(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QM.bind(null,e),e}class Hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return YA(this.persistence,new QA,e.initialUser,this.serializer)}Cu(e){return new uy(ff.Vi,this.serializer)}Du(e){return new sP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hu.provider={build:()=>new Hu};class oL extends Hu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){we(this.persistence.referenceDelegate instanceof Cd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new $A(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new uy((r=>Cd.Vi(r,t)),this.serializer)}}class wP extends Hu{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Sy(this.xu.syncEngine),await ol(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YA(this.persistence,new QA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new $A(r,e.asyncQueue,t)}Mu(e,t){const r=new cO(t,this.persistence);return new uO(e.asyncQueue,r)}Cu(e){const t=WA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new cy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oP(),ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sP}}class aL extends wP{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof mm&&(this.sharedClientState.syncEngine={So:tL.bind(null,t),Do:iL.bind(null,t),Co:sL.bind(null,t),hs:rL.bind(null,t),bo:eL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async r=>{await nL(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=oP();if(!mm.v(t))throw new le(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JM.bind(null,this.syncEngine),await og(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NM})()}createDatastore(e){const t=pf(e.databaseInfo.databaseId),r=fM(e.databaseInfo);return _M(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,h){return new wM(r,s,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>mT(this.syncEngine,t,0)),(function(){return uT.v()?new uT:new uM})())}createSyncEngine(e,t){return(function(s,a,l,h,f,p,_){const v=new zM(s,a,l,h,f,p);return _&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=_e(t);ne(vo,"RemoteStore shutting down."),r.Ea.add(5),await oc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gu.provider={build:()=>new Gu};class lL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ms="FirestoreClient";class uL{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{ne(ms,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ne(ms,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_y(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ym(n,e){n.asyncQueue.verifyOperationInProgress(),ne(ms,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await JA(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await cL(n);ne(ms,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>hT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>hT(e.remoteStore,s))),n._onlineComponents=e}async function cL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(ms,"Using user provided OfflineComponentProvider");try{await ym(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Du("Error using user provided cache. Falling back to memory cache: "+t),await ym(n,new Hu)}}else ne(ms,"Using default OfflineComponentProvider"),await ym(n,new oL(void 0));return n._offlineComponents}async function EP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(ms,"Using user provided OnlineComponentProvider"),await yT(n,n._uninitializedComponentsProvider._online)):(ne(ms,"Using default OnlineComponentProvider"),await yT(n,new Gu))),n._onlineComponents}function hL(n){return EP(n).then((e=>e.syncEngine))}async function dL(n){const e=await EP(n),t=e.eventManager;return t.onListen=BM.bind(null,e.syncEngine),t.onUnlisten=qM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$M.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=HM.bind(null,e.syncEngine),t}function fL(n,e,t={}){const r=new ni;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const _=new lL({next:E=>{_.Nu(),l.enqueueAndForget((()=>VM(a,v))),E.fromCache&&f.source==="server"?p.reject(new le(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new LM(h,_,{includeMetadataChanges:!0,Ka:!0});return DM(a,v)})(await dL(n),n.asyncQueue,e,t,r))),r.promise}function pL(n,e){const t=new ni;return n.asyncQueue.enqueueAndForget((async()=>GM(await hL(n),e,t))),t.promise}function TP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const mL="ComponentProvider",_T=new Map;function gL(n,e,t,r,s){return new FO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,TP(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const yL="firestore.googleapis.com",vT=!0;class wT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yL,this.ssl=vT}else this.host=e.host,this.ssl=e.ssl??vT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BA)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TP(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new JV;switch(r.type){case"firstParty":return new eO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=_T.get(t);r&&(ne(mL,"Removing Datastore"),_T.delete(t),r.terminate())})(this),Promise.resolve()}}class ws{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class Ot{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ec(t,Ot._jsonSchema))return new Ot(e,r||null,new de(Ke.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:At("string",Ot._jsonSchemaVersion),referencePath:At("string")};class as extends ws{constructor(e,t,r){super(e,t,Jg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new de(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function VF(n,e,...t){if(n=Cn(n),wS("collection","path",e),n instanceof Ay){const r=Ke.fromString(e,...t);return cE(r),new as(n,null,r)}{if(!(n instanceof Ot||n instanceof as))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return cE(r),new as(n.firestore,null,r)}}function _L(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=jg.newId()),wS("doc","path",e),n instanceof Ay){const r=Ke.fromString(e,...t);return uE(r),new Ot(n,null,new de(r))}{if(!(n instanceof Ot||n instanceof as))throw new le(Y.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ke.fromString(e,...t));return uE(r),new Ot(n.firestore,n instanceof as?n.converter:null,new de(r))}}const ET="AsyncQueue";class TT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aP(this,"async_queue_retry"),this._c=()=>{const r=ed();r&&ne(ET,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=ed();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ed();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ni;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ys(e))throw e;ne(ET,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vt("INTERNAL UNHANDLED ERROR: ",IT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=yy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:IT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function IT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Py extends Ay{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new TT,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TT(e),this._firestoreClient=void 0,await e}}}function vL(n,e,t){t||(t=vd);const r=kg(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),a=r.getOptions(t);if(uo(a,e))return s;throw new le(Y.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new le(Y.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BA)throw new le(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&el(e.host)&&S0(e.host),r.initialize({options:e,instanceIdentifier:t})}function IP(n){if(n._terminated)throw new le(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wL(n),n._firestoreClient}function wL(n){const e=n._freezeSettings(),t=gL(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new uL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(n._componentsProvider))}class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(wt.fromBase64String(e))}catch(t){throw new le(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ec(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:At("string",Fn._jsonSchemaVersion),bytes:At("string")};class SP{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ry{constructor(e){this._methodName=e}}class xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(ec(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:At("string",xr._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};class er{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ec(e,er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new er(e.vectorValues);throw new le(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}er._jsonSchemaVersion="firestore/vectorValue/1.0",er._jsonSchema={type:At("string",er._jsonSchemaVersion),vectorValues:At("object")};const EL=/^__.*__$/;class TL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}function AP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{dataSource:n})}}class Cy{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AP(this.dataSource)&&EL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pf(e)}createContext(e,t,r,s=!1){return new Cy({dataSource:e,methodName:t,targetDoc:r,path:dt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PP(n){const e=n._freezeSettings(),t=pf(n._databaseId);return new IL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SL(n,e,t,r,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);xP("Data must be an object, but it was:",l,r);const h=RP(r,l);let f,p;if(a.merge)f=new Un(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const v of a.mergeFields){const E=ac(e,v,t);if(!l.contains(E))throw new le(Y.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CL(_,E)||_.push(E)}f=new Un(_),p=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,p=l.fieldTransforms;return new TL(new ln(h),f,p)}class xy extends Ry{_toFieldTransform(e){return new pA(e.path,new $a)}isEqual(e){return e instanceof xy}}function AL(n,e,t,r=!1){return by(t,n.createContext(r?4:3,e))}function by(n,e){if(CP(n=Cn(n)))return xP("Unsupported field value:",e,n),RP(n,e);if(n instanceof Ry)return(function(r,s){if(!AP(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const h of r){let f=by(h,s.childContextForArray(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ye.fromDate(r);return{timestampValue:Ga(s.serializer,a)}}if(r instanceof Ye){const a=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(s.serializer,a)}}if(r instanceof xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:EA(s.serializer,r._byteString)};if(r instanceof Ot){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:sy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof er)return(function(l,h){const f=l instanceof er?l.toArray():l;return{mapValue:{fields:{[Wg]:{stringValue:Qg},[Ua]:{arrayValue:{values:f.map((_=>{if(typeof _!="number")throw h.createError("VectorValues must only contain numeric values.");return Zg(h.serializer,_)}))}}}}}})(r,s);if(NA(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Zd(r)}`)})(n,e)}function RP(n,e){const t={};return FS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(n,((r,s)=>{const a=by(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function CP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof xr||n instanceof Fn||n instanceof Ot||n instanceof Ry||n instanceof er||NA(n))}function xP(n,e,t){if(!CP(t)||!ES(t)){const r=Zd(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function ac(n,e,t){if((e=Cn(e))instanceof SP)return e._internalPath;if(typeof e=="string")return RL(n,e);throw Dd("Field path arguments must be of type string or ",n,!1,void 0,t)}const PL=new RegExp("[~\\*/\\[\\]]");function RL(n,e,t){if(e.search(PL)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new SP(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dd(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new le(Y.INVALID_ARGUMENT,h+n+f)}function CL(n,e){return n.some((t=>t.isEqual(e)))}class xL{convertValue(e,t="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return wo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Ua].arrayValue?.values?.map((r=>ut(r.doubleValue)));return new er(t)}convertGeoPoint(e){return new xr(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=of(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const t=li(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ke.fromString(e);we(kA(r),9688,{name:e});const s=new po(r.get(1),r.get(3)),a=new de(r.popFirst(5));return s.isEqual(t)||vt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}class bL extends xL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function OF(){return new xy("serverTimestamp")}const ST="@firebase/firestore",AT="4.10.0";class bP{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(ac("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kL extends bP{data(){return super.data()}}function NL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class Ny extends ky{}function MF(n,e,...t){let r=[];e instanceof ky&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof Dy)).length,h=a.filter((f=>f instanceof _f)).length;if(l>1||l>0&&h>0)throw new le(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class _f extends Ny{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _f(e,t,r)}_apply(e){const t=this._parse(e);return kP(e._query,t),new ws(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=PP(e.firestore);return(function(a,l,h,f,p,_,v){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new le(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){RT(v,_);const D=[];for(const C of v)D.push(PT(f,a,C));E={arrayValue:{values:D}}}else E=PT(f,a,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||RT(v,_),E=AL(h,l,v,_==="in"||_==="not-in");return ze.create(p,_,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LF(n,e,t){const r=e,s=ac("where",n);return _f._create(s,r,t)}class Dy extends ky{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const h=a.getFlattenedFilters();for(const f of h)kP(l,f),l=Qm(l,f)})(e._query,t),new ws(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vy extends Ny{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vy(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $u(a,l)})(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,XO(e._query,t))}}function FF(n,e="asc"){const t=e,r=ac("orderBy",n);return Vy._create(r,t)}class Oy extends Ny{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Oy(e,t,r)}_apply(e){return new ws(e.firestore,e.converter,Td(e._query,this._limit,this._limitType))}}function UF(n){return Oy._create("limit",n,"F")}function PT(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new le(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nA(e)&&t.indexOf("/")!==-1)throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ke.fromString(t));if(!de.isDocumentKey(r))throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zu(n,new de(r))}if(t instanceof Ot)return zu(n,t._key);throw new le(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(t)}.`)}function RT(n,e){if(!Array.isArray(n)||n.length===0)throw new le(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kP(n,e){const t=(function(s,a){for(const l of s)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function DL(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class VL{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=FL(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function OL(n){return new VL(n)}class ML{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Gu.provider,this._offlineComponentProvider={build:t=>new wP(t,e?.cacheSizeBytes,this.forceOwnership)}}}class LL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Gu.provider,this._offlineComponentProvider={build:t=>new aL(t,e?.cacheSizeBytes)}}}function FL(n){return new ML(n?.forceOwnership)}function UL(){return new LL}class Mh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends bP{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ac("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:At("string",Ca._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class td extends Ca{data(e={}){return super.data(e)}}class xa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Mh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new td(this._firestore,this._userDataWriter,r.key,r,new Mh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const f=new td(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Mh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new td(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Mh(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:jL(h.type),doc:f,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}xa._jsonSchemaVersion="firestore/querySnapshot/1.0",xa._jsonSchema={type:At("string",xa._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};function jF(n){n=Fm(n,ws);const e=Fm(n.firestore,Py),t=IP(e),r=new bL(e);return NL(n._query),fL(t,n._query).then((s=>new xa(e,r,n,s)))}function zF(n,e){const t=Fm(n.firestore,Py),r=_L(n),s=DL(n.converter,e),a=PP(n.firestore);return zL(t,[SL(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then((()=>r))}function zL(n,e){const t=IP(n);return pL(t,e)}(function(e,t=!0){QV(tl),Na(new co("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new Py(new XV(r.getProvider("auth-internal")),new tO(l,r.getProvider("app-check-internal")),UO(l,s),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),rs(ST,AT,e),rs(ST,AT,"esm2020")})();const BL={apiKey:"AIzaSyCfccug_3K7B7SOM7iU5e8mp_Qmkdd-oow",authDomain:"kids-c368a.firebaseapp.com",projectId:"kids-c368a",storageBucket:"kids-c368a.firebasestorage.app",messagingSenderId:"721834841947",appId:"1:721834841947:web:f2943b388dfaa4f8baac7e"},NP=k0(BL),CT=KV(NP),BF=vL(NP,{localCache:OL({tabManager:UL()})});function $L(){const[n,e]=N.useState(null),[t,r]=N.useState(!0);return N.useEffect(()=>{const s=MD(CT,a=>{e(a),r(!1)});return bD(CT).catch(a=>{console.error("Failed to sign in anonymously:",a),r(!1)}),()=>s()},[]),{user:n,loading:t}}const DP=N.createContext(void 0);function qL({children:n}){const[e,t]=N.useState(()=>{const h=localStorage.getItem("kidszone_muted");return h?JSON.parse(h):!1});N.useEffect(()=>{localStorage.setItem("kidszone_muted",JSON.stringify(e))},[e]);const r=()=>t(!e),s=()=>{if(!e)try{const h=window.AudioContext||window.webkitAudioContext;if(!h)return;const f=new h,p=f.createOscillator(),_=f.createGain();p.connect(_),_.connect(f.destination),p.type="sine",p.frequency.setValueAtTime(440,f.currentTime),_.gain.setValueAtTime(.1,f.currentTime),_.gain.exponentialRampToValueAtTime(1e-5,f.currentTime+.1),p.start(),p.stop(f.currentTime+.1)}catch(h){console.error("Audio play failed",h)}},a=()=>{if(!e)try{const h=window.AudioContext||window.webkitAudioContext;if(!h)return;const f=new h,p=f.createOscillator(),_=f.createGain();p.connect(_),_.connect(f.destination),p.type="sine",p.frequency.setValueAtTime(523.25,f.currentTime),p.frequency.setValueAtTime(659.25,f.currentTime+.1),_.gain.setValueAtTime(.1,f.currentTime),_.gain.exponentialRampToValueAtTime(1e-5,f.currentTime+.3),p.start(),p.stop(f.currentTime+.3)}catch(h){console.error("Audio play failed",h)}},l=()=>{if(!e)try{const h=window.AudioContext||window.webkitAudioContext;if(!h)return;const f=new h,p=f.createOscillator(),_=f.createGain();p.connect(_),_.connect(f.destination),p.type="sawtooth",p.frequency.setValueAtTime(200,f.currentTime),_.gain.setValueAtTime(.1,f.currentTime),_.gain.exponentialRampToValueAtTime(1e-5,f.currentTime+.3),p.start(),p.stop(f.currentTime+.3)}catch(h){console.error("Audio play failed",h)}};return Q.jsx(DP.Provider,{value:{isMuted:e,toggleMute:r,playClick:s,playCorrect:a,playWrong:l},children:n})}function $F(){const n=N.useContext(DP);if(n===void 0)throw new Error("useSound must be used within a SoundProvider");return n}const VP=N.createContext(void 0),HL="";function GL({children:n}){const[e,t]=N.useState(()=>{const s=localStorage.getItem("kidszone_user");return s?JSON.parse(s):{name:"",avatar:HL}});N.useEffect(()=>{localStorage.setItem("kidszone_user",JSON.stringify(e))},[e]);const r=(s,a)=>{t({name:s,avatar:a})};return Q.jsx(VP.Provider,{value:{profile:e,updateProfile:r},children:n})}function qF(){const n=N.useContext(VP);if(n===void 0)throw new Error("useUser must be used within a UserProvider");return n}const xT=[{id:1,emoji:"",name:"",rarity:""},{id:2,emoji:"",name:"",rarity:""},{id:3,emoji:"",name:"",rarity:""},{id:4,emoji:"",name:"",rarity:""},{id:5,emoji:"",name:"",rarity:""},{id:6,emoji:"",name:"",rarity:""},{id:7,emoji:"",name:"",rarity:""},{id:8,emoji:"",name:"",rarity:""},{id:9,emoji:"",name:"",rarity:""},{id:10,emoji:"",name:"",rarity:""},{id:11,emoji:"",name:"",rarity:""},{id:12,emoji:"",name:"",rarity:""},{id:13,emoji:"",name:"",rarity:""},{id:14,emoji:"",name:"",rarity:""},{id:15,emoji:"",name:"",rarity:""},{id:16,emoji:"",name:"",rarity:""},{id:17,emoji:"",name:"",rarity:""},{id:18,emoji:"",name:"",rarity:""},{id:19,emoji:"",name:"",rarity:""},{id:20,emoji:"",name:"",rarity:""}],OP=N.createContext(void 0),bT="kidszone_stickers_collected",kT="kidszone_stickers_positions",NT="kidszone_user_stats",KL=[{id:"first_win",name:"",criteria:n=>n.gamesPlayed>=1,rewardStickerId:1,description:""},{id:"score_100",name:"",criteria:n=>n.totalScore>=100,rewardStickerId:2,description:" 100 "},{id:"games_5",name:"",criteria:n=>n.gamesPlayed>=5,rewardStickerId:3,description:" 5 "},{id:"score_500",name:"",criteria:n=>n.totalScore>=500,rewardStickerId:19,description:" 500 "}];function WL({children:n}){const[e,t]=N.useState(()=>{const v=localStorage.getItem(bT);return v?JSON.parse(v):[]}),[r,s]=N.useState(()=>{const v=localStorage.getItem(kT);return v?JSON.parse(v):{}}),[a,l]=N.useState(()=>{const v=localStorage.getItem(NT);return v?JSON.parse(v):{totalScore:0,gamesPlayed:0}});N.useEffect(()=>{localStorage.setItem(bT,JSON.stringify(e))},[e]),N.useEffect(()=>{localStorage.setItem(kT,JSON.stringify(r))},[r]),N.useEffect(()=>{localStorage.setItem(NT,JSON.stringify(a))},[a]);const h=v=>{e.includes(v)||t(E=>[...E,v])},f=(v,E,A)=>{s(D=>({...D,[v]:{id:v,x:E,y:A}}))},p=v=>{l(E=>({totalScore:E.totalScore+v,gamesPlayed:E.gamesPlayed+1}))},_=()=>{for(const v of KL)if(v.criteria(a)&&!e.includes(v.rewardStickerId))return h(v.rewardStickerId),xT.find(E=>E.id===v.rewardStickerId)||null;if(a.totalScore>0&&a.totalScore%50===0){const v=xT.filter(E=>!e.includes(E.id));if(v.length>0){const E=v[Math.floor(Math.random()*v.length)];return h(E.id),E}}return null};return Q.jsx(OP.Provider,{value:{collectedStickers:e,stickerPositions:r,userStats:a,unlockSticker:h,updateStickerPosition:f,updateStats:p,checkAchievements:_},children:n})}function HF(){const n=N.useContext(OP);if(n===void 0)throw new Error("useSticker must be used within a StickerProvider");return n}const QL=N.lazy(()=>rt(()=>import("./Home-B8DElID4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),YL=N.lazy(()=>rt(()=>import("./ColorGame-k15W_v-p.js"),__vite__mapDeps([8,1,9,10,11,3,4,12,2]))),JL=N.lazy(()=>rt(()=>import("./MathGame-S9I45VUX.js"),__vite__mapDeps([13,1,9,10,11,3,4,12,2,7]))),XL=N.lazy(()=>rt(()=>import("./EnglishGame-Dc03_yLM.js"),__vite__mapDeps([14,1,9,10,11,3,4,12,2]))),ZL=N.lazy(()=>rt(()=>import("./ShapeGame-B32sSkVG.js"),__vite__mapDeps([15,1,9,10,11,3,4,16,2]))),eF=N.lazy(()=>rt(()=>import("./MelodyGame-BJef0DTw.js"),__vite__mapDeps([17,1,9,10,11,3,4,2]))),tF=N.lazy(()=>rt(()=>import("./ClockGame-DdS97fLp.js"),__vite__mapDeps([18,1,9,10,11,3,4,2]))),nF=N.lazy(()=>rt(()=>import("./BopomofoGame-B_fdlKGK.js"),__vite__mapDeps([19,1,9,10,11,3,4,2]))),rF=N.lazy(()=>rt(()=>import("./EmotionGame-Ds-6unh0.js"),__vite__mapDeps([20,1,9,10,11,3,4,16,2]))),iF=N.lazy(()=>rt(()=>import("./CodingGame-Ccz3nweK.js"),__vite__mapDeps([21,1,9,10,11,3,4,2]))),sF=N.lazy(()=>rt(()=>import("./GardenGame-ZvGBTfUw.js"),__vite__mapDeps([22,1,9,10,11,3,4,2]))),oF=N.lazy(()=>rt(()=>import("./MarketGame-CnEydgQO.js"),__vite__mapDeps([23,1,9,10,11,3,4,2,6]))),aF=N.lazy(()=>rt(()=>import("./RecycleGame--2M14JC1.js"),__vite__mapDeps([24,1,9,10,11,3,4,2,16]))),lF=N.lazy(()=>rt(()=>import("./MemoryGame-UmNVqKYX.js"),__vite__mapDeps([25,1,9,10,11,3,4,2]))),uF=N.lazy(()=>rt(()=>import("./AnimalGame-KZIW9O3J.js"),__vite__mapDeps([26,1,9,10,11,3,4,12,2]))),cF=N.lazy(()=>rt(()=>import("./TrafficGame-CSbtcBbB.js"),__vite__mapDeps([27,1,9,10,11,3,4,12,2]))),hF=N.lazy(()=>rt(()=>import("./BodyGame-DBXP2cHj.js"),__vite__mapDeps([28,1,9,10,11,3,4,12,2]))),dF=N.lazy(()=>rt(()=>import("./FoodGame-DNwKWNbC.js"),__vite__mapDeps([29,1,9,10,11,3,4,12,2]))),fF=N.lazy(()=>rt(()=>import("./JobGame-Cmn9ROU0.js"),__vite__mapDeps([30,1,9,10,11,3,4,12,2]))),pF=N.lazy(()=>rt(()=>import("./PuzzleGame-Dr1IgeTZ.js"),__vite__mapDeps([31,1,9,10,11,3,4,16]))),mF=N.lazy(()=>rt(()=>import("./DifferenceGame-qcIxILGe.js"),__vite__mapDeps([32,1,9,10,11,3,4]))),gF=N.lazy(()=>rt(()=>import("./SequenceGame-DQV-H70w.js"),__vite__mapDeps([33,1,9,10,11,3,4,16]))),yF=N.lazy(()=>rt(()=>import("./SortingGame-cebk9bLS.js"),__vite__mapDeps([34,1,9,10,11,3,4,16]))),_F=N.lazy(()=>rt(()=>import("./Scores-DO_dcxTo.js"),__vite__mapDeps([35,1,10,11,5]))),vF=N.lazy(()=>rt(()=>import("./Stickers-BcOiunQZ.js"),__vite__mapDeps([36,1,16,37]))),wF=N.lazy(()=>rt(()=>import("./Certificates-CXIQ-8ZK.js"),__vite__mapDeps([38,1,11,4,2,37])));function EF(){const n="/kids/".replace(/\/$/,"");return Q.jsx(N.Suspense,{fallback:Q.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[hsl(var(--macaron-yellow))]",children:Q.jsx(CI,{className:"w-12 h-12 animate-spin text-[hsl(var(--macaron-purple-dark))]"})}),children:Q.jsxs(IC,{children:[Q.jsx(et,{path:n+"/",component:QL}),Q.jsx(et,{path:n+"/scores",component:_F}),Q.jsx(et,{path:n+"/stickers",component:vF}),Q.jsx(et,{path:n+"/game/color",component:YL}),Q.jsx(et,{path:n+"/game/math",component:JL}),Q.jsx(et,{path:n+"/game/english",component:XL}),Q.jsx(et,{path:n+"/game/shape",component:ZL}),Q.jsx(et,{path:n+"/game/melody",component:eF}),Q.jsx(et,{path:n+"/game/clock",component:tF}),Q.jsx(et,{path:n+"/game/bopomofo",component:nF}),Q.jsx(et,{path:n+"/game/emotion",component:rF}),Q.jsx(et,{path:n+"/game/coding",component:iF}),Q.jsx(et,{path:n+"/game/garden",component:sF}),Q.jsx(et,{path:n+"/game/market",component:oF}),Q.jsx(et,{path:n+"/game/recycle",component:aF}),Q.jsx(et,{path:n+"/game/memory",component:lF}),Q.jsx(et,{path:n+"/game/animal",component:uF}),Q.jsx(et,{path:n+"/game/traffic",component:cF}),Q.jsx(et,{path:n+"/game/body",component:hF}),Q.jsx(et,{path:n+"/game/food",component:dF}),Q.jsx(et,{path:n+"/game/job",component:fF}),Q.jsx(et,{path:n+"/game/puzzle",component:pF}),Q.jsx(et,{path:n+"/game/difference",component:mF}),Q.jsx(et,{path:n+"/game/sequence",component:gF}),Q.jsx(et,{path:n+"/game/sorting",component:yF}),Q.jsx(et,{path:n+"/certificates",component:wF}),Q.jsx(et,{component:dk})]})})}function TF({children:n}){const{loading:e}=$L();return e?Q.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[hsl(var(--macaron-yellow))]",children:Q.jsx(CI,{className:"w-12 h-12 animate-spin text-[hsl(var(--macaron-purple-dark))]"})}):Q.jsx(Q.Fragment,{children:n})}function IF(){return Q.jsx(GC,{client:QC,children:Q.jsxs(sk,{children:[Q.jsx(D1,{}),Q.jsx(qL,{children:Q.jsx(GL,{children:Q.jsx(WL,{children:Q.jsx(TF,{children:Q.jsx(EF,{})})})})})]})})}YR.createRoot(document.getElementById("root")).render(Q.jsx(IF,{}));export{UF as A,g0 as B,FF as C,fg as D,LF as E,jF as F,OF as G,xT as H,Fd as I,VC as J,RC as K,TC as L,aw as M,Yn as N,Ld as O,cn as P,AC as Q,Wi as R,Md as S,PC as T,GT as U,FC as V,xC as W,Jx as X,SF as Y,$F as Z,HF as a,ZR as b,_g as c,ao as d,br as e,tr as f,Ax as g,Ud as h,pg as i,Q as j,iI as k,Ct as l,rd as m,xF as n,hn as o,Ru as p,BC as q,N as r,AF as s,Zt as t,qF as u,CF as v,zF as w,VF as x,BF as y,MF as z};
