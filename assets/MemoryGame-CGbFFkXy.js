import{r,j as t}from"./index-dxj7E4H-.js";import{L as Y,S as z,m as C}from"./Layout-CmlOHSNV.js";import{G as D}from"./GameShell-CODfseyM.js";import{e as M}from"./confetti.module-BS7HiWFO.js";import{u as Q}from"./use-tts-BqW3F_mk.js";import"./use-scores-D77kwo0O.js";import"./input-R0n0rv70.js";const N=[{id:1,name:"åœ–æ¡ˆé…å°",description:"æ‰¾å‡ºä¸€æ¨£çš„åœ–æ¡ˆï¼",pairs:[{pairId:"rabbit",items:[{content:"ðŸ°",type:"image"},{content:"ðŸ°",type:"image"}]},{pairId:"bear",items:[{content:"ðŸ»",type:"image"},{content:"ðŸ»",type:"image"}]},{pairId:"fox",items:[{content:"ðŸ¦Š",type:"image"},{content:"ðŸ¦Š",type:"image"}]},{pairId:"panda",items:[{content:"ðŸ¼",type:"image"},{content:"ðŸ¼",type:"image"}]},{pairId:"koala",items:[{content:"ðŸ¨",type:"image"},{content:"ðŸ¨",type:"image"}]},{pairId:"lion",items:[{content:"ðŸ¦",type:"image"},{content:"ðŸ¦",type:"image"}]},{pairId:"tiger",items:[{content:"ðŸ¯",type:"image"},{content:"ðŸ¯",type:"image"}]},{pairId:"frog",items:[{content:"ðŸ¸",type:"image"},{content:"ðŸ¸",type:"image"}]}]},{id:2,name:"å–®å­—å­¸ç¿’",description:"åœ–æ¡ˆå°æ‡‰æ–‡å­—",pairs:[{pairId:"rabbit",items:[{content:"ðŸ°",type:"image"},{content:"å…”å­",type:"text"}]},{pairId:"bear",items:[{content:"ðŸ»",type:"image"},{content:"ç†Š",type:"text"}]},{pairId:"fox",items:[{content:"ðŸ¦Š",type:"image"},{content:"ç‹ç‹¸",type:"text"}]},{pairId:"panda",items:[{content:"ðŸ¼",type:"image"},{content:"ç†Šè²“",type:"text"}]},{pairId:"koala",items:[{content:"ðŸ¨",type:"image"},{content:"ç„¡å°¾ç†Š",type:"text"}]},{pairId:"lion",items:[{content:"ðŸ¦",type:"image"},{content:"ç…å­",type:"text"}]},{pairId:"tiger",items:[{content:"ðŸ¯",type:"image"},{content:"è€è™Ž",type:"text"}]},{pairId:"frog",items:[{content:"ðŸ¸",type:"image"},{content:"é’è›™",type:"text"}]}]},{id:3,name:"æ•¸å­¸æŒ‘æˆ°",description:"ç®—å¼å°æ‡‰ç­”æ¡ˆ",pairs:[{pairId:"m1",items:[{content:"1 + 1",type:"text"},{content:"2",type:"text"}]},{pairId:"m2",items:[{content:"2 + 2",type:"text"},{content:"4",type:"text"}]},{pairId:"m3",items:[{content:"5 - 2",type:"text"},{content:"3",type:"text"}]},{pairId:"m4",items:[{content:"3 + 3",type:"text"},{content:"6",type:"text"}]},{pairId:"m5",items:[{content:"10 - 5",type:"text"},{content:"5",type:"text"}]},{pairId:"m6",items:[{content:"8 + 0",type:"text"},{content:"8",type:"text"}]},{pairId:"m7",items:[{content:"4 + 3",type:"text"},{content:"7",type:"text"}]},{pairId:"m8",items:[{content:"9 - 0",type:"text"},{content:"9",type:"text"}]}]}];function U(){const[n,v]=r.useState(1),[l,x]=r.useState([]),[S,h]=r.useState([]),[w,b]=r.useState(!1),[I,j]=r.useState(0),[y,F]=r.useState(6),[L,k]=r.useState(!1),{speak:c}=Q(),d=N.find(e=>e.id===n)||N[0],$=()=>{const e=n===1?6:8;return F(e),[...d.pairs].sort(()=>.5-Math.random()).slice(0,e).flatMap((i,s)=>{const o=i.items[0],u=i.items[1];return[{id:s*2,pairId:i.pairId,content:o.content,type:o.type,isFlipped:!1,isMatched:!1},{id:s*2+1,pairId:i.pairId,content:u.content,type:u.type,isFlipped:!1,isMatched:!1}]}).sort(()=>.5-Math.random())};r.useEffect(()=>{T()},[n]);const T=()=>{k(!1),x($()),h([]),j(0),b(!1),c(`ç¬¬${n}é—œï¼Œ${d.name}ï¼${d.description}`)},P=e=>{if(w)return;const m=l.find(s=>s.id===e);if(!m||m.isFlipped||m.isMatched)return;const f=[...S,e];h(f),x(l.map(s=>s.id===e?{...s,isFlipped:!0}:s));let i=m.content;if(i.includes("+")&&(i=i.replace("+","åŠ ")),i.includes("-")&&(i=i.replace("-","æ¸›")),c(i),f.length===2){b(!0);const[s,o]=f,u=l.find(a=>a.id===s),V=l.find(a=>a.id===o);setTimeout(()=>{if(u.pairId===V.pairId){M({particleCount:30,spread:40,origin:{y:.6}}),c("ç­”å°äº†ï¼"),x(p=>p.map(g=>g.id===s||g.id===o?{...g,isMatched:!0}:g));const a=I+1;j(a),a===y&&E()}else c("å†è©¦ä¸€æ¬¡ï¼"),x(a=>a.map(p=>p.id===s||p.id===o?{...p,isFlipped:!1}:p));h([]),b(!1)},1e3)}},E=()=>{M({particleCount:100,spread:70,origin:{y:.6}}),c("å¤ªæ£’äº†ï¼éŽé—œï¼"),setTimeout(()=>{n<3?v(e=>e+1):k(!0)},2e3)},G=()=>{v(1)},O=y===6?"grid-cols-3 sm:grid-cols-4":"grid-cols-4",R=y===6?"w-20 h-24 sm:w-24 sm:h-32 md:w-28 md:h-36":"w-16 h-20 sm:w-20 sm:h-28 md:w-24 md:h-32";return t.jsx(Y,{children:t.jsx(D,{title:`é­”æ³•ç¿»ç¿»ç‰Œ - Level ${n}`,score:n*100+I*10,totalQuestions:3,currentQuestionIndex:n-1,gameType:"memory",isGameOver:L,onRestart:G,colorClass:"bg-[hsl(var(--macaron-purple))] text-[hsl(var(--macaron-purple-dark))]",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 w-full max-w-4xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-6 py-2 rounded-full shadow-sm",children:[t.jsx(z,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),t.jsx("span",{className:"font-bold text-lg text-purple-700",children:d.name}),t.jsx("span",{className:"text-purple-400",children:"|"}),t.jsx("span",{className:"text-sm text-purple-600",children:d.description})]}),t.jsxs("div",{className:"text-sm font-bold text-purple-400",children:["é…å°é€²åº¦ï¼š",I," / ",y]}),t.jsx("div",{className:`grid ${O} gap-3 sm:gap-4 p-2`,children:l.map(e=>t.jsx(C.button,{onClick:()=>P(e.id),disabled:e.isFlipped||e.isMatched||w,className:`
                  relative rounded-xl sm:rounded-2xl shadow-xl transition-all duration-300 transform perspective-1000
                  ${R}
                  ${e.isMatched?"opacity-0 pointer-events-none scale-0":"opacity-100"}
                `,whileHover:{scale:1.05,rotate:1},whileTap:{scale:.95},children:t.jsxs(C.div,{className:"w-full h-full relative preserve-3d",initial:!1,animate:{rotateY:e.isFlipped?180:0},transition:{type:"spring",stiffness:260,damping:20},style:{transformStyle:"preserve-3d"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-xl sm:rounded-2xl flex items-center justify-center border-4 border-white shadow-inner backface-hidden",style:{backfaceVisibility:"hidden"},children:t.jsx("span",{className:"text-3xl sm:text-4xl text-white opacity-80 font-black",children:"?"})}),t.jsx("div",{className:`
                        absolute inset-0 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center border-4 
                        ${e.type==="text"?"border-pink-300 bg-pink-50":"border-purple-300"}
                        shadow-sm backface-hidden
                    `,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:t.jsx("span",{className:`
                        font-black text-center px-1
                        ${e.type==="text"?"text-lg sm:text-xl text-purple-600 font-display":"text-4xl sm:text-6xl"}
                    `,children:e.content})})]})},e.id))})]})})})}export{U as default};
