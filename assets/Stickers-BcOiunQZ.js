import{c as p,a as x,j as e,H as m}from"./index-n-EY8GTy.js";import{L as h,S as u}from"./Layout-D_yaY9ik.js";import{u as f,D as g,a as y}from"./core.esm--E3q7WdY.js";import{L as j}from"./lock-BeSzguN2.js";const v=p("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);function b({id:n,emoji:l,name:c,x:t,y:i}){const{attributes:s,listeners:r,setNodeRef:o,transform:a}=y({id:`sticker-${n}`}),d=a?{transform:`translate3d(${a.x}px, ${a.y}px, 0)`}:void 0;return e.jsxs("div",{ref:o,style:{position:"absolute",left:t,top:i,...d},...r,...s,className:"cursor-move select-none flex flex-col items-center group z-10",children:[e.jsx("div",{className:"text-5xl sm:text-6xl drop-shadow-md transition-transform group-hover:scale-110 active:scale-125",children:l}),e.jsx("span",{className:"bg-white/80 px-2 py-0.5 rounded-full text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:c})]})}function N(){const{collectedStickers:n,stickerPositions:l,updateStickerPosition:c}=x(),{setNodeRef:t}=f({id:"canvas"}),i=s=>{const{active:r,delta:o}=s,a=parseInt(r.id.toString().replace("sticker-","")),d=l[a]||{x:50,y:50};c(a,Math.max(0,Math.min(d.x+o.x,window.innerWidth-100)),Math.max(0,Math.min(d.y+o.y,500)))};return e.jsx(g,{onDragEnd:i,children:e.jsxs("div",{ref:t,className:"w-full h-[600px] bg-white/40 backdrop-blur-sm rounded-[2rem] border-4 border-white/60 shadow-inner relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-4 right-4 text-muted-foreground/50 flex items-center gap-2 pointer-events-none",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-bold",children:"拖拉貼紙來佈置！"})]}),n.map(s=>{const r=m.find(a=>a.id===s);if(!r)return null;const o=l[s]||{x:Math.random()*200+50,y:Math.random()*200+50};return e.jsx(b,{id:s,emoji:r.emoji,name:r.name,x:o.x,y:o.y},s)}),n.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground/50 font-bold text-xl",children:"還沒有貼紙喔，快去玩遊戲收集！"})]})})}function D(){const{collectedStickers:n}=x(),l=n.length,c=m.length;return e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"font-display text-3xl sm:text-4xl md:text-5xl font-bold text-[hsl(var(--macaron-purple-dark))]",children:"我的貼紙簿"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:"拖拉貼紙，打造你的專屬樂園！"}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-md rounded-full px-4 sm:px-6 py-2 sm:py-3 inline-flex items-center gap-2 sm:gap-3 shadow-md",children:[e.jsx(u,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 fill-yellow-400"}),e.jsxs("span",{className:"font-display font-bold text-lg sm:text-xl",children:[l," / ",c]}),e.jsx("span",{className:"text-sm sm:text-base text-muted-foreground",children:"已收集"})]})]}),e.jsx(N,{}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold text-[hsl(var(--macaron-purple-dark))] mb-4 px-2",children:"圖鑑一覽"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 gap-2 sm:gap-3",children:m.map(t=>{const i=n.includes(t.id);return e.jsx("div",{className:`
                    aspect-square rounded-xl flex items-center justify-center text-2xl sm:text-3xl
                    ${i?"bg-white shadow-sm":"bg-gray-100 opacity-50 grayscale"}
                  `,title:t.name,children:i?t.emoji:e.jsx(j,{className:"w-5 h-5"})},t.id)})})]})]})})}export{D as default};
